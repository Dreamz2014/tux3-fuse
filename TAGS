
current_task.c,65
__thread struct task_struct current_task = {};current_task7,66

current_task.h,232
#define TUX3_CURRENT_TASK_HTUX3_CURRENT_TASK_H2,28
struct task_struct {task_struct4,57
	void *journal_info;journal_info5,78
static inline struct task_struct *get_current(void)get_current9,152
#define current	current14,232

tux3.c,1122
#define VERSION VERSION17,393
#define STRINGIFY2(STRINGIFY218,413
#define STRINGIFY(STRINGIFY19,444
static int open_volume(const char *volname)open_volume21,486
static int open_sb(const char *volname, struct sb *sb)open_sb33,753
static int open_fs(const char *volname, struct sb *sb)open_fs49,1076
static int mkfs(const char *volname, struct sb *sb, unsigned blocksize)mkfs68,1517
static void usage(struct options *options, const char *progname,usage104,2354
struct vars { const char *volname; unsigned blocksize; long long seek; int verbose; };vars125,2964
struct vars { const char *volname; unsigned blocksize; long long seek; int verbose; };volname125,2964
struct vars { const char *volname; unsigned blocksize; long long seek; int verbose; };blocksize125,2964
struct vars { const char *volname; unsigned blocksize; long long seek; int verbose; };seek125,2964
struct vars { const char *volname; unsigned blocksize; long long seek; int verbose; };verbose125,2964
static void command_options(int *argc, const char ***args,command_options127,3052
int main(int argc, char *argv[])main174,4172

super.c,599
#define trace trace14,339
static void inode_init_once(struct inode *inode)inode_init_once17,370
void inode_init(struct tux3_inode *tuxnode, struct sb *sb, umode_t mode)inode_init32,685
void free_inode_check(struct tux3_inode *tuxnode)free_inode_check49,1072
int put_super(struct sb *sb)put_super64,1412
static int clear_other_magic(struct sb *sb)clear_other_magic83,1780
static int reserve_superblock(struct sb *sb)reserve_superblock119,2434
int make_tux3(struct sb *sb)make_tux3143,2969
int tux3_init_mem(void)tux3_init_mem219,4540
void tux3_exit_mem(void)tux3_exit_mem228,4702

tux3graph.c,10866
#define TABLE_STYLE TABLE_STYLE19,446
static int opt_verbose;opt_verbose22,538
static int opt_stats;opt_stats23,562
#define DRAWN_DTREE	DRAWN_DTREE25,585
#define DRAWN_DLEAF	DRAWN_DLEAF26,614
#define DRAWN_ILEAF	DRAWN_ILEAF27,643
#define DRAWN_OLEAF	DRAWN_OLEAF28,672
static int drawn;drawn29,701
struct stats_seek {stats_seek32,752
	block_t blocks;				/* total seek blocks */blocks33,772
	block_t nr;				/* number of seek */nr34,816
	block_t io;				/* number of I/O */io35,853
struct stats_btree_block {stats_btree_block38,893
	block_t blocks;				/* number of blocks */blocks39,920
	block_t empty;				/* number of empty blocks */empty40,963
	block_t bytes;				/* number of used bytes */bytes41,1011
struct stats_btree_data {stats_btree_data44,1061
	block_t blocks;				/* number of blocks */blocks45,1087
	block_t nr;				/* number of extents */nr46,1130
	unsigned max;				/* maximum extent */max47,1170
	unsigned min;				/* minimum extent */min48,1209
	block_t last;				/* last seek pos of data */last49,1248
	struct stats_seek data_seek;		/* seek to next data */data_seek50,1294
	struct stats_seek dir_seek;		/* dir => ileaf seek */dir_seek51,1349
struct stats_btree_level {stats_btree_level54,1407
	struct stats_btree_block block;		/* block space stats */block55,1434
	struct stats_seek child_seek;		/* seek to child object */child_seek56,1492
struct stats_btree {stats_btree59,1555
	struct stats_seek depth_seek;		/* seek for depth-first */depth_seek60,1576
	struct stats_btree_data data;		/* data blocks stats */data61,1635
	int depth;depth62,1691
	struct stats_btree_level levels[];	/* block stats for each level */levels63,1703
struct stats_fs {stats_fs66,1776
	struct stats_btree *own;own67,1794
	struct stats_btree *dtree_sum;dtree_sum68,1820
	block_t logblock;			/* number of log blocks */logblock70,1853
	block_t logblock_bytes;			/* number of log bytes */logblock_bytes71,1901
	struct stats_seek logblock_seek;	/* seek for depth-first */logblock_seek72,1954
static double percentage(u64 numerator, u64 denominator)percentage75,2019
static u64 average(u64 total, u64 nr)average86,2262
static struct stats_btree *alloc_stats_btree(int depth)alloc_stats_btree97,2448
static void free_stats_btree(struct stats_btree *stats)free_stats_btree118,2887
static struct stats_fs init_stats_fs(struct btree *btree)init_stats_fs128,3076
static void destroy_stats_fs(struct stats_fs *stats)destroy_stats_fs141,3383
static block_t stats_suppose_seek(block_t physical, unsigned count)stats_suppose_seek151,3610
static void stats_seek_add(struct stats_seek *stats, block_t seek_len)stats_seek_add166,3957
static void stats_data_seek_add(struct stats_btree *stats, block_t block,stats_data_seek_add177,4202
static void stats_dir_seek_add(struct stats_btree *stats, block_t dir,stats_dir_seek_add189,4545
static void stats_child_seek_add(struct stats_btree *stats, int level,stats_child_seek_add207,5010
static void stats_block_add(struct stats_btree *stats, int level,stats_block_add218,5318
static void stats_data_add(struct stats_btree *stats, block_t block,stats_data_add234,5756
stats_levels_sum(struct stats_btree *stats, int depth)stats_levels_sum252,6225
static void stats_btree_merge(struct stats_btree **a, struct stats_btree *b)stats_btree_merge272,6806
static void stats_print_seek(struct stats_seek *stats, const char *prefix)stats_print_seek335,8630
static void stats_print_depth_seek(struct stats_seek *stats)stats_print_depth_seek349,9101
static void stats_print_seeks(struct sb *sb, struct stats_btree *stats,stats_print_seeks358,9309
static void stats_print_log(struct sb *sb, struct stats_fs *stats)stats_print_log384,9919
static void stats_print_level(struct sb *sb, struct stats_btree_level *level,stats_print_level402,10400
stats_print(struct sb *sb, struct stats_btree *stats, int data, int dir,stats_print421,10946
struct graph_info {graph_info463,11958
	FILE *fp;fp464,11978
	char subgraph[32];	/* subgraph name */subgraph465,11989
	char filedata[32];	/* filedata name */filedata466,12029
	const char *bname;	/* btree name */bname467,12069
	const char *lname;	/* leaf name */lname468,12106
	struct list_head link_head;link_head469,12142
	void *private;private471,12172
	struct stats_fs *stats;stats473,12189
struct link_info {link_info476,12218
	char link[256];link477,12237
	struct list_head list;list478,12254
#define linfo_entry(linfo_entry480,12281
struct tmpfile_info {tmpfile_info482,12344
	FILE *fp;fp483,12366
	struct list_head list;list484,12377
#define tmpfile_entry(tmpfile_entry486,12404
static void add_link(struct graph_info *gi, const char *fmt, ...)add_link488,12471
static void write_link(struct graph_info *gi)write_link508,12940
static struct tmpfile_info *alloc_tmpfile(void)alloc_tmpfile525,13320
static void merge_file(FILE *dst, FILE *src)merge_file544,13730
static void merge_tmpfiles(struct graph_info *gi)merge_tmpfiles566,14154
static void draw_btree_pre(struct btree *btree, void *data)draw_btree_pre581,14506
static void draw_bnode(struct btree *btree, struct buffer_head *buffer,draw_bnode596,14863
static void draw_btree_post(struct btree *btree, void *data)draw_btree_post650,16248
struct draw_data_ops {draw_data_ops664,16529
	void (*draw_start)(struct graph_info *gi, struct btree *btree);draw_start665,16552
	void (*draw_data)(struct graph_info *gi, struct btree *btree,draw_data666,16617
	void (*draw_end)(struct graph_info *gi, struct btree *btree);draw_end669,16766
static void draw_subdata_start(struct graph_info *gi, struct btree *btree,draw_subdata_start672,16833
static void draw_data_start(struct graph_info *gi, struct btree *btree)draw_data_start682,17095
static void draw_data(struct graph_info *gi, struct btree *btree,draw_data696,17402
static void draw_subdata_end(struct graph_info *gi, struct btree *btree)draw_subdata_end707,17667
static void draw_data_end(struct graph_info *gi, struct btree *btree)draw_data_end718,17895
static void draw_bitmap_start(struct graph_info *gi, struct btree *btree)draw_bitmap_start729,18127
static int bitmap_has_dirty;bitmap_has_dirty735,18288
static void draw_bitmap_data(struct graph_info *gi, struct btree *btree,draw_bitmap_data737,18318
static void draw_bitmap_end(struct graph_info *gi, struct btree *btree)draw_bitmap_end788,19551
struct draw_data_ops draw_bitmap = {draw_bitmap801,19836
static void draw_vtable_start(struct graph_info *gi, struct btree *btree)draw_vtable_start807,19973
struct draw_data_ops draw_vtable = {draw_vtable817,20231
static void draw_atable_start(struct graph_info *gi, struct btree *btree)draw_atable_start823,20359
static void __draw_dir_data(struct graph_info *gi, struct btree *btree,__draw_dir_data833,20616
static void draw_atable_atomref(struct graph_info *gi, struct btree *btree,draw_atable_atomref881,21877
static void draw_atable_unatom(struct graph_info *gi, struct btree *btree,draw_atable_unatom920,22859
static void draw_atable_data(struct graph_info *gi, struct btree *btree,draw_atable_data948,23545
static void draw_atable_end(struct graph_info *gi, struct btree *btree)draw_atable_end1006,24997
struct draw_data_ops draw_atable = {draw_atable1016,25230
static void draw_dir_start(struct graph_info *gi, struct btree *btree)draw_dir_start1022,25367
static void draw_dir_data(struct graph_info *gi, struct btree *btree,draw_dir_data1033,25626
static void draw_dir_end(struct graph_info *gi, struct btree *btree)draw_dir_end1053,26123
struct draw_data_ops draw_dir = {draw_dir1064,26355
static void draw_file_start(struct graph_info *gi, struct btree *btree)draw_file_start1070,26480
struct draw_data_ops draw_file = {draw_file1080,26732
static void draw_symlink_start(struct graph_info *gi, struct btree *btree)draw_symlink_start1086,26856
struct draw_data_ops draw_symlink = {draw_symlink1096,27114
static void draw_dleaf_start(struct graph_info *gi, const char *dleaf_name,draw_dleaf_start1102,27244
static void draw_dleaf_end(struct graph_info *gi, const char *dleaf_name,draw_dleaf_end1118,27650
static inline struct group *dleaf_groups_ptr(struct btree *btree,dleaf_groups_ptr1133,27980
static inline struct group *dleaf_group_ptr(struct group *groups, int gr)dleaf_group_ptr1143,28230
static inline struct entry *dleaf_entries(struct dleaf *dleaf,dleaf_entries1152,28437
static inline struct entry *dleaf_entry(struct entry *entries, int ent)dleaf_entry1165,28818
static inline int dleaf_extent_count(struct entry *entries, int ent)dleaf_extent_count1174,29025
static inline struct diskextent *dleaf_extents(struct dleaf *dleaf,dleaf_extents1184,29325
static inline struct diskextent *dleaf_extent(struct diskextent *extents,dleaf_extent1210,29970
static void draw_dleaf1(struct graph_info *gi, struct btree *btree,draw_dleaf11220,30192
static void draw_dleaf2(struct graph_info *gi, struct btree *btree,draw_dleaf21340,33686
static void draw_dleaf(struct btree *btree, struct buffer_head *leafbuf,draw_dleaf1415,35607
static struct walk_btree_ops draw_dtree_ops = {draw_dtree_ops1445,36504
	const char *name;name1453,36665
	struct draw_data_ops *info;info1454,36684
}  dtree_types[] = {dtree_types1455,36713
#define S_SHIFT S_SHIFT1474,37018
struct draw_data_ops *dtree_funcs[S_IFMT >> S_SHIFT] = {dtree_funcs1475,37037
static void draw_ileaf_cb(struct buffer_head *leafbuf, int at,draw_ileaf_cb1487,37378
typedef void (*draw_ileaf_attr_t)(struct graph_info *, struct btree *,draw_ileaf_attr_t1589,40059
static void draw_ileaf_attr(struct graph_info *gi, struct btree *btree,draw_ileaf_attr1592,40181
static void __draw_ileaf(struct graph_info *gi, struct btree *btree,__draw_ileaf1634,41298
static void draw_ileaf(struct btree *btree, struct buffer_head *leafbuf,draw_ileaf1731,43553
static struct walk_btree_ops draw_itree_ops = {draw_itree_ops1749,43964
static void draw_oleaf_attr(struct graph_info *gi, struct btree *btree,draw_oleaf_attr1756,44109
static void draw_oleaf(struct btree *btree, struct buffer_head *leafbuf,draw_oleaf1767,44425
static struct walk_btree_ops draw_otree_ops = {draw_otree_ops1783,44787
static void draw_log_pre(struct sb *sb, struct buffer_head *buffer,draw_log_pre1790,44932
static void draw_log(struct sb *sb, struct buffer_head *buffer,draw_log1819,45807
static void draw_log_post(struct sb *sb, struct buffer_head *buffer,draw_log_post1947,48590
struct walk_logchain_ops draw_logchain_ops = {draw_logchain_ops1973,49222
static void draw_logchain(struct graph_info *gi, struct sb *sb)draw_logchain1979,49337
static void draw_sb(struct graph_info *gi, struct sb *sb)draw_sb1995,49662
static void usage(void)usage2049,51580
int main(int argc, char *argv[])main2059,51800

Makefile,2347
TOPDIR = $(CURDIR)TOPDIR1,0
ARCH	= $(shell uname -m)ARCH3,20
CC	= gccCC5,46
AR	= arAR6,55
LDFLAGS =LDFLAGS39,920
AFLAGS	= rcsAFLAGS40,930
CHECKER	   = sparseCHECKER42,944
CHECKFLAGS = -gcc-base-dir $(shell $(CC) -print-file-name=)CHECKFLAGS43,964
INSTALL	= installINSTALL53,1432
TESTDIR	= $(TOPDIR)TESTDIR55,1451
OWNER	= rootOWNER56,1471
GROUP	= rootGROUP57,1484
GCOV_DIR = gcovGCOV_DIR59,1498
LCOV_FLAGS = --captureLCOV_FLAGS60,1514
GENHTML_FLAGS = --prefix $(abspath $(TOPDIR)/../) --show-details --legendGENHTML_FLAGS61,1537
DISTDIR	=DISTDIR63,1612
PREFIX	= /usr/localPREFIX64,1622
SBINDIR	= $(PREFIX)/sbinSBINDIR65,1642
LIBEXECDIR = $(PREFIX)/libexec/tux3LIBEXECDIR66,1667
TUX3_BIN	= tux3 tux3graphTUX3_BIN69,1715
	FUSE_BIN = tux3fuseFUSE_BIN71,1794
TEST_BIN	= tests/balloc tests/btree tests/buffer tests/commit \TEST_BIN73,1821
ALL_BIN		= $(TEST_BIN) $(TUX3_BIN) $(FUSE_BIN)ALL_BIN76,1996
LIBTUX3		= libtux3.aLIBTUX379,2056
LIBKLIB		= libklib/libklib.aLIBKLIB80,2077
ALL_LIBS	= $(LIBTUX3) $(LIBKLIB)ALL_LIBS81,2106
USER_OBJS	= current_task.o dir.o filemap.o inode.o namei.o options.o \USER_OBJS84,2158
KERN_OBJS	= kernel/balloc.o kernel/btree.o kernel/commit.o \KERN_OBJS86,2260
TEST_LIB_OBJS	= tests/test.oTEST_LIB_OBJS89,2446
LIBKLIB_OBJS	= libklib/find_next_bit.o libklib/fs.o libklib/list_sort.o \LIBKLIB_OBJS92,2494
OBJS		= tux3.o tux3graph.oOBJS96,2619
FUSE_OBJS	= tux3fuse.oFUSE_OBJS97,2646
TEST_OBJS	= tests/balloc.o tests/btree.o tests/buffer.o tests/commit.o \TEST_OBJS98,2669
COMMON_OBJS	= $(USER_OBJS) $(TEST_LIB_OBJS) $(LIBKLIB_OBJS) $(OBJS) \COMMON_OBJS104,2908
ALL_OBJS	= $(USER_OBJS) $(KERN_OBJS) $(TEST_LIB_OBJS) $(LIBKLIB_OBJS) \ALL_OBJS107,2993
OBJS_DIRS := $(sort $(dir $(ALL_OBJS)))OBJS_DIRS110,3131
DEPDIR	  := .depsDEPDIR135,3903
DEP_FILES := $(foreach f,$(ALL_OBJS),$(dir $f)$(DEPDIR)/$(notdir $f).d)DEP_FILES136,3921
DEP_DIRS  := $(addsuffix $(DEPDIR),$(OBJS_DIRS))DEP_DIRS137,3993
MISSING_DEP_DIRS := $(filter-out $(wildcard $(DEP_DIRS)),$(DEP_DIRS))MISSING_DEP_DIRS138,4042
DEP_FILE = $(dir $@)$(DEPDIR)/$(notdir $@).dDEP_FILE143,4140
DEP_ARGS = -MF $(DEP_FILE) -MP -MMDDEP_ARGS144,4185
DEP_FILES_PRESENT := $(wildcard $(DEP_FILES))DEP_FILES_PRESENT147,4330
	dd if=/dev/zero of=$(TESTDIR)/testdev bs=1 count=1 seek=1Mf212,6307

buffer.c,4676
#define buftrace buftrace12,206
#define MIN_SECTOR_BITS	MIN_SECTOR_BITS33,1165
#define SECTOR_BITS	SECTOR_BITS34,1192
#define SECTOR_SIZE	SECTOR_SIZE35,1215
#define BUFFER_PARANOIA_DEBUGBUFFER_PARANOIA_DEBUG37,1256
static int debug_buffer;debug_buffer43,1363
static struct list_head buffers[BUFFER_STATES], lru_buffers;buffers45,1389
static struct list_head buffers[BUFFER_STATES], lru_buffers;lru_buffers45,1389
static unsigned max_buffers = 10000, max_evict = 1000, buffer_count;max_buffers46,1450
static unsigned max_buffers = 10000, max_evict = 1000, buffer_count;max_evict46,1450
static unsigned max_buffers = 10000, max_evict = 1000, buffer_count;buffer_count46,1450
void show_buffer(struct buffer_head *buffer)show_buffer48,1520
void show_buffers_(map_t *map, int all)show_buffers_61,1831
void show_active_buffers(map_t *map)show_active_buffers84,2338
void show_buffers(map_t *map)show_buffers94,2533
void show_buffer_list(struct list_head *list)show_buffer_list104,2721
void show_dirty_buffers(map_t *map)show_dirty_buffers119,3029
void show_buffers_state(unsigned state)show_buffers_state131,3319
int count_buffers(void)count_buffers141,3542
static int reclaim_buffer(struct buffer_head *buffer)reclaim_buffer158,3976
static inline int reclaim_buffer_early(struct buffer_head *buffer)reclaim_buffer_early175,4366
static inline int is_reclaim_buffer_early(void)is_reclaim_buffer_early188,4644
void set_buffer_state_list(struct buffer_head *buffer, unsigned state, struct list_head *list)set_buffer_state_list201,4882
static inline void set_buffer_state(struct buffer_head *buffer, unsigned state)set_buffer_state213,5217
void tux3_set_buffer_dirty_list(map_t *map, struct buffer_head *buffer,tux3_set_buffer_dirty_list222,5459
void tux3_set_buffer_dirty(map_t *map, struct buffer_head *buffer, int delta)tux3_set_buffer_dirty232,5740
struct buffer_head *set_buffer_dirty(struct buffer_head *buffer)set_buffer_dirty242,6044
struct buffer_head *set_buffer_clean(struct buffer_head *buffer)set_buffer_clean252,6295
struct buffer_head *__set_buffer_empty(struct buffer_head *buffer)__set_buffer_empty263,6555
struct buffer_head *set_buffer_empty(struct buffer_head *buffer)set_buffer_empty273,6785
void tux3_clear_buffer_dirty(struct buffer_head *buffer, unsigned delta)tux3_clear_buffer_dirty283,7024
static void __clear_buffer_dirty_for_endio(struct buffer_head *buffer, int err)__clear_buffer_dirty_for_endio297,7405
void clear_buffer_dirty_for_endio(struct buffer_head *buffer, int err)clear_buffer_dirty_for_endio314,7851
static void tux3_invalidate_buffer(struct buffer_head *buffer)tux3_invalidate_buffer332,8331
static void __free_buffer(struct buffer_head *buffer)__free_buffer346,8685
static void free_buffer(struct buffer_head *buffer)free_buffer358,8914
void blockput(struct buffer_head *buffer)blockput377,9297
void get_bh(struct buffer_head *buffer)get_bh400,10020
static void __blockput_free(struct buffer_head *buffer, unsigned delta)__blockput_free411,10266
void blockput_free(struct sb *sb, struct buffer_head *buffer)blockput_free429,10777
void blockput_free_unify(struct sb *sb, struct buffer_head *buffer)blockput_free_unify438,10990
unsigned buffer_hash(block_t block)buffer_hash447,11201
void insert_buffer_hash(struct buffer_head *buffer)insert_buffer_hash456,11416
void remove_buffer_hash(struct buffer_head *buffer)remove_buffer_hash469,11817
static void evict_buffer(struct buffer_head *buffer)evict_buffer480,12102
struct buffer_head *new_buffer(map_t *map)new_buffer492,12418
struct buffer_head *peekblk(map_t *map, block_t block)peekblk563,14216
struct buffer_head *blockget(map_t *map, block_t block)blockget581,14608
struct buffer_head *blockread(map_t *map, block_t block)blockread608,15353
void truncate_buffers_range(map_t *map, loff_t lstart, loff_t lend)truncate_buffers_range634,15980
void invalidate_buffers(map_t *map)invalidate_buffers677,17183
static void destroy_buffers(void)destroy_buffers701,17732
static struct buffer_head *prealloc_heads;prealloc_heads756,19085
static void *data_pool;data_pool757,19128
static int preallocate_buffers(unsigned bufsize)preallocate_buffers759,19153
void init_buffers(struct dev *dev, unsigned poolsize, int debug)init_buffers806,20406
int __tux3_volmap_io(int rw, struct bufvec *bufvec, block_t block,__tux3_volmap_io832,20992
static int dev_blockio(int rw, struct bufvec *bufvec)dev_blockio847,21395
int dev_errio(int rw, struct bufvec *bufvec)dev_errio859,21701
map_t *new_map(struct dev *dev, blockio_t *io)new_map869,21878
void free_map(map_t *map)free_map885,22233

compression.c,508
#define COMPRESSION_STRIDE_LEN COMPRESSION_STRIDE_LEN7,128
struct workspaceworkspace9,163
	void *mem;//memory required for compressionmem11,182
	void *c_buf;//memory where compressed buffer goesc_buf12,227
	void *d_buf;//memory where decompressed buffer goesd_buf13,278
static struct workspace *init_workspace(unsigned stride_len)init_workspace16,335
static void free_workspace(struct workspace *workspace)free_workspace42,967
int compress_stride(struct bufvec *bufvec)compress_stride55,1224

inode.c,2146
#define trace trace14,339
#define HASH_SHIFT	HASH_SHIFT17,370
#define HASH_SIZE	HASH_SIZE18,392
#define HASH_MASK	HASH_MASK19,420
static struct hlist_head inode_hashtable[HASH_SIZE] = {inode_hashtable21,455
static unsigned long hash(inum_t inum)hash25,559
void inode_leak_check(void)inode_leak_check34,739
static inline int inode_unhashed(struct inode *inode)inode_unhashed56,1209
static void insert_inode_hash(struct inode *inode)insert_inode_hash65,1409
void remove_inode_hash(struct inode *inode)remove_inode_hash75,1674
static struct inode *new_inode(struct sb *sb)new_inode85,1887
static void free_inode(struct inode *inode)free_inode115,2386
static void make_bad_inode(struct inode *inode)make_bad_inode132,2744
static int is_bad_inode(struct inode *inode)is_bad_inode142,2951
void unlock_new_inode(struct inode *inode)unlock_new_inode151,3134
static void iget_failed(struct inode *inode)iget_failed161,3343
void __iget(struct inode *inode)__iget172,3558
void iget_if_dirty(struct inode *inode)iget_if_dirty189,4014
void ihold(struct inode *inode)ihold199,4247
static struct inode *find_inode(struct sb *sb, struct hlist_head *head,find_inode210,4499
static struct inode *ilookup5_nowait(struct sb *sb, inum_t inum,ilookup5_nowait229,4885
static struct inode *ilookup5(struct sb *sb, inum_t inum,ilookup5244,5246
static struct inode *iget5_locked(struct sb *sb, inum_t inum,iget5_locked257,5631
static int insert_inode_locked4(struct inode *inode, inum_t inum,insert_inode_locked4286,6245
loff_t i_size_read(const struct inode *inode)i_size_read320,6976
void i_size_write(struct inode *inode, loff_t i_size)i_size_write329,7151
static int tux3_truncate_partial_block(struct inode *inode, loff_t newsize)tux3_truncate_partial_block339,7408
static int generic_drop_inode(struct inode *inode)generic_drop_inode372,8165
static void tux_setup_inode(struct inode *inode)tux_setup_inode383,8360
void iput(struct inode *inode)iput445,10032
int __tuxtruncate(struct inode *inode, loff_t size)__tuxtruncate469,10450
int tuxtruncate(struct inode *inode, loff_t size)tuxtruncate478,10644

buffer.h,3864
#define BUFFER_HBUFFER_H2,17
#define BUFFER_FOR_TUX3BUFFER_FOR_TUX34,35
#define BUFFER_DIRTY_STATES	BUFFER_DIRTY_STATES18,332
#define BUFFER_INIT_DELTA	BUFFER_INIT_DELTA19,391
#define TUX3_MAX_DELTA	TUX3_MAX_DELTA20,446
#define TUX3_INIT_DELTA	TUX3_INIT_DELTA21,490
#define BUFFER_DIRTY_STATES	BUFFER_DIRTY_STATES24,587
#define BUFFER_INIT_DELTA	BUFFER_INIT_DELTA25,646
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_FREED29,716
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_EMPTY29,716
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_CLEAN29,716
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_DIRTY29,716
	BUFFER_STATES = BUFFER_DIRTY + BUFFER_DIRTY_STATESBUFFER_STATES30,773
#define BUFFER_STATE_BITS	BUFFER_STATE_BITS34,868
#define BUFFER_BUCKETS BUFFER_BUCKETS37,997
typedef signed long long	block_t;block_t48,1329
typedef loff_t			block_t;block_t50,1369
struct dev { unsigned fd, bits; };dev53,1403
struct dev { unsigned fd, bits; };fd53,1403
struct dev { unsigned fd, bits; };bits53,1403
typedef int (blockio_t)(int rw, struct bufvec *bufvec);blockio_t58,1475
struct map {map60,1532
	struct inode *inode;inode62,1568
	struct dev *dev;dev64,1597
	blockio_t *io;io65,1615
	struct hlist_head hash[BUFFER_BUCKETS];hash66,1631
typedef struct map map_t;map_t69,1676
struct buffer_head {buffer_head71,1703
	map_t *map;map72,1724
	struct hlist_node hashlink;hashlink73,1737
	struct list_head link;link74,1766
	struct list_head lru; /* used for LRU list and the free list */lru75,1790
	unsigned count, state;count76,1855
	unsigned count, state;state76,1855
	block_t index;index77,1879
	void *data;data78,1895
static inline void *bufdata(struct buffer_head *buffer)bufdata81,1912
static inline unsigned bufsize(struct buffer_head *buffer)bufsize86,1995
static inline block_t bufindex(struct buffer_head *buffer)bufindex91,2096
static inline int bufcount(struct buffer_head *buffer)bufcount96,2183
static inline int buffer_empty(struct buffer_head *buffer)buffer_empty101,2266
static inline int buffer_clean(struct buffer_head *buffer)buffer_clean106,2369
static inline int buffer_dirty(struct buffer_head *buffer)buffer_dirty111,2472
static inline int buffer_already_dirty(struct buffer_head *buffer,buffer_already_dirty117,2650
static inline int buffer_can_modify(struct buffer_head *buffer, unsigned delta)buffer_can_modify127,3007
struct iowait {iowait174,5233
typedef void (*bufvec_end_io_t)(struct buffer_head *buffer, int err);bufvec_end_io_t178,5283
struct bufvec {bufvec181,5389
	struct list_head *buffers;	/* The dirty buffers for this delta */buffers182,5405
	struct list_head contig;	/* One logical contiguous range */contig183,5472
	unsigned contig_count;		/* Count of contiguous buffers */contig_count184,5533
	struct list_head compress;compress185,5592
	unsigned compress_count;compress_count186,5620
	struct tux3_iattr_data *idata;	/* inode attrs for write */idata187,5646
	map_t *map;			/* map for dirty buffers */map188,5706
	struct list_head for_io;	/* The buffers in iovec */for_io190,5750
	bufvec_end_io_t end_io;end_io192,5804
static inline struct inode *bufvec_inode(struct bufvec *bufvec)bufvec_inode195,5833
static inline unsigned bufvec_contig_count(struct bufvec *bufvec)bufvec_contig_count200,5930
static inline struct buffer_head *bufvec_contig_buf(struct bufvec *bufvec)bufvec_contig_buf205,6031
#define bufvec_buffer_for_each_contig(bufvec_buffer_for_each_contig213,6292
static inline block_t bufvec_contig_index(struct bufvec *bufvec)bufvec_contig_index216,6383
static inline block_t bufvec_contig_last_index(struct bufvec *bufvec)bufvec_contig_last_index221,6498
static inline int buffer_forked(struct buffer_head *buffer)buffer_forked238,7225

tux3_image.c,2056
static int opt_verbose;opt_verbose18,427
static int opt_data;opt_data20,477
struct image_context {image_context22,499
	struct sb *sb;sb23,522
	int fd;fd24,538
static void image_init_context(struct sb *sb, struct image_context *context,image_init_context27,551
static void image_destroy_context(struct image_context *context)image_destroy_context47,1035
static void image_write(struct image_context *context,image_write56,1227
static void image_write_buffer(struct image_context *context,image_write_buffer81,1840
static void image_bnode(struct btree *btree, struct buffer_head *buffer,image_bnode96,2150
static void image_dleaf_cb(struct btree *btree, struct buffer_head *leafbuf,image_dleaf_cb107,2450
static void __image_dleaf(struct btree *btree, struct buffer_head *leafbuf,__image_dleaf119,2779
static void image_dleaf(struct btree *btree, struct buffer_head *leafbuf,image_dleaf133,3161
static void image_dleaf_without_data(struct btree *btree,image_dleaf_without_data143,3397
static struct walk_btree_ops image_dtree_ops = {image_dtree_ops153,3652
static struct walk_btree_ops image_dtree_without_data_ops = {image_dtree_without_data_ops158,3750
static void image_ileaf_cb(struct buffer_head *leafbuf, int at,image_ileaf_cb163,3874
static void image_ileaf(struct btree *btree, struct buffer_head *leafbuf,image_ileaf178,4284
static struct walk_btree_ops image_itree_ops = {image_itree_ops191,4628
static void image_oleaf(struct btree *btree, struct buffer_head *leafbuf,image_oleaf196,4726
static struct walk_btree_ops image_otree_ops = {image_otree_ops207,5018
static void image_log_pre(struct sb *sb, struct buffer_head *buffer,image_log_pre212,5116
static void image_log(struct sb *sb, struct buffer_head *buffer,image_log223,5436
static struct walk_logchain_ops image_logchain_ops = {image_logchain_ops283,6730
static void image_copy_superblock(struct sb *sb, struct image_context *context)image_copy_superblock289,6867
static int image_main(struct sb *sb, const char *name)image_main302,7226

walk.c,1747
#define TUX3_WALK_CTUX3_WALK_C10,278
struct walk_btree_ops {walk_btree_ops20,472
	void (*pre)(struct btree *, void *);pre21,496
	void (*bnode)(struct btree *, struct buffer_head *, int, void *);bnode22,534
	void (*leaf)(struct btree *, struct buffer_head *, void *);leaf23,601
	void (*post)(struct btree *, void *);post24,662
struct walk_logchain_ops {walk_logchain_ops27,705
	void (*pre)(struct sb *, struct buffer_head *, unsigned, int, void *);pre28,732
	void (*log)(struct sb *, struct buffer_head *, u8, u8 *, unsigned,log29,804
	void (*post)(struct sb *, struct buffer_head *, unsigned, int, void *);post31,892
typedef void (*walk_ileaf_cb)(struct buffer_head *, int, struct inode *,walk_ileaf_cb34,969
typedef void (*walk_dleaf_cb)(struct btree *, struct buffer_head *,walk_dleaf_cb36,1060
static void walk_dleaf1(struct btree *btree, struct buffer_head *leafbuf,walk_dleaf139,1175
static void walk_dleaf2(struct btree *btree, struct buffer_head *leafbuf,walk_dleaf261,1752
static void walk_dleaf(struct btree *btree, struct buffer_head *leafbuf,walk_dleaf91,2465
static inline u16 ileaf_attr_size(__be16 *dict, int at)ileaf_attr_size106,2883
static void walk_ileaf(struct btree *btree, struct buffer_head *leafbuf,walk_ileaf117,3134
static void walk_btree(struct btree *btree, struct walk_btree_ops *cb,walk_btree148,3866
#define X(X216,5177
#undef XX237,5595
static const char *log_name[] = {log_name215,5143
static void walk_logchain(struct sb *sb, struct walk_logchain_ops *cb,walk_logchain240,5608
void *unuse_walk_logchain = walk_logchain;	/* fsck doesn't use this */unuse_walk_logchain317,7148
void *unuse_walk_dleaf = walk_dleaf;		/* graph doesn't use this */unuse_walk_dleaf318,7219

options.h,1167
#define OPTIONS_HOPTIONS_H2,18
struct optv {optv11,300
	unsigned size, argc, optc, err;size12,314
	unsigned size, argc, optc, err;argc12,314
	unsigned size, argc, optc, err;optc12,314
	unsigned size, argc, optc, err;err12,314
	const char *argv[];argv13,347
struct options {options16,372
	const char *name, *terse;name17,389
	const char *name, *terse;terse17,389
	unsigned rule;rule18,416
	const char *help, *arghelp, *defarg;help19,432
	const char *help, *arghelp, *defarg;arghelp19,432
	const char *help, *arghelp, *defarg;defarg19,432
struct opt {opt22,474
	int index;index23,487
	const char *value;value24,499
	OPT_NOARG,OPT_NOARG28,530
	OPT_HASARG,OPT_HASARG29,542
	OPT_OPTARG,OPT_OPTARG30,555
	OPT_NUMBER	= 4,OPT_NUMBER32,569
	OPT_MANY	= 8,OPT_MANY33,586
	OPT_MAX,OPT_MAX34,601
	OPT_ANYARG	= OPT_HASARG | OPT_OPTARG,OPT_ANYARG36,612
static inline struct opt *optentry(void *work, int i)optentry39,655
static inline unsigned optindex(void *work, int i)optindex45,794
static inline const char *optvalue(void *work, int i)optvalue50,884
static inline struct optv *argv2optv(const char *argv[])argv2optv55,977

tux3user.h,851
#define TUX3_USER_HTUX3_USER_H2,20
#define XATTR_CREATE XATTR_CREATE30,576
#define XATTR_REPLACE XATTR_REPLACE31,653
static inline struct inode *buffer_inode(struct buffer_head *buffer)buffer_inode34,738
static inline struct timespec gettime(void)gettime39,840
#define MAX_LFS_FILESIZE	MAX_LFS_FILESIZE46,1019
struct file {file49,1083
	struct inode	*f_inode;f_inode50,1097
	u64		f_version;f_version51,1121
	loff_t		f_pos;f_pos52,1138
static inline struct inode *file_inode(struct file *f)file_inode55,1158
#define INIT_DISKSB(INIT_DISKSB62,1264
#define rapid_open_inode(rapid_open_inode81,1819
#define rapid_sb(rapid_sb95,2234
#define tux3_msg(tux3_msg154,4793
#define tux3_err(tux3_err156,4880
#define tux3_warn(tux3_warn159,5016
#define strerror_exit(strerror_exit162,5116
#define error_exit(error_exit170,5338

options.c,1252
static struct optv *optstart(void *work, int size)optstart11,307
static int is_number(const char *str)is_number22,545
static int optparse(struct options *options, struct optv *optv, const char **argv, int argc, int *pos)optparse39,832
int opthead(struct options *options, int *argc, const char ***argv, void *work, int size, int stop)opthead135,3313
int optscan(struct options *options, int *argc, const char ***argv, void *work, int size)optscan165,3935
int optspace(struct options *options, int argc, const char *argv[])optspace174,4184
int optcount(void *work, int opt)optcount186,4544
const char *opterror(void *work)opterror198,4807
struct emit {emit210,5052
	char *text;text211,5066
	int full, size, over;full212,5079
	int full, size, over;size212,5079
	int full, size, over;over212,5079
emit(struct emit *text, char *fmt, ...)emit216,5132
static int emitpad(struct emit *text, int pad)emitpad235,5551
static int emitend(struct emit *text)emitend244,5740
static int emitrule(struct emit *text, struct options *option)emitrule253,5910
int opthelp(void *buf, int bufsize, struct options *options, int tabs[3], char *lead, int brief)opthelp270,6343
const char *optbasename(const char *argv0)optbasename369,8814

filemap.c,1101
#define trace trace4,37
static int filemap_bufvec_check(struct bufvec *bufvec, enum map_mode mode)filemap_bufvec_check9,97
static int guess_readahead(struct bufvec *bufvec, struct inode *inode,guess_readahead46,1146
static void filemap_read_endio(struct buffer_head *buffer, int err)filemap_read_endio98,2325
static void filemap_hole_endio(struct buffer_head *buffer, int err)filemap_hole_endio116,2762
static void filemap_clean_endio(struct buffer_head *buffer, int err)filemap_clean_endio130,3134
static int filemap_extent_io(enum map_mode mode, int rw, struct bufvec *bufvec)filemap_extent_io142,3435
static int tuxio(struct file *file, void *data, unsigned len, int write)tuxio220,5353
int tuxread(struct file *file, void *data, unsigned len)tuxread302,7183
int tuxwrite(struct file *file, const void *data, unsigned len)tuxwrite311,7381
void tuxseek(struct file *file, loff_t pos)tuxseek325,7690
int page_symlink(struct inode *inode, const char *symname, int len)page_symlink334,7860
int page_readlink(struct inode *inode, void *buf, unsigned size)page_readlink352,8234

trace.h,93
#define USER_TRACE_HUSER_TRACE_H2,21
#define die(die11,197
#define assert(assert12,262

writeback.h,331
#define TUX3_WRITEBACK_HTUX3_WRITEBACK_H2,25
#define I_DIRTY_SYNC	I_DIRTY_SYNC4,51
#define I_DIRTY_DATASYNC	I_DIRTY_DATASYNC5,82
#define I_DIRTY_PAGES	I_DIRTY_PAGES6,116
#define __I_NEW	__I_NEW7,148
#define I_NEW	I_NEW8,168
#define I_FREEING	I_FREEING9,199
#define I_DIRTY I_DIRTY10,227
#define I_BAD	I_BAD11,293

tux3_fsck.c,2640
#define FSCK_BITMAP_ERROR	FSCK_BITMAP_ERROR14,322
#define FSCK_INODE_ERROR	FSCK_INODE_ERROR15,352
struct fsck_context {fsck_context17,382
	int error;error18,404
	const char *shadow_name;shadow_name21,438
	int shadow_fd;shadow_fd22,464
	int shadow_size;shadow_size23,480
	void *mapptr;mapptr25,499
	size_t mapsize;mapsize26,514
	loff_t mappos;mappos27,531
	block_t freeblocks;freeblocks29,548
	block_t freeinodes;freeinodes30,569
static void fsck_init_context(struct sb *sb, struct fsck_context *context,fsck_init_context37,630
static void fsck_destroy_context(struct fsck_context *context)fsck_destroy_context69,1408
static void *shadow_bitmap_read(struct sb *sb, struct fsck_context *context,shadow_bitmap_read81,1718
	#define MAP_BITS	MAP_BITS88,1916
#define MAP_SIZE	MAP_SIZE89,1937
#define MAP_MASK	MAP_MASK90,1978
static void shadow_bitmap_modify(struct sb *sb, struct fsck_context *context,shadow_bitmap_modify116,2610
static inline unsigned long le_long_to_cpu(const unsigned long y)le_long_to_cpu160,3758
fsck_cmp_bitmap_dleaf_cb(struct btree *btree, struct buffer_head *parent,fsck_cmp_bitmap_dleaf_cb178,4194
static void fsck_cmp_bitmap_dleaf(struct btree *btree,fsck_cmp_bitmap_dleaf237,5501
static struct walk_btree_ops walk_cmp_bitmap_dtree_ops = {walk_cmp_bitmap_dtree_ops247,5768
static void fsck_check_bitmap(struct sb *sb, struct fsck_context *context)fsck_check_bitmap251,5863
static void fsck_check_inodes(struct sb *sb, struct fsck_context *context)fsck_check_inodes269,6377
static void fsck_bnode(struct btree *btree, struct buffer_head *buffer,fsck_bnode286,6772
static void fsck_dleaf_cb(struct btree *btree, struct buffer_head *leafbuf,fsck_dleaf_cb297,7087
static void fsck_dleaf(struct btree *btree, struct buffer_head *leafbuf,fsck_dleaf309,7435
static struct walk_btree_ops fsck_dtree_ops = {fsck_dtree_ops322,7792
static void fsck_ileaf_cb(struct buffer_head *leafbuf, int at,fsck_ileaf_cb327,7887
static void fsck_ileaf(struct btree *btree, struct buffer_head *leafbuf,fsck_ileaf343,8298
static struct walk_btree_ops fsck_itree_ops = {fsck_itree_ops356,8655
static void fsck_oleaf(struct btree *btree, struct buffer_head *leafbuf,fsck_oleaf361,8750
static struct walk_btree_ops fsck_otree_ops = {fsck_otree_ops372,9056
static struct fsck_context *fsck_unstash_context;fsck_unstash_context378,9191
static int fsck_unstash_mark(struct sb *sb, u64 val)fsck_unstash_mark379,9241
static void fsck_mark_superblock(struct sb *sb, struct fsck_context *context)fsck_mark_superblock392,9589
static int fsck_main(struct sb *sb)fsck_main405,9965

devel/version.c,6788
#define vecmove(vecmove18,416
#define vecset(vecset19,475
#define error(error20,532
#define assert(assert21,629
#define trace_off(trace_off22,721
#define trace_on(trace_on23,744
#define PACKED PACKED24,770
void hexdump(void *data, unsigned size)hexdump27,817
bool get_bit(unsigned char *bitmap, unsigned i)get_bit48,1323
void set_bit(unsigned char *bitmap, unsigned i)set_bit53,1417
void reset_bit(unsigned char *bitmap, unsigned i)reset_bit58,1505
#define LABEL_BITS LABEL_BITS63,1596
#define CHUNK_BITS CHUNK_BITS64,1617
#define MAXVERSIONS MAXVERSIONS65,1639
typedef uint16_t version_t;version_t67,1678
typedef uint16_t label_t;label_t68,1706
typedef uint64_t chunk_t;chunk_t69,1732
typedef unsigned tag_t;tag_t70,1758
typedef unsigned char bitmap_t;bitmap_t71,1782
struct element { label_t label: LABEL_BITS; chunk_t chunk: CHUNK_BITS; } PACKED;element73,1815
struct element { label_t label: LABEL_BITS; chunk_t chunk: CHUNK_BITS; } PACKED;label73,1815
struct element { label_t label: LABEL_BITS; chunk_t chunk: CHUNK_BITS; } PACKED;chunk73,1815
struct element { label_t label: LABEL_BITS; chunk_t chunk: CHUNK_BITS; } PACKED;PACKED73,1815
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };version74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };tag74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };parent74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };used74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };ghost74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };present74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };pathmap74,1896
struct version { tag_t tag; label_t parent; bool used, ghost, present, pathmap, nearmap; };nearmap74,1896
struct sb {sb76,1989
	struct version table[MAXVERSIONS];table77,2001
	label_t *child_index[MAXVERSIONS];child_index78,2037
	label_t child_count[MAXVERSIONS];child_count79,2073
	label_t children[MAXVERSIONS];children80,2108
	label_t ordmap[MAXVERSIONS];ordmap81,2140
	label_t version_count, active_count;version_count82,2170
	label_t version_count, active_count;active_count82,2170
	unsigned char pathmap[MAXVERSIONS][MAXVERSIONS >> 3];pathmap83,2208
	unsigned char nearmap[MAXVERSIONS][MAXVERSIONS >> 3];nearmap84,2263
	label_t brood[MAXVERSIONS]; /* children present in element list per parent */brood85,2318
label_t get_child(struct sb *sb, label_t parent, unsigned i)get_child88,2401
label_t get_parent(struct sb *sb, label_t child)get_parent93,2503
label_t get_root(struct sb *sb)get_root99,2622
label_t is_ghost(struct sb *sb, label_t version)is_ghost105,2713
void show_table(struct sb *sb)show_table111,2833
int count_table(struct sb *sb)count_table133,3279
unsigned cycle;cycle142,3453
unsigned element_count;element_count143,3469
struct element elements[1000];elements144,3493
void show_elements(struct sb *sb)show_elements146,3525
void show_index(struct sb *sb)show_index154,3732
int show_subtree(struct sb *sb, version_t version, int depth, version_t target)show_subtree162,3912
void show_tree(struct sb *sb)show_tree180,4560
int count_subtree(struct sb *sb, label_t version, int depth)count_subtree185,4684
int count_tree(struct sb *sb)count_tree197,5019
void order_tree(struct sb *sb, label_t version, int order)order_tree202,5087
#define MAXCHUNKS MAXCHUNKS211,5313
typedef unsigned data_t;data_t213,5344
data_t snapdata[MAXCHUNKS], orgdata = 0x1234;snapdata214,5369
data_t snapdata[MAXCHUNKS], orgdata = 0x1234;orgdata214,5369
data_t checkdata[MAXVERSIONS];checkdata215,5415
bool allocmap[MAXCHUNKS];allocmap216,5446
chunk_t nextchunk;nextchunk217,5472
chunk_t new_chunk(struct sb *sb, data_t data)new_chunk219,5492
void free_chunk(struct sb *sb, chunk_t chunk)free_chunk236,5829
label_t new_version(struct sb *sb, label_t parent, uint32_t tag)new_version244,5954
void free_version(struct sb *sb, label_t version)free_version261,6527
void extract_children(struct sb *sb) // O(n^2)extract_children291,7357
void add_element(struct sb *sb, version_t label, chunk_t chunk)add_element314,8002
bitmap_t *need_path(struct sb *sb, version_t target)need_path321,8240
void invalidate_path(struct sb *sb, version_t version)invalidate_path333,8606
struct element *lookup_element(struct sb *sb, version_t target)lookup_element348,9114
bool same_chunk(struct sb *sb, version_t version1, version_t version2)same_chunk369,9767
unsigned count_near(struct sb *sb, version_t target)count_near384,10305
struct element *find_element(struct sb *sb, version_t target)find_element403,10962
void set_present(struct sb *sb, bool flag)set_present411,11143
bool is_present(struct sb *sb, version_t version)is_present418,11332
int show_heirs_(struct sb *sb, version_t parent)show_heirs_461,13261
void show_heirs(struct sb *sb, version_t parent)show_heirs476,13603
int count_heirs(struct sb *sb, version_t parent)count_heirs484,13777
int inherited(struct sb *sb, version_t version)inherited495,14053
label_t *find_child_pos(struct sb *sb, version_t parent, version_t child, unsigned count)find_child_pos503,14202
label_t *find_child(struct sb *sb, version_t parent, version_t child)find_child513,14455
void insert_child(struct sb *sb, version_t parent, version_t child)insert_child521,14688
void remove_child(struct sb *sb, version_t child)remove_child535,15157
void replace_child(struct sb *sb, version_t old, version_t new)replace_child547,15530
void promote_child(struct sb *sb, version_t child)promote_child560,16008
bool delete_elements(struct sb *sb, version_t target, version_t parent)delete_elements598,17222
int find_tag(struct sb *sb, tag_t tag)find_tag655,19040
void show_tree_with_target(struct sb *sb, tag_t tag)show_tree_with_target665,19310
void snapshot_delete(struct sb *sb, tag_t tag)snapshot_delete672,19537
void snapshot_of_snapshot(struct sb *sb, tag_t tag, tag_t parent_tag)snapshot_of_snapshot698,20311
void snapshot_of_origin(struct sb *sb, tag_t tag)snapshot_of_origin707,20591
data_t snapshot_read(struct sb *sb, tag_t tag)snapshot_read720,20902
void snapshot_write(struct sb *sb, tag_t tag, data_t data)snapshot_write727,21134
void origin_write(struct sb *sb, data_t data)origin_write774,22465
void fuzz_test(struct sb *sb, unsigned cycles)fuzz_test782,22654
void same_test(struct sb *sb, version_t version1, version_t version2)same_test898,25995
int main(int argc, char *argv[])main903,26184

devel/shard.c,11619
typedef unsigned char u8;u815,261
typedef unsigned short u16;u1616,287
typedef unsigned int u32;u3217,315
typedef unsigned long long u64;u6418,341
typedef signed long long s64;s6419,373
typedef u16 be_u16;be_u1620,403
typedef u32 be_u32;be_u3221,423
typedef u64 be_u64;be_u6422,443
typedef u8 be_u8;be_u823,463
typedef u64 hashkey_t;hashkey_t25,482
#define ROTL(ROTL31,525
#define U32TO8_LE(U32TO8_LE33,589
#define U64TO8_LE(U64TO8_LE37,738
#define U8TO64_LE(U8TO64_LE41,857
#define SIPROUND SIPROUND51,1110
u64 siphash(const u8 *in, unsigned len)siphash60,1402
#define BREAK BREAK111,2460
#define assert(assert114,2493
#define assert(assert123,2638
#define COMBSORT(COMBSORT126,2684
#define EXCHANGE(EXCHANGE137,2999
void errno_exit(void)errno_exit139,3083
static inline unsigned align(unsigned n, unsigned maskbits)align146,3181
enum { filebacked = 1, blocksize_bits = 12 };filebacked177,4357
enum { filebacked = 1, blocksize_bits = 12 };blocksize_bits177,4357
#define SHARD_NEXTBITS	SHARD_NEXTBITS185,4493
#define SHARD_NEXTSIZE	SHARD_NEXTSIZE186,4520
#define SHARD_NEXTMASK	SHARD_NEXTMASK187,4566
#define SHARD_MAX_SIZE	SHARD_MAX_SIZE188,4621
#define FIFO_BLOCKBITS	FIFO_BLOCKBITS194,4756
#define FIFO_BLOCKMASK	FIFO_BLOCKMASK195,4789
enum shardbits { keybits = 32, endlist = 0, noentry = SHARD_NEXTMASK, shard_entry_bits = 3 };shardbits201,4880
enum shardbits { keybits = 32, endlist = 0, noentry = SHARD_NEXTMASK, shard_entry_bits = 3 };keybits201,4880
enum shardbits { keybits = 32, endlist = 0, noentry = SHARD_NEXTMASK, shard_entry_bits = 3 };endlist201,4880
enum shardbits { keybits = 32, endlist = 0, noentry = SHARD_NEXTMASK, shard_entry_bits = 3 };noentry201,4880
enum shardbits { keybits = 32, endlist = 0, noentry = SHARD_NEXTMASK, shard_entry_bits = 3 };shard_entry_bits201,4880
struct fifo_entry { be_u64 key_block; }; // endian!!!fifo_entry204,5019
struct fifo_entry { be_u64 key_block; }; // endian!!!key_block204,5019
static unsigned fentry_block(struct fifo_entry *entry)fentry_block206,5074
static unsigned fentry_is_insert(struct fifo_entry *entry)fentry_is_insert211,5184
static unsigned fentry_key(struct fifo_entry *entry)fentry_key216,5278
static void set_fentry(struct fifo_entry *entry, unsigned block, int insert, unsigned key)set_fentry221,5386
struct shard_fifo {shard_fifo226,5558
	u64 location:48, blocks:16;location227,5578
	u64 location:48, blocks:16;blocks227,5578
	loff_t mapbase, window;mapbase228,5607
	loff_t mapbase, window;window228,5607
	u32 window_size;window_size229,5632
	struct fifo_entry *base, *tail, *top; };base230,5650
	struct fifo_entry *base, *tail, *top; };tail230,5650
	struct fifo_entry *base, *tail, *top; };top230,5650
struct shard_entry { u64 key_block_next; };shard_entry232,5693
struct shard_entry { u64 key_block_next; };key_block_next232,5693
struct shard {shard236,5756
	unsigned id, size, head, fence, count; // size in entries but fence in bytes! inconsistent?id237,5771
	unsigned id, size, head, fence, count; // size in entries but fence in bytes! inconsistent?size237,5771
	unsigned id, size, head, fence, count; // size in entries but fence in bytes! inconsistent?head237,5771
	unsigned id, size, head, fence, count; // size in entries but fence in bytes! inconsistent?fence237,5771
	unsigned id, size, head, fence, count; // size in entries but fence in bytes! inconsistent?count237,5771
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;bucketbits238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;lowbits238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;lowmask238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;blockbits238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;blockmask238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;used238,5864
	unsigned bucketbits, lowbits, lowmask, blockbits, blockmask, used, free;free238,5864
	struct shardmap *map;map240,5939
	struct shard_fifo fifo;fifo241,5962
	struct shard_entry *table[];table243,6002
	struct shard_entry table[];table245,6038
enum { PAGEBITS = 12, PAGESIZE = 1 << PAGEBITS, maxpagevec = (PAGESIZE - sizeof(struct shard)) / sizeof(void *) };PAGEBITS250,6093
enum { PAGEBITS = 12, PAGESIZE = 1 << PAGEBITS, maxpagevec = (PAGESIZE - sizeof(struct shard)) / sizeof(void *) };PAGESIZE250,6093
enum { PAGEBITS = 12, PAGESIZE = 1 << PAGEBITS, maxpagevec = (PAGESIZE - sizeof(struct shard)) / sizeof(void *) };maxpagevec250,6093
static void shard_populate(struct shard *shard, unsigned start, unsigned count)shard_populate252,6209
struct shardmap {shardmap264,6524
	unsigned mapbits, mapmask, shardbits, lowbits, fencebits;mapbits265,6542
	unsigned mapbits, mapmask, shardbits, lowbits, fencebits;mapmask265,6542
	unsigned mapbits, mapmask, shardbits, lowbits, fencebits;shardbits265,6542
	unsigned mapbits, mapmask, shardbits, lowbits, fencebits;lowbits265,6542
	unsigned mapbits, mapmask, shardbits, lowbits, fencebits;fencebits265,6542
	be_u32 fifomap_size, tailmap_size;fifomap_size266,6601
	be_u32 fifomap_size, tailmap_size;tailmap_size266,6601
	int fd;fd267,6637
	loff_t base; unsigned window;base268,6646
	loff_t base; unsigned window;window268,6646
	unsigned *fifomap; // blocks relative to shardmap basefifomap269,6677
	unsigned *tailmap; // entries relative to fifo basetailmap270,6733
	struct shard *table[];table271,6786
static inline hashkey_t map_keymask(struct shardmap *map)map_keymask274,6814
static inline hashkey_t shard_keymask(struct shardmap *map)shard_keymask279,6930
static unsigned shard_bytes(unsigned size)shard_bytes284,7033
static inline int shard_buckets(struct shard *shard)shard_buckets293,7235
struct shard_entry *shard_entry(struct shard *shard, unsigned i)shard_entry298,7325
static inline int entry_key(struct shard *shard, struct shard_entry *entry)entry_key307,7491
static inline int entry_block(struct shard *shard, struct shard_entry *entry)entry_block312,7642
static inline int entry_next(struct shard *shard, struct shard_entry *entry)entry_next317,7795
static inline void set_entry_next(struct shard *shard, struct shard_entry *entry, unsigned next)set_entry_next322,7925
static inline void set_entry(struct shard *shard, struct shard_entry *entry, unsigned lowkey, unsigned block, unsigned next)set_entry327,8102
static inline int bucket_is_empty(struct shard *shard, unsigned i)bucket_is_empty332,8329
static unsigned shard_id(struct shard *shard)shard_id337,8462
static loff_t fifo_pos(struct shard *shard)fifo_pos342,8532
static unsigned fifo_tail(struct shard *shard)fifo_tail347,8640
static void shard_mmap(struct shard *shard, unsigned start, unsigned length)shard_mmap352,8781
static void shard_mmap_window(struct shard *shard)shard_mmap_window365,9297
static void shard_mmap_entire(struct shard *shard)shard_mmap_entire370,9406
static void shard_unmap(struct shard *shard)shard_unmap375,9499
struct shard_info { unsigned total, empty; };shard_info383,9706
struct shard_info { unsigned total, empty; };total383,9706
struct shard_info { unsigned total, empty; };empty383,9706
static struct shard_info shard_dump(struct shard *shard, unsigned flags, const char *tag)shard_dump385,9753
static unsigned shard_probe(struct shard *shard, hashkey_t key, unsigned *next)shard_probe419,10915
static inline void entry_free(struct shard *shard, unsigned free) // embed me!entry_free447,11689
void fifo_advance(struct shard *shard) {fifo_advance458,12028
static void fifo_append(struct shard *shard, hashkey_t key, unsigned block, int insert)fifo_append479,12718
static int shard_insert_no_fifo(struct shard *shard, hashkey_t key, unsigned block)shard_insert_no_fifo498,13357
static int shard_insert(struct shard *shard, unsigned key, unsigned block)shard_insert529,14173
static int shard_delete(struct shard *shard, unsigned key, unsigned block)shard_delete541,14480
static struct shard *new_shard(unsigned size, unsigned fence, unsigned bucketbits, unsigned lowbits) {new_shard585,15869
static struct shard *shard_rehash(struct shard *shard, unsigned newsize, unsigned factor)shard_rehash605,16751
static unsigned map_shards(struct shardmap *map)map_shards633,17745
static void map_dump(struct shardmap *map)map_dump638,17826
void init_fifo(struct shard_fifo *fifo, struct fifo_entry *base, unsigned bytes)init_fifo657,18322
static struct shard *map_populate(struct shardmap *map, unsigned i)map_populate664,18558
static void populate_and_map(struct shardmap *map, unsigned i)populate_and_map679,19063
static unsigned map_probe(struct shardmap *map, hashkey_t key, unsigned *next)map_probe693,19420
static int map_insert(struct shardmap *map, hashkey_t key, unsigned block)map_insert702,19695
static int map_delete(struct shardmap *map, hashkey_t key, unsigned block)map_delete734,20764
static struct shardmap *alloc_map(int fd, unsigned mapbits, unsigned shardbits, unsigned lowbits, u64 base) {alloc_map745,21122
static int normalize(struct shard_fifo *fifo, unsigned count)normalize779,22615
enum { blockbits = 12, blocksize = 1 << blockbits, blockmask = blocksize - 1 };blockbits875,24529
enum { blockbits = 12, blocksize = 1 << blockbits, blockmask = blocksize - 1 };blocksize875,24529
enum { blockbits = 12, blocksize = 1 << blockbits, blockmask = blocksize - 1 };blockmask875,24529
struct dirent {dirent877,24610
	be_u32 ino;ino878,24626
	be_u8 len;len880,24660
	u8 text[];text881,24672
struct dirhead {dirhead884,24712
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;magic885,24729
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;flags885,24729
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;version885,24729
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;base885,24729
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;mapbits885,24729
	char magic[2]; be_u16 flags; u8 version[4]; be_u64 base:48, mapbits:8, shardbits:8;shardbits885,24729
	be_u64 current; // miserable excuse for a free record search acceleratorcurrent886,24814
enum { default_lowbits = 6 };default_lowbits889,24892
static struct shardmap *dir_open(int fd)dir_open891,24923
static void dir_save(struct shardmap *map)dir_save951,26847
static loff_t dir_tail;dir_tail976,27630
static void *mapped_ptr;mapped_ptr977,27654
static unsigned mapped_block;mapped_block978,27679
void *get_block(struct shardmap *map, unsigned block)get_block980,27710
static struct dirent *find_dirent(struct shardmap *map, unsigned block, const void *name, unsigned len)find_dirent1000,28111
static void entry_create(struct shardmap *map, char *name, unsigned len, unsigned ino) {entry_create1030,28764
static void entry_delete(struct shardmap *map, char *name, unsigned len) {entry_delete1078,30212
static unsigned entry_lookup(struct shardmap *map, char *name, unsigned len) {entry_lookup1109,31078
static struct shardmap *new_map(int fd, unsigned mapbits, unsigned shardbits, u64 base) {new_map1136,31839
static void map_free(struct shardmap *map) {map_free1170,32911
static void dir_free(struct shardmap *map) {dir_free1183,33221
void test(void)test1187,33285
int main(int argc, const char *argv[]) {main1497,40852

diskio.h,41
#define TUX3_DISKIO_HTUX3_DISKIO_H2,22

reCompile.sh,0

newDefines.h,201
#define DEBUG_MODE_U DEBUG_MODE_U1,0
#define DEBUG_MODE_L DEBUG_MODE_L2,23
#define DEBUG_MODE_K DEBUG_MODE_K3,46
#define DEBUG_RW DEBUG_RW4,69
#define ALLOW_BUILTIN_LOG ALLOW_BUILTIN_LOG5,88

tests/Makefile,60
VG	= valgrind --error-exitcode=200 --leak-check=fullVG1,0

tests/buffer.c,280
#define NR_BUF	NR_BUF4,41
static void test01(void)test016,62
static void test02_endio(struct buffer_head *buffer, int err)test02_endio96,2558
static void test02(void)test02102,2659
#define BUFFER_COUNT	BUFFER_COUNT104,2686
int main(int argc, char *argv[])main155,4021

tests/balloc-dummy.c,515
int balloc_from_range(struct sb *sb, block_t start, block_t count,balloc_from_range1,0
static int __balloc(struct sb *sb, unsigned blocks, unsigned flags,__balloc17,326
int balloc(struct sb *sb, unsigned blocks, struct block_segment *seg, int segs)balloc33,719
int balloc_partial(struct sb *sb, unsigned blocks,balloc_partial38,848
int bfree(struct sb *sb, block_t block, unsigned blocks)bfree44,1003
int replay_update_bitmap(struct replay *rp, block_t start, unsigned count,replay_update_bitmap50,1112

tests/inode.c,309
#define trace trace6,96
static void clean_main(struct sb *sb)clean_main11,151
static int tux3_flush_inode_hack(struct inode *inode)tux3_flush_inode_hack17,228
static void test01(struct sb *sb)test0136,620
static void test02(struct sb *sb)test0290,2019
int main(int argc, char *argv[])main161,4031

tests/dleaf.c,828
#define trace trace15,349
#undef MAX_GROUP_ENTRIESMAX_GROUP_ENTRIES20,407
#define MAX_GROUP_ENTRIES MAX_GROUP_ENTRIES21,432
static void clean_main(struct sb *sb)clean_main24,487
static struct dleaf *dleaf_create(struct btree *btree)dleaf_create35,715
static void dleaf_destroy(struct btree *btree, struct dleaf *leaf)dleaf_destroy43,890
#define dwalk_probe_check(dwalk_probe_check49,1021
static void test01(struct sb *sb, struct btree *btree)test0156,1269
static void test02(struct sb *sb, struct btree *btree)test02152,3908
static void test03(struct sb *sb, struct btree *btree)test03200,5149
static void test04(struct sb *sb, struct btree *btree)test04253,6523
#define NR	NR318,8526
static void test05(struct sb *sb, struct btree *btree)test05340,8958
int main(int argc, char *argv[])main380,10067

tests/test.c,882
#define TEST_NEST_MAX	TEST_NEST_MAX13,208
struct test_env {test_env15,235
	const char *series;series16,253
	int test_fail_count;test_fail_count17,274
		const char *name;name20,307
		pid_t child;child21,327
		struct timeval start;start22,342
		int fail_cnt;fail_cnt23,366
	} test[TEST_NEST_MAX];test24,382
	int nest;nest25,406
	int forked;forked26,417
static struct test_env test_env;test_env29,434
void test_init(const char *argv0)test_init31,468
const char *test_series(void)test_series44,706
const char *test_name(void)test_name49,766
void test_assert_failed(void)test_assert_failed54,842
int test_start(const char *test)test_start59,919
void test_end(void)test_end78,1305
int test_failures(void)test_failures130,2642
void *test_alloc_shm(size_t size)test_alloc_shm140,2798
void test_free_shm(void *ptr, size_t size)test_free_shm151,2981

tests/balloc.c,1035
#define trace trace15,333
static int bitmap_test(struct sb *sb, block_t start, block_t count, int set)bitmap_test20,393
static int bitmap_all_set(struct sb *sb, block_t start, unsigned count)bitmap_all_set52,1188
static int bitmap_all_clear(struct sb *sb, block_t start, unsigned count)bitmap_all_clear57,1307
static void clean_main(struct sb *sb)clean_main63,1459
static void test01(struct sb *sb, block_t blocks)test0170,1610
static void test02(struct sb *sb, block_t blocks)test02124,3245
static void test03(struct sb *sb, block_t blocks)test03155,4081
static void test04(struct sb *sb, block_t blocks)test04174,4658
static void test05(struct sb *sb, block_t blocks)test05197,5316
static void test06(struct sb *sb, block_t blocks)test06222,6003
#define ALLOC_UNIT	ALLOC_UNIT224,6055
static void test07(struct sb *sb, block_t blocks)test07247,6575
static void test08(struct sb *sb, block_t blocks)test08267,7153
int main(int argc, char *argv[])main298,8039
#define BITMAP_BLOCKS	BITMAP_BLOCKS300,8074

tests/filemap.c,1132
#define trace trace2,14
static void clean_main(struct sb *sb, struct inode *inode)clean_main8,89
static void add_maps(struct inode *inode, block_t index,add_maps15,201
static int d_map_region(struct inode *inode, block_t start, unsigned count,d_map_region36,792
static void check_maps(struct inode *inode, block_t index,check_maps49,1162
static int check_map_region(struct inode *inode, block_t start, unsigned count,check_map_region70,1725
struct test_data {test_data80,2006
	block_t index;index81,2025
	unsigned count;count82,2041
	enum map_mode mode;mode83,2058
static void test01(struct sb *sb, struct inode *inode)test0187,2111
#define CAN_HANDLE_A_LEAF	CAN_HANDLE_A_LEAF93,2269
static void test02(struct sb *sb, struct inode *inode)test02193,4704
static void test03(struct sb *sb, struct inode *inode)test03236,5863
static void test04(struct sb *sb, struct inode *inode)test04282,7279
static void __test05(struct test_data data[], int nr, struct inode *inode)__test05317,8291
static void test05(struct sb *sb, struct inode *inode)test05345,9037
int main(int argc, char *argv[])main378,9892

tests/dleaf2.c,1134
#define trace trace15,349
static void clean_main(struct sb *sb)clean_main22,435
static struct dleaf2 *dleaf2_create(struct btree *btree)dleaf2_create33,663
static void dleaf2_destroy(struct btree *btree, struct dleaf2 *leaf)dleaf2_destroy41,841
struct test_extent {test_extent47,974
	block_t logical;logical48,995
	block_t physical;physical49,1013
	unsigned count;count50,1032
static void __check_seg(struct test_extent *res, block_t index,__check_seg53,1053
#define check_seg(check_seg63,1362
static int dummy_seg_alloc(struct btree *btree, struct dleaf_req *rq,dummy_seg_alloc69,1541
dleaf2_set_req(struct dleaf_req *rq, block_t index, unsigned count,dleaf2_set_req76,1681
static void test01(struct sb *sb, struct btree *btree)test0191,2030
static void test02(struct sb *sb, struct btree *btree)test02514,16767
#define BASE	BASE516,16824
static void test03(struct sb *sb, struct btree *btree)test03584,18953
static void test04(struct sb *sb, struct btree *btree)test04735,23549
static void test05(struct sb *sb, struct btree *btree)test05793,25261
int main(int argc, char *argv[])main902,28497

tests/iattr.c,122
#define trace trace15,339
static void test01(struct sb *sb)test0122,466
int main(int argc, char *argv[])main88,2677

tests/log.c,207
static void clean_main(struct sb *sb)clean_main15,350
static void check(struct sb *sb, u8 intent)check23,490
static void test01(struct sb *sb)test0135,771
int main(int argc, char *argv[])main94,1830

tests/xattr.c,913
#define trace trace15,357
static void clean_main(struct sb *sb)clean_main21,442
struct xcache_data {xcache_data27,519
	char buf[32];buf28,540
	int len;len29,555
	atom_t atom;atom30,565
static void __check_xcache(struct inode *inode, struct xcache_data *data,__check_xcache33,583
#define check_xcache(check_xcache50,1078
static void test01(struct sb *sb)test0153,1179
struct xattr_data {xattr_data162,3936
	char name[32];name163,3956
	int len;len164,3972
	char buf[32];buf165,3982
	int size;size166,3997
static void __check_xattr(struct inode *inode, struct xattr_data *data,__check_xattr169,4012
#define check_xattr(check_xattr185,4404
static void __check_listxattr(struct inode *inode, char *buf, int len,__check_listxattr187,4467
#define check_listxattr(check_listxattr214,5083
static void test02(struct sb *sb)test02218,5197
int main(int argc, char *argv[])main284,6694

tests/test.h,67
#define _TEST_H_TEST_H2,16
#define test_assert(test_assert7,79

tests/btree.c,2967
#define trace trace16,389
static void clean_main(struct sb *sb, struct inode *inode)clean_main22,474
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };uleaf36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };magic36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };count36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };uentry36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };key36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };val36,821
struct uleaf { u32 magic, count; struct uentry { u16 key, val; } entries[]; };entries36,821
struct uleaf_req {uleaf_req38,901
	struct btree_key_range key;	/* key and count */key39,920
	u16 val;val40,969
static void uleaf_btree_init(struct btree *btree)uleaf_btree_init43,983
static int uleaf_init(struct btree *btree, void *leaf)uleaf_init49,1168
static unsigned uleaf_free(struct btree *btree, void *leaf)uleaf_free56,1313
static int uleaf_sniff(struct btree *btree, void *leaf)uleaf_sniff62,1455
static int uleaf_can_free(struct btree *btree, void *leaf)uleaf_can_free68,1577
static void uleaf_dump(struct btree *btree, void *data)uleaf_dump74,1697
static tuxkey_t uleaf_split(struct btree *btree, tuxkey_t hint, void *vfrom, void *vinto)uleaf_split86,2061
static unsigned uleaf_seek(struct btree *btree, tuxkey_t key, struct uleaf *leaf)uleaf_seek101,2567
static int uleaf_chop(struct btree *btree, tuxkey_t start, u64 len, void *vleaf)uleaf_chop109,2749
static int uleaf_merge(struct btree *btree, void *vinto, void *vfrom)uleaf_merge126,3253
static struct uentry *uleaf_resize(struct btree *btree, tuxkey_t key,uleaf_resize140,3566
static int uleaf_insert(struct btree *btree, struct uleaf *leaf, unsigned key, unsigned val)uleaf_insert155,4040
static struct uentry *uleaf_lookup(struct uleaf *leaf, unsigned key)uleaf_lookup166,4366
static int uleaf_write(struct btree *btree, tuxkey_t key_bottom,uleaf_write177,4578
static struct btree_ops ops = {ops195,5038
static void test01(struct sb *sb, struct inode *inode)test01211,5410
static void btree_write_test(struct cursor *cursor, tuxkey_t key)btree_write_test249,6446
static void test02(struct sb *sb, struct inode *inode)test02281,7193
static void test03(struct sb *sb, struct inode *inode)test03334,8923
static void test04(struct sb *sb, struct inode *inode)test04388,10417
static void clean_test05(struct sb *sb, struct inode *inode,clean_test05432,11802
static void test05(struct sb *sb, struct inode *inode)test05443,12037
static void test06(struct sb *sb, struct inode *inode)test06559,15172
static void clean_test07(struct sb *sb, struct inode *inode,clean_test07674,18698
static void test07(struct sb *sb, struct inode *inode)test07684,18905
int main(int argc, char *argv[])main785,21546

tests/ileaf.c,793
#define trace trace15,344
static struct ileaf *ileaf_create(struct btree *btree)ileaf_create20,403
static void ileaf_destroy(struct btree *btree, struct ileaf *leaf)ileaf_destroy28,581
static void test_append(struct btree *btree, struct ileaf *leaf, inum_t inum, int more, char fill)test_append34,701
static void test_remove(struct btree *btree, struct ileaf *leaf, inum_t inum, int less)test_remove42,970
struct ileaf_data {ileaf_data50,1214
	inum_t inum;inum51,1234
	int size;size52,1248
	unsigned char c;c53,1259
	unsigned char buf[32];buf54,1277
static void check_ileaf_with_data(struct btree *btree, struct ileaf *ileaf,check_ileaf_with_data57,1305
static void test01(struct sb *sb, struct btree *btree)test0176,1785
int main(int argc, char *argv[])main175,4441

tests/commit.c,1697
#define trace trace19,410
static block_t check_block;check_block23,458
static int check_defree_block(struct sb *sb, u64 val)check_defree_block25,487
static int buffer_is_allocated(struct sb *sb, struct buffer_head *buf)buffer_is_allocated35,733
static void check_dirty_list(struct sb *sb, struct list_head *head)check_dirty_list59,1412
static void check_dirty(struct sb *sb)check_dirty70,1696
struct open_result {open_result77,1927
	char name[PATH_MAX];name78,1948
	unsigned namelen;namelen79,1970
	int err;err80,1989
	inum_t inum;inum81,1999
static void fsck(struct sb *sb)fsck84,2017
static struct replay *check_replay(struct sb *sb)check_replay91,2136
static void check_files(struct sb *sb, struct open_result *results, int nr)check_files102,2332
static void clean_sb(struct sb *sb)clean_sb122,2808
static void clean_main(struct sb *sb)clean_main131,2960
static void test01(struct sb *sb)test01138,3081
#define NUM_FILES	NUM_FILES140,3117
#define NUM_FAIL	NUM_FAIL141,3139
static void test02(struct sb *sb)test02232,5381
static void test03(struct sb *sb)test03271,6309
static struct inode *make_orphan_inode(struct sb *sb, const char *name)make_orphan_inode335,7676
struct orphan_data {orphan_data357,8206
	inum_t inum;inum358,8227
	int err;err359,8241
static void check_orphan_inum(struct replay *rp, struct orphan_data *data,check_orphan_inum362,8255
static void test04(struct sb *sb)test04390,8871
#define NR_ORPHAN	NR_ORPHAN392,8907
static void test05(struct sb *sb)test05549,12200
static void test06(struct sb *sb)test06616,13662
static void test07(struct sb *sb)test07735,16363
int main(int argc, char *argv[])main760,16888

tests/dir.c,377
#define trace trace5,55
static void clean_main(struct sb *sb, struct inode *dir)clean_main10,112
static void test01(struct sb *sb, struct inode *dir)test0119,292
static int filldir(void *entry, const char *name, int namelen, loff_t offset,filldir64,1574
static void test02(struct sb *sb, struct inode *dir)test0282,1949
int main(int argc, char *argv[])main110,2476

writeback.c,360
#define trace trace4,37
void clear_inode(struct inode *inode)clear_inode9,99
void __mark_inode_dirty(struct inode *inode, unsigned flags)__mark_inode_dirty18,272
void mark_inode_dirty(struct inode *inode)mark_inode_dirty31,589
void mark_inode_dirty_sync(struct inode *inode)mark_inode_dirty_sync40,775
int sync_super(struct sb *sb)sync_super49,971

utility.c,639
#define trace trace8,99
int devio(int rw, struct dev *dev, loff_t offset, void *data, unsigned len)devio13,159
int devio_vec(int rw, struct dev *dev, loff_t offset, struct iovec *iov,devio_vec22,388
int blockio(int rw, struct sb *sb, struct buffer_head *buffer, block_t block)blockio32,641
int blockio_vec(int rw, struct bufvec *bufvec, block_t block, unsigned count)blockio_vec44,1010
void __tux3_msg(struct sb *sb, const char *level, const char *prefix,__tux3_msg60,1438
void __tux3_fs_error(struct sb *sb, const char *func, unsigned int line,__tux3_fs_error74,1712
void __tux3_dbg(const char *fmt, ...)__tux3_dbg92,2092

buffer_fork.c,296
void free_forked_buffers(struct sb *sb, struct inode *inode, int force)free_forked_buffers9,181
struct buffer_head *blockdirty(struct buffer_head *buffer, unsigned newdelta)blockdirty18,361
int bufferfork_to_invalidate(map_t *map, struct buffer_head *buffer)bufferfork_to_invalidate57,1394

hexdump.c,123
#define HEXDUMPHEXDUMP4,87
void stacktrace(void)stacktrace7,126
void hexdump(void *data, unsigned size)hexdump19,384

cscopeSetup.sh,0

kernel/ileaf.h,531
#define TUX3_ILEAF_HTUX3_ILEAF_H2,21
struct ileaf_attr_ops {ileaf_attr_ops4,43
	__be16 magic;			/* magic number to set to ileaf */magic5,67
	int (*encoded_size)(struct btree *btree, void *data);encoded_size6,119
	void (*encode)(struct btree *btree, void *data, void *attrs, int size);encode7,174
	int (*decode)(struct btree *btree, void *data, void *attrs, int size);decode8,247
struct ileaf_req {ileaf_req11,323
	struct btree_key_range key;	/* inum and count */key12,342
	void *data;			/* attr data */data14,393

kernel/super.c,2434
#define DEBUG_MODE DEBUG_MODE7,139
#define TUX3_SUPER_MAGIC	TUX3_SUPER_MAGIC19,373
#define trace trace22,417
int tux3_trace;tux3_trace25,483
#define BUFFER_LINK	BUFFER_LINK30,562
#define BUFFER_LINK	BUFFER_LINK32,604
static void cleanup_dirty_buffers(struct inode *inode, struct list_head *head,cleanup_dirty_buffers35,637
static void cleanup_dirty_inode(struct inode *inode)cleanup_dirty_inode53,1142
static void cleanup_dirty_for_umount(struct sb *sb)cleanup_dirty_for_umount72,1640
static void __tux3_put_super(struct sb *sbi)__tux3_put_super110,2762
static struct inode *create_internal_inode(struct sb *sbi, inum_t inum,create_internal_inode145,3546
static struct inode *iget_or_create_inode(struct sb *sbi, inum_t inum)iget_or_create_inode172,4230
struct replay *tux3_init_fs(struct sb *sbi)tux3_init_fs186,4575
static void tux3_inode_init_once(void *mem)tux3_inode_init_once270,6112
static void tux3_inode_init_always(struct tux3_inode *tuxnode)tux3_inode_init_always298,6960
static int i_ddc_is_clean(struct inode *inode)i_ddc_is_clean323,7528
static void tux3_check_destroy_inode(struct inode *inode)tux3_check_destroy_inode341,7923
static struct kmem_cache *tux_inode_cachep;tux_inode_cachep354,8282
static int __init tux3_init_inodecache(void)tux3_init_inodecache356,8327
static void tux3_destroy_inodecache(void)tux3_destroy_inodecache371,8698
static struct inode *tux3_alloc_inode(struct super_block *sb)tux3_alloc_inode385,8993
static void tux3_i_callback(struct rcu_head *head)tux3_i_callback402,9345
static void tux3_destroy_inode(struct inode *inode)tux3_destroy_inode412,9620
static int tux3_sync_fs(struct super_block *sb, int wait)tux3_sync_fs423,9899
static void tux3_put_super(struct super_block *sb)tux3_put_super435,10216
static int tux3_statfs(struct dentry *dentry, struct kstatfs *buf)tux3_statfs448,10464
static const struct super_operations tux3_super_ops = {tux3_super_ops474,11088
static int tux3_fill_super(struct super_block *sb, void *data, int silent)tux3_fill_super490,11634
static struct dentry *tux3_mount(struct file_system_type *fs_type, int flags,tux3_mount574,13329
static struct file_system_type tux3_fs_type = {tux3_fs_type584,13617
static int __init init_tux3(void)init_tux3592,13794
static void __exit exit_tux3(void)exit_tux3622,14243
module_init(init_tux3);init_tux3633,14479
module_exit(exit_tux3);exit_tux3634,14503

kernel/writeback_iattrfork.c,447
static void idata_copy(struct inode *inode, struct tux3_iattr_data *idata)idata_copy32,1039
void tux3_iattrdirty(struct inode *inode)tux3_iattrdirty47,1516
static void tux3_iattr_clear_dirty(struct tux3_inode *tuxnode)tux3_iattr_clear_dirty105,3309
static void tux3_iattr_read_and_clear(struct inode *inode,tux3_iattr_read_and_clear121,3703
static void tux3_iattr_adjust_for_btree(struct inode *inode,tux3_iattr_adjust_for_btree163,4893

kernel/Makefile,50
LINUX = /lib/modules/`uname -r`/build/LINUX2,25

kernel/buffer.c,1550
#define trace trace10,86
#define BUFDELTA_AVAIL	BUFDELTA_AVAIL16,195
#define BUFDELTA_BITS	BUFDELTA_BITS17,221
static void tux3_set_bufdelta(struct buffer_head *buffer, int delta)tux3_set_bufdelta31,683
static void tux3_clear_bufdelta(struct buffer_head *buffer)tux3_clear_bufdelta51,1122
static int buffer_check_dirty_delta(unsigned long state)buffer_check_dirty_delta74,1636
int buffer_already_dirty(struct buffer_head *buffer, unsigned delta)buffer_already_dirty87,2015
int buffer_can_modify(struct buffer_head *buffer, unsigned delta)buffer_can_modify99,2424
void tux3_set_buffer_dirty_list(struct address_space *mapping,tux3_set_buffer_dirty_list115,2908
void tux3_set_buffer_dirty(struct address_space *mapping,tux3_set_buffer_dirty139,3597
void tux3_clear_buffer_dirty(struct buffer_head *buffer, unsigned delta)tux3_clear_buffer_dirty154,4042
static void tux3_clear_buffer_dirty_for_io(struct buffer_head *buffer,tux3_clear_buffer_dirty_for_io178,4743
static void tux3_clear_buffer_dirty_for_io_hack(struct buffer_head *buffer)tux3_clear_buffer_dirty_for_io_hack205,5627
static void __blockput_free(struct sb *sb, struct buffer_head *buffer,__blockput_free215,5891
void blockput_free(struct sb *sb, struct buffer_head *buffer)blockput_free228,6259
void blockput_free_unify(struct sb *sb, struct buffer_head *buffer)blockput_free_unify237,6474
static void discard_buffer(struct buffer_head *buffer)discard_buffer247,6719
void tux3_invalidate_buffer(struct buffer_head *buffer)tux3_invalidate_buffer269,7310

kernel/filemap_hole.h,53
#define TUX3_FILEMAP_HOLE_HTUX3_FILEMAP_HOLE_H2,28

kernel/inode.c,3830
#define trace trace18,403
static inline void tux_set_inum(struct inode *inode, inum_t inum)tux_set_inum23,485
struct inode *tux_new_volmap(struct sb *sb)tux_new_volmap35,736
struct inode *tux_new_logmap(struct sb *sb)tux_new_logmap50,1057
static struct inode *tux_new_inode(struct inode *dir, struct tux_iattr *iattr,tux_new_inode65,1378
static int is_defer_alloc_inum(struct inode *inode)is_defer_alloc_inum111,2510
static int find_defer_alloc_inum(struct sb *sb, inum_t inum)find_defer_alloc_inum121,2754
static void add_defer_alloc_inum(struct inode *inode)add_defer_alloc_inum149,3318
void del_defer_alloc_inum(struct inode *inode)del_defer_alloc_inum161,3711
static int find_free_inum(struct cursor *cursor, inum_t goal, inum_t *allocated)find_free_inum193,5101
struct ialloc_policy {ialloc_policy253,6321
	inum_t (*goal)(struct inode *, void *);goal254,6344
	void (*update)(struct inode *, inum_t);update255,6385
static inum_t ialloc_specific_goal(struct inode *inode, void *data)ialloc_specific_goal261,6491
static void ialloc_noop_update(struct inode *inode, inum_t inum)ialloc_noop_update270,6690
static struct ialloc_policy ialloc_specific = {ialloc_specific278,6861
static inum_t ialloc_linear_goal(struct inode *inode, void *data)ialloc_linear_goal287,7067
static void ialloc_linear_update(struct inode *inode, inum_t inum)ialloc_linear_update297,7299
static struct ialloc_policy ialloc_linear = {ialloc_linear312,7607
static int tux_test(struct inode *inode, void *data)tux_test317,7719
static int tux_set(struct inode *inode, void *data)tux_set326,7929
static int alloc_inum(struct inode *inode, struct ialloc_policy *policy,alloc_inum336,8137
__tux_create_inode(struct inode *dir, struct tux_iattr *iattr, dev_t rdev,__tux_create_inode409,9839
struct inode *tux_create_inode(struct inode *dir, struct tux_iattr *iattr,tux_create_inode453,10956
struct inode *tux_create_specific_inode(struct inode *dir, inum_t inum,tux_create_specific_inode464,11285
static int check_present(struct inode *inode)check_present474,11576
static int open_inode(struct inode *inode)open_inode521,12731
struct inode *tux3_iget(struct sb *sb, inum_t inum)tux3_iget561,13513
struct inode *tux3_ilookup_nowait(struct sb *sb, inum_t inum)tux3_ilookup_nowait585,13987
struct inode *tux3_ilookup(struct sb *sb, inum_t inum)tux3_ilookup594,14215
static int save_inode(struct inode *inode, struct tux3_iattr_data *idata,save_inode603,14429
int tux3_save_inode(struct inode *inode, struct tux3_iattr_data *idata,tux3_save_inode677,16239
static int tux3_truncate(struct inode *inode, loff_t newsize)tux3_truncate699,16944
static int purge_inode(struct inode *inode)purge_inode754,18266
static int tux3_truncate_blocks(struct inode *inode, loff_t newsize)tux3_truncate_blocks796,19348
int tux3_purge_inode(struct inode *inode, struct tux3_iattr_data *idata,tux3_purge_inode808,19691
int tux3_drop_inode(struct inode *inode)tux3_drop_inode856,20698
void tux3_evict_inode(struct inode *inode)tux3_evict_inode889,21535
void iget_if_dirty(struct inode *inode)iget_if_dirty939,23066
int tux3_sync_file(struct file *file, loff_t start, loff_t end, int datasync)tux3_sync_file956,23500
int tux3_getattr(struct vfsmount *mnt, struct dentry *dentry, struct kstat *stat)tux3_getattr977,24022
int tux3_setattr(struct dentry *dentry, struct iattr *iattr)tux3_setattr1005,24853
static const struct file_operations tux_file_fops = {tux_file_fops1044,25573
static const struct inode_operations tux_file_iops = {tux_file_iops1061,26062
static const struct inode_operations tux_special_iops = {tux_special_iops1075,26440
const struct inode_operations tux_symlink_iops = {tux_symlink_iops1087,26762
static void tux_setup_inode(struct inode *inode)tux_setup_inode1101,27118

kernel/buffer.h,2748
#define TUX3_BUFFER_HTUX3_BUFFER_H2,22
typedef signed long long	block_t;block_t15,373
#define TUX3_MAX_DELTA	TUX3_MAX_DELTA18,456
#define TUX3_INIT_DELTA	TUX3_INIT_DELTA19,511
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_FREED22,573
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_EMPTY22,573
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_CLEAN22,573
	BUFFER_FREED, BUFFER_EMPTY, BUFFER_CLEAN, BUFFER_DIRTY,BUFFER_DIRTY22,573
	BUFFER_STATES = BUFFER_DIRTY + TUX3_MAX_DELTABUFFER_STATES23,630
static inline void *bufdata(struct buffer_head *buffer)bufdata30,777
static inline size_t bufsize(struct buffer_head *buffer)bufsize35,862
static inline int bufcount(struct buffer_head *buffer)bufcount40,948
static inline int buffer_clean(struct buffer_head *buffer)buffer_clean45,1047
static inline void blockput(struct buffer_head *buffer)blockput50,1169
static inline int buffer_empty(struct buffer_head *buffer)buffer_empty55,1247
static inline struct buffer_head *set_buffer_empty(struct buffer_head *buffer)set_buffer_empty60,1322
struct iowait {iowait79,2116
	atomic_t inflight;		/* In-flight I/O count */inflight80,2132
	struct completion done;		/* completion for in-flight I/O */done81,2179
#define BUFS_PER_PAGE_CACHE	BUFS_PER_PAGE_CACHE85,2279
struct bufvec {bufvec86,2331
	struct list_head *buffers;	/* The dirty buffers for this delta */buffers87,2347
	struct list_head contig;	/* One logical contiguous range */contig88,2414
	unsigned contig_count;		/* Count of contiguous buffers */contig_count89,2475
	struct tux3_iattr_data *idata;	/* inode attrs for write */idata90,2534
	struct address_space *mapping;	/* address_space for dirty buffers */mapping91,2594
		struct buffer_head *buffer;buffer94,2675
		block_t block;block95,2705
	} on_page[BUFS_PER_PAGE_CACHE];on_page96,2722
	unsigned on_page_idx;on_page_idx97,2755
	struct bio *bio;bio99,2779
	struct buffer_head *bio_lastbuf;bio_lastbuf100,2797
static inline struct inode *bufvec_inode(struct bufvec *bufvec)bufvec_inode103,2835
static inline unsigned bufvec_contig_count(struct bufvec *bufvec)bufvec_contig_count108,2935
static inline struct buffer_head *bufvec_contig_buf(struct bufvec *bufvec)bufvec_contig_buf113,3036
#define bufvec_buffer_for_each_contig(bufvec_buffer_for_each_contig121,3308
static inline block_t bufvec_contig_index(struct bufvec *bufvec)bufvec_contig_index124,3410
static inline block_t bufvec_contig_last_index(struct bufvec *bufvec)bufvec_contig_last_index129,3525
#define PageForked(PageForked145,4192
#define SetPageForked(SetPageForked146,4230
static inline int buffer_forked(struct buffer_head *buffer)buffer_forked149,4322

kernel/dleaf.c,2450
#define trace trace16,347
static void dleaf_btree_init(struct btree *btree)dleaf_btree_init68,3270
int dleaf_init(struct btree *btree, void *leaf)dleaf_init77,3497
unsigned dleaf_free(struct btree *btree, void *leaf)dleaf_free92,3852
static unsigned dleaf_need(struct btree *btree, void *vleaf)dleaf_need102,4101
static inline tuxkey_t get_index(struct group *group, struct entry *entry)get_index112,4376
static int dleaf_sniff(struct btree *btree, void *leaf)dleaf_sniff121,4624
static int dleaf_can_free(struct btree *btree, void *vleaf)dleaf_can_free131,4870
void dleaf_dump(struct btree *btree, void *vleaf)dleaf_dump140,5075
static int dleaf_free2(struct dleaf *leaf, unsigned blocksize)dleaf_free2183,6488
static int dleaf_check(struct dleaf *leaf, unsigned blocksize)dleaf_check198,6990
static int dleaf_split_at(void *from, void *into, int split, unsigned blocksize)dleaf_split_at256,8795
static tuxkey_t dleaf_split(struct btree *btree, tuxkey_t hint, void *from, void *into)dleaf_split329,11469
int dleaf_merge(struct btree *btree, void *vinto, void *vfrom)dleaf_merge356,12302
void dwalk_redirect(struct dwalk *walk, struct dleaf *src, struct dleaf *dst)dwalk_redirect486,17094
static int dwalk_first(struct dwalk *walk)dwalk_first506,17821
int dwalk_end(struct dwalk *walk)dwalk_end516,18046
tuxkey_t dwalk_index(struct dwalk *walk)dwalk_index525,18224
block_t dwalk_block(struct dwalk *walk)dwalk_block534,18416
unsigned dwalk_count(struct dwalk *walk)dwalk_count543,18599
void dwalk_dump(struct dwalk *walk)dwalk_dump553,18796
static void dwalk_check(struct dwalk *walk)dwalk_check578,19604
int dwalk_next(struct dwalk *walk)dwalk_next613,20715
int dwalk_back(struct dwalk *walk)dwalk_back639,21373
int dwalk_probe(struct dleaf *leaf, unsigned blocksize, struct dwalk *walk, tuxkey_t key)dwalk_probe675,22352
int dwalk_mock(struct dwalk *walk, tuxkey_t index, struct diskextent extent)dwalk_mock752,24680
void dwalk_copy(struct dwalk *walk, struct dleaf *dest)dwalk_copy780,25803
void dwalk_chop(struct dwalk *walk)dwalk_chop833,27555
int dwalk_add(struct dwalk *walk, tuxkey_t index, struct diskextent extent)dwalk_add878,29004
static void dwalk_update(struct dwalk *walk, struct diskextent extent)dwalk_update930,31051
static int dleaf_chop(struct btree *btree, tuxkey_t start, u64 len, void *vleaf)dleaf_chop956,31859
struct btree_ops dtree1_ops = {dtree1_ops995,32921

kernel/dleaf2.h,555
#define TUX3_DLEAF2_HTUX3_DLEAF2_H2,22
struct dleaf_req {dleaf_req4,45
	struct btree_key_range key;	/* index and count */key5,64
	int seg_idx;			/* Current offset for seg[] */seg_idx7,116
	int seg_cnt;			/* How many segs are available */seg_cnt8,163
	int seg_max;			/* Max size of seg[] */seg_max9,213
	struct block_segment *seg;	/* Pointer to seg[] */seg10,253
	int (*seg_alloc)(struct btree *, struct dleaf_req *, int);seg_alloc13,359
static inline unsigned seg_total_count(struct block_segment *seg, int nr_segs)seg_total_count16,423

kernel/commit_flusher.c,1204
static void __tux3_init_flusher(struct sb *sb)__tux3_init_flusher6,65
static int flush_delta_work(void *data)flush_delta_work19,401
int tux3_init_flusher(struct sb *sb)tux3_init_flusher53,1143
void tux3_exit_flusher(struct sb *sb)tux3_exit_flusher76,1603
static void schedule_flush_delta(struct sb *sb)schedule_flush_delta88,1830
int tux3_init_flusher(struct sb *sb)tux3_init_flusher100,2113
void tux3_exit_flusher(struct sb *sb)tux3_exit_flusher110,2293
static void schedule_flush_delta(struct sb *sb)schedule_flush_delta114,2336
static int flush_pending_delta(struct sb *sb)flush_pending_delta124,2574
static void try_delta_transition(struct sb *sb)try_delta_transition143,3007
static int try_delta_transition_until_delta(struct sb *sb, unsigned delta)try_delta_transition_until_delta156,3392
static int wait_for_transition(struct sb *sb, unsigned delta)wait_for_transition183,4173
static int try_flush_pending_until_delta(struct sb *sb, unsigned delta)try_flush_pending_until_delta193,4442
static int wait_for_commit(struct sb *sb, unsigned delta)wait_for_commit210,4903
static int sync_current_delta(struct sb *sb, enum unify_flags unify_flag)sync_current_delta220,5165

kernel/iattr.h,1217
#define TUX3_IATTR_HTUX3_IATTR_H2,21
enum atkind {atkind4,43
	RDEV_ATTR	= 0,RDEV_ATTR6,81
	MODE_OWNER_ATTR	= 1,MODE_OWNER_ATTR7,97
	DATA_BTREE_ATTR	= 2,DATA_BTREE_ATTR8,119
	CTIME_SIZE_ATTR	= 3,CTIME_SIZE_ATTR9,141
	LINK_COUNT_ATTR	= 4,LINK_COUNT_ATTR10,163
	MTIME_ATTR	= 5,MTIME_ATTR11,185
	RESERVED1_ATTR	= 10,RESERVED1_ATTR16,285
	VAR_ATTRS,VAR_ATTRS17,307
	IDATA_ATTR	= 11,IDATA_ATTR19,357
	XATTR_ATTR	= 12,XATTR_ATTR20,375
	RESERVED2_ATTR	= 15,RESERVED2_ATTR23,438
	MAX_ATTRS,MAX_ATTRS24,460
enum atbit {atbit27,476
	RDEV_BIT	= 1 << RDEV_ATTR,RDEV_BIT29,513
	MODE_OWNER_BIT	= 1 << MODE_OWNER_ATTR,MODE_OWNER_BIT30,541
	CTIME_SIZE_BIT	= 1 << CTIME_SIZE_ATTR,CTIME_SIZE_BIT31,581
	DATA_BTREE_BIT	= 1 << DATA_BTREE_ATTR,DATA_BTREE_BIT32,621
	LINK_COUNT_BIT	= 1 << LINK_COUNT_ATTR,LINK_COUNT_BIT33,661
	MTIME_BIT	= 1 << MTIME_ATTR,MTIME_BIT34,701
	IDATA_BIT	= 1 << IDATA_ATTR,IDATA_BIT36,769
	XATTR_BIT	= 1 << XATTR_ATTR,XATTR_BIT37,799
struct iattr_req_data {iattr_req_data42,869
	struct tux3_iattr_data *idata;		/* inode attributes */idata43,893
	struct btree *btree;			/* inode dtree */btree44,949
	struct inode *inode;			/* extended attributes */inode45,991

kernel/inode_vfslib.c,206
static ssize_t tux3_file_aio_write(struct kiocb *iocb, const struct iovec *iov,tux3_file_aio_write16,338
static ssize_t tux3_file_splice_write(struct pipe_inode_info *pipe,tux3_file_splice_write56,1381

kernel/balloc.c,1150
#define trace trace15,359
block_t count_range(struct inode *inode, block_t start, block_t count)count_range19,409
block_t bitmap_dump(struct inode *inode, block_t start, block_t count)bitmap_dump58,1457
static int bitmap_modify_bits(struct sb *sb, struct buffer_head *buffer,bitmap_modify_bits125,3329
static int bitmap_modify(struct sb *sb, block_t start, unsigned blocks, int set)bitmap_modify169,4365
static int bitmap_test_and_modify(struct sb *sb, block_t start, unsigned blocks,bitmap_test_and_modify218,5594
static void save_seg(struct block_segment *seg, int segs, block_t start,save_seg273,6955
int balloc_from_range(struct sb *sb, block_t start, block_t len,balloc_from_range294,7417
static int __balloc(struct sb *sb, unsigned blocks, unsigned flags,__balloc443,10891
int balloc(struct sb *sb, unsigned blocks, struct block_segment *seg, int segs)balloc464,11422
int balloc_partial(struct sb *sb, unsigned blocks,balloc_partial473,11652
int bfree(struct sb *sb, block_t start, unsigned blocks)bfree483,11908
int replay_update_bitmap(struct replay *rp, block_t start, unsigned blocks,replay_update_bitmap494,12221

kernel/writeback_xattrfork.c,148
void tux3_xattrdirty(struct inode *inode)tux3_xattrdirty6,64
void tux3_xattr_read_and_clear(struct inode *inode)tux3_xattr_read_and_clear14,212

kernel/filemap.c,4372
#define trace trace53,1710
enum map_mode {map_mode56,1741
	MAP_READ	= 0,	/* map_region for read */MAP_READ57,1757
	MAP_WRITE	= 1,	/* map_region for overwrite */MAP_WRITE58,1798
	MAP_REDIRECT	= 2,	/* map_region for redirected writeMAP_REDIRECT59,1845
	MAX_MAP_MODE,MAX_MAP_MODE61,1925
void show_segs(struct block_segment seg[], unsigned segs)show_segs67,1991
static int map_bfree(struct inode *inode, block_t block, unsigned count)map_bfree79,2291
static int map_region1(struct inode *inode, block_t start, unsigned count,map_region197,2751
static int seg_alloc(struct btree *btree, struct dleaf_req *rq,seg_alloc372,10432
static int overwrite_seg_alloc(struct btree *btree, struct dleaf_req *rq,overwrite_seg_alloc443,12220
static int redirect_seg_alloc(struct btree *btree, struct dleaf_req *rq,redirect_seg_alloc454,12538
static int (*seg_alloc_funs[])(struct btree *, struct dleaf_req *, int) = {seg_alloc_funs465,12849
static int map_region2(struct inode *inode, block_t start, unsigned count,map_region2471,13038
static int map_region(struct inode *inode, block_t start, unsigned count,map_region620,16174
int tux3_filemap_overwrite_io(int rw, struct bufvec *bufvec)tux3_filemap_overwrite_io661,17274
int tux3_filemap_redirect_io(int rw, struct bufvec *bufvec)tux3_filemap_redirect_io671,17545
static int filemap_extent_io(enum map_mode mode, int rw, struct bufvec *bufvec)filemap_extent_io686,17958
static void seg_to_buffer(struct sb *sb, struct buffer_head *buffer,seg_to_buffer722,18820
static int __tux3_get_block(struct inode *inode, sector_t iblock,__tux3_get_block762,19891
static int tux3_da_get_block(struct inode *inode, sector_t iblock,tux3_da_get_block813,21281
int tux3_get_block(struct inode *inode, sector_t iblock,tux3_get_block853,22431
struct buffer_head *__get_buffer(struct page *page, int offset)__get_buffer863,22702
static struct buffer_head *get_buffer(struct page *page, int offset)get_buffer875,22988
static struct buffer_head *__find_get_buffer(struct address_space *mapping,__find_get_buffer886,23254
static struct buffer_head *find_get_buffer(struct address_space *mapping,find_get_buffer912,23902
struct buffer_head *peekblk(struct address_space *mapping, block_t iblock)peekblk922,24171
struct buffer_head *blockread(struct address_space *mapping, block_t iblock)blockread938,24604
struct buffer_head *blockget(struct address_space *mapping, block_t iblock)blockget995,25887
static int tux3_readpage(struct file *file, struct page *page)tux3_readpage1068,28114
static int tux3_readpages(struct file *file, struct address_space *mapping,tux3_readpages1079,28405
static void tux3_write_failed(struct address_space *mapping, loff_t to)tux3_write_failed1091,28734
static int __tux3_file_write_begin(struct file *file,__tux3_file_write_begin1112,29251
static int __tux3_file_write_end(struct file *file,__tux3_file_write_end1131,29742
static int tux3_file_write_begin(struct file *file,tux3_file_write_begin1149,30224
static int tux3_file_write_end(struct file *file, struct address_space *mapping,tux3_file_write_end1166,30750
static int tux3_disable_writepage(struct page *page,tux3_disable_writepage1213,32022
static int tux3_disable_writepages(struct address_space *mapping,tux3_disable_writepages1236,32696
static ssize_t tux3_direct_IO(int rw, struct kiocb *iocb,tux3_direct_IO1256,33246
static sector_t tux3_bmap(struct address_space *mapping, sector_t iblock)tux3_bmap1277,33832
const struct address_space_operations tux_file_aops = {tux_file_aops1292,34192
static int tux3_symlink_write_begin(struct file *file,tux3_symlink_write_begin1311,34805
const struct address_space_operations tux_symlink_aops = {tux_symlink_aops1325,35247
static int tux3_blk_readpage(struct file *file, struct page *page)tux3_blk_readpage1344,35868
static int tux3_blk_write_begin(struct file *file,tux3_blk_write_begin1356,36218
const struct address_space_operations tux_blk_aops = {tux_blk_aops1380,36880
static int tux3_vol_get_block(struct inode *inode, sector_t iblock,tux3_vol_get_block1392,37270
static int tux3_vol_readpage(struct file *file, struct page *page)tux3_vol_readpage1407,37631
static int tux3_vol_write_begin(struct file *file,tux3_vol_write_begin1428,38230
const struct address_space_operations tux_vol_aops = {tux_vol_aops1441,38594

kernel/trace.h,227
#define TRACE_HTRACE_H2,16
#define assert(assert6,97
#define logline(logline7,135
#define tux3_trace	tux3_trace9,194
#define logline(logline10,215
#define trace_off(trace_off13,276
#define trace_on(trace_on14,315

kernel/commit_flusher_hack.c,3645
void tux3_set_mapping_bdi(struct inode *inode)tux3_set_mapping_bdi14,278
struct wb_writeback_work {wb_writeback_work26,548
	long nr_pages;nr_pages27,575
	struct super_block *sb;sb28,591
	unsigned long *older_than_this;older_than_this29,616
	enum writeback_sync_modes sync_mode;sync_mode30,649
	unsigned int tagged_writepages:1;tagged_writepages31,687
	unsigned int for_kupdate:1;for_kupdate32,722
	unsigned int range_cyclic:1;range_cyclic33,751
	unsigned int for_background:1;for_background34,781
	enum wb_reason reason;		/* why was writeback initiated? */reason35,813
	struct list_head list;		/* pending work list */list37,874
	struct completion *done;	/* set if the caller waits */done38,923
static int try_delta_transition_until_delta(struct sb *sb, unsigned delta)try_delta_transition_until_delta42,1035
static int wait_for_transition(struct sb *sb, unsigned delta)wait_for_transition69,1816
static long tux3_wb_writeback(struct bdi_writeback *wb,tux3_wb_writeback79,2085
static bool inode_dirtied_after(struct inode *inode, unsigned long t)inode_dirtied_after128,3395
static int tux3_has_old_data(struct bdi_writeback *wb)tux3_has_old_data147,3999
static long tux3_wb_check_old_data_flush(struct bdi_writeback *wb)tux3_wb_check_old_data_flush178,4750
static inline int tux3_over_bground_thresh(struct backing_dev_info *bdi,tux3_over_bground_thresh219,5638
static long tux3_wb_check_background_flush(struct bdi_writeback *wb, long wrote)tux3_wb_check_background_flush235,6039
get_next_work_item(struct backing_dev_info *bdi)get_next_work_item258,6543
static long tux3_do_writeback(struct bdi_writeback *wb, int force_wait)tux3_do_writeback276,6965
#define TUX3_BDI_CAP	TUX3_BDI_CAP327,8379
void tux3_accout_set_writeback(struct page *page)tux3_accout_set_writeback339,8736
void tux3_accout_clear_writeback(struct page *page)tux3_accout_clear_writeback354,9107
void tux3_start_periodical_flusher(struct sb *sb)tux3_start_periodical_flusher378,9748
static int tux3_writeback_thread(void *data)tux3_writeback_thread395,10234
static int tux3_setup_writeback(struct sb *sb, struct backing_dev_info *bdi)tux3_setup_writeback460,11813
static void tux3_wakeup_writeback(struct backing_dev_info *bdi)tux3_wakeup_writeback487,12499
static void tux3_destroy_writeback(struct backing_dev_info *bdi)tux3_destroy_writeback496,12701
#define TUX3_BDI_CAP	TUX3_BDI_CAP510,13115
void tux3_accout_set_writeback(struct page *page)tux3_accout_set_writeback512,13154
void tux3_accout_clear_writeback(struct page *page)tux3_accout_clear_writeback516,13209
void tux3_start_periodical_flusher(struct sb *sb)tux3_start_periodical_flusher520,13266
static struct workqueue_struct *kernel_bdi_wq;kernel_bdi_wq525,13372
static void tux3_writeback_workfn(struct work_struct *work)tux3_writeback_workfn531,13563
static int tux3_setup_writeback(struct sb *sb, struct backing_dev_info *bdi)tux3_setup_writeback586,15171
static void tux3_wakeup_writeback(struct backing_dev_info *bdi)tux3_wakeup_writeback611,15822
static void tux3_destroy_writeback(struct backing_dev_info *bdi)tux3_destroy_writeback615,15891
static int tux3_congested_fn(void *congested_data, int bdi_bits)tux3_congested_fn625,16139
int tux3_init_flusher(struct sb *sb)tux3_init_flusher639,16524
void tux3_exit_flusher(struct sb *sb)tux3_exit_flusher669,17089
static void schedule_flush_delta(struct sb *sb)schedule_flush_delta679,17314
static void try_delta_transition(struct sb *sb)try_delta_transition689,17552
static int sync_current_delta(struct sb *sb, enum unify_flags unify_flag)sync_current_delta702,17834

kernel/dleaf2.c,2448
struct uptag {uptag41,1593
	__be32 inum;inum42,1608
	__be32 offset;offset43,1622
	__be16 future;future44,1638
	__be16 delta;delta45,1654
#define VER_BITS	VER_BITS50,1711
#define VER_MASK	VER_MASK51,1732
#define ADDR_BITS	ADDR_BITS52,1768
#define ADDR_MASK	ADDR_MASK53,1790
struct dleaf2 {dleaf255,1836
	__be16 magic;			/* dleaf2 magic */magic56,1852
	__be16 count;			/* count of diskextent2 */count57,1888
	__be32 __unused;__unused59,1953
	struct diskextent2 {diskextent260,1971
		__be64 verhi_logical;	/* verhi:16, logical:48 */verhi_logical61,1993
		__be64 verlo_physical;	/* verlo:16, physical:48 */verlo_physical62,2044
	} table[];table63,2097
struct extent {extent66,2113
	u32 version;		/* version */version67,2129
	block_t logical;	/* logical address */logical68,2158
	block_t physical;	/* physical address */physical69,2198
static inline block_t get_logical(struct diskextent2 *dex)get_logical72,2244
static inline void get_extent(struct diskextent2 *dex, struct extent *ex)get_extent81,2462
static inline void put_extent(struct diskextent2 *dex, u32 version,put_extent98,2897
static void dleaf2_btree_init(struct btree *btree)dleaf2_btree_init113,3376
static int dleaf2_init(struct btree *btree, void *leaf)dleaf2_init125,3689
static int dleaf2_sniff(struct btree *btree, void *leaf)dleaf2_sniff139,3980
static int dleaf2_can_free(struct btree *btree, void *leaf)dleaf2_can_free158,4430
static void dleaf2_dump(struct btree *btree, void *leaf)dleaf2_dump173,4748
dleaf2_lookup_index(struct btree *btree, struct dleaf2 *dleaf, tuxkey_t index)dleaf2_lookup_index179,4891
static tuxkey_t dleaf2_split(struct btree *btree, tuxkey_t hint,dleaf2_split213,5660
static int dleaf2_merge(struct btree *btree, void *vinto, void *vfrom)dleaf2_merge265,6906
static int dleaf2_chop(struct btree *btree, tuxkey_t start, u64 len, void *leaf)dleaf2_chop331,8823
static void dleaf2_resize(struct dleaf2 *dleaf, struct diskextent2 *head,dleaf2_resize409,10583
static inline void dleaf2_init_sentinel(struct sb *sb, struct dleaf2 *dleaf,dleaf2_init_sentinel429,11073
static tuxkey_t dleaf2_split_at_center(struct dleaf2 *dleaf)dleaf2_split_at_center443,11444
static int dleaf2_write(struct btree *btree, tuxkey_t key_bottom,dleaf2_write457,11739
static int dleaf2_read(struct btree *btree, tuxkey_t key_bottom,dleaf2_read626,16518
struct btree_ops dtree2_ops = {dtree2_ops706,18600

kernel/kcompat.h,167
#define TUX3_KCOMPAT_HTUX3_KCOMPAT_H2,23
static inline struct inode *file_inode(struct file *file)file_inode13,187
#define MODULE_ALIAS_FS(MODULE_ALIAS_FS18,283

kernel/filemap_blocklib.c,1129
static void tux3_page_zero_new_buffers(struct page *page, unsigned from,tux3_page_zero_new_buffers18,456
static int __tux3_write_begin(struct page *page, loff_t pos, unsigned len,__tux3_write_begin65,1507
static int tux3_write_begin(struct address_space *mapping, loff_t pos,tux3_write_begin168,4232
static int __tux3_commit_write(struct inode *inode, struct page *page,__tux3_commit_write223,5451
static int __tux3_write_end(struct file *file, struct address_space *mapping,__tux3_write_end266,6534
static int tux3_write_end(struct file *file, struct address_space *mapping,tux3_write_end306,7780
void tux3_try_cancel_dirty_page(struct page *page)tux3_try_cancel_dirty_page361,9417
static void tux3_invalidatepage(struct page *page, unsigned long offset)tux3_invalidatepage392,10105
static int __tux3_truncate_partial_block(struct address_space *mapping,__tux3_truncate_partial_block450,11613
int tux3_truncate_partial_block(struct inode *inode, loff_t newsize)tux3_truncate_partial_block623,15984
void tux3_truncate_inode_pages_range(struct address_space *mapping,tux3_truncate_inode_pages_range645,16724

kernel/writeback_inodedelete.c,373
static int tux3_inode_is_dead(struct tux3_inode *tuxnode)tux3_inode_is_dead20,477
static void __tux3_mark_inode_to_delete(struct inode *inode, unsigned delta)__tux3_mark_inode_to_delete34,832
void tux3_mark_inode_to_delete(struct inode *inode)tux3_mark_inode_to_delete63,1638
static void tux3_dead_read_and_clear(struct inode *inode,tux3_dead_read_and_clear89,2224

kernel/orphan.c,1981
#define trace trace23,754
struct orphan {orphan27,830
	inum_t inum;inum28,846
	struct list_head list;list29,860
#define orphan_list_entry(orphan_list_entry33,929
#define orphan_entry(orphan_entry35,1085
static struct orphan *alloc_orphan(inum_t inum)alloc_orphan37,1146
static void free_orphan(struct orphan *orphan)free_orphan52,1468
void clean_orphan_list(struct list_head *head)clean_orphan_list62,1683
enum { ORPHAN_ATTR, };ORPHAN_ATTR82,2191
static unsigned orphan_asize[] = {orphan_asize83,2214
static int oattr_encoded_size(struct btree *btree, void *data)oattr_encoded_size88,2297
static void oattr_encode(struct btree *btree, void *data, void *attrs, int size)oattr_encode97,2505
struct ileaf_attr_ops oattr_ops = {oattr_ops106,2746
int tux3_unify_orphan_add(struct sb *sb, struct list_head *orphan_add)tux3_unify_orphan_add113,2921
int tux3_unify_orphan_del(struct sb *sb, struct list_head *orphan_del)tux3_unify_orphan_del171,4148
int tux3_make_orphan_add(struct inode *inode)tux3_make_orphan_add202,4860
static int add_defer_orphan_del(struct sb *sb, inum_t inum)add_defer_orphan_del226,5447
int tux3_make_orphan_del(struct inode *inode)tux3_make_orphan_del243,5881
static struct orphan *replay_find_orphan(struct list_head *head, inum_t inum)replay_find_orphan279,6742
int replay_orphan_add(struct replay *rp, unsigned version, inum_t inum)replay_orphan_add293,7056
int replay_orphan_del(struct replay *rp, unsigned version, inum_t inum)replay_orphan_del316,7551
void replay_iput_orphan_inodes(struct sb *sb,replay_iput_orphan_inodes341,8175
static int load_orphan_inode(struct sb *sb, inum_t inum, struct list_head *head)load_orphan_inode378,9116
static int load_enum_inode(struct btree *btree, inum_t inum, void *attrs,load_enum_inode402,9699
static int load_otree_orphan_inode(struct replay *rp)load_otree_orphan_inode426,10325
int replay_load_orphan_inodes(struct replay *rp)replay_load_orphan_inodes464,11088

kernel/iattr.c,1321
unsigned atsize[MAX_ATTRS] = {atsize23,518
#define TIME_ATTR_SHIFT TIME_ATTR_SHIFT43,1075
typedef u64 fixed32;		/* Tux3 time values */fixed3245,1102
static inline u32 high32(fixed32 val)high3247,1148
static inline unsigned billionths(fixed32 val)billionths56,1311
static inline struct timespec spectime(const fixed32 time)spectime65,1528
static inline fixed32 tuxtime(const struct timespec ts)tuxtime78,1791
static unsigned encode_asize(unsigned bits)encode_asize88,2077
int attr_check(void *attrs, unsigned size)attr_check103,2378
void dump_attrs(struct inode *inode)dump_attrs125,2793
void *encode_kind(void *attrs, unsigned kind, unsigned version)encode_kind166,3921
static void *encode_attrs(struct btree *btree, void *data, void *attrs,encode_attrs175,4140
void *decode_kind(void *attrs, unsigned *kind, unsigned *version)decode_kind222,5477
static void *decode_attrs(struct inode *inode, void *attrs, unsigned size)decode_attrs235,5760
static int iattr_encoded_size(struct btree *btree, void *data)iattr_encoded_size309,7547
static void iattr_encode(struct btree *btree, void *data, void *attrs, int size)iattr_encode321,7874
static int iattr_decode(struct btree *btree, void *data, void *attrs, int size)iattr_decode336,8296
struct ileaf_attr_ops iattr_ops = {iattr_ops361,8804

kernel/dleaf.h,3113
#define TUX3_DLEAF_HTUX3_DLEAF_H2,21
struct diskextent { __be64 block_count_version; };diskextent5,79
struct diskextent { __be64 block_count_version; };block_count_version5,79
#define MAX_GROUP_ENTRIES MAX_GROUP_ENTRIES6,130
struct group { __be32 count_and_keyhi; };group8,184
struct group { __be32 count_and_keyhi; };count_and_keyhi8,184
struct entry { __be32 limit_and_keylo; };entry10,250
struct entry { __be32 limit_and_keylo; };limit_and_keylo10,250
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };dleaf11,292
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };magic11,292
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };groups11,292
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };free11,292
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };used11,292
struct dleaf { __be16 magic, groups, free, used; struct diskextent table[]; };table11,292
#define DLEAF_MAX_EXTENT_SIZE DLEAF_MAX_EXTENT_SIZE14,415
struct dwalk {dwalk17,519
	struct dleaf *leaf;leaf18,534
	struct group *group, *gstop, *gdict;group19,555
	struct group *group, *gstop, *gdict;gstop19,555
	struct group *group, *gstop, *gdict;gdict19,555
	struct entry *entry, *estop;entry20,593
	struct entry *entry, *estop;estop20,593
	struct diskextent *exbase, *extent, *exstop;exbase21,623
	struct diskextent *exbase, *extent, *exstop;extent21,623
	struct diskextent *exbase, *extent, *exstop;exstop21,623
		struct group group;group23,679
		struct entry entry;entry24,701
		int used, free, groups;used25,723
		int used, free, groups;free25,723
		int used, free, groups;groups25,723
	} mock;mock26,749
static inline struct group make_group(tuxkey_t keyhi, unsigned count)make_group31,784
static inline unsigned group_keyhi(struct group *group)group_keyhi36,921
static inline unsigned group_count(struct group *group)group_count41,1032
static inline void set_group_count(struct group *group, int n)set_group_count46,1126
static inline void inc_group_count(struct group *group, int n)inc_group_count51,1224
static inline struct entry make_entry(tuxkey_t keylo, unsigned limit)make_entry58,1345
static inline unsigned entry_keylo(struct entry *entry)entry_keylo63,1482
static inline unsigned entry_limit(struct entry *entry)entry_limit68,1596
static inline void inc_entry_limit(struct entry *entry, int n)inc_entry_limit73,1690
static inline struct diskextent make_extent(block_t block, unsigned count)make_extent80,1812
static inline block_t extent_block(struct diskextent extent)extent_block86,2025
static inline unsigned extent_count(struct diskextent extent)extent_count91,2148
static inline unsigned extent_version(struct diskextent extent)extent_version96,2277
static inline unsigned dleaf_groups(struct dleaf *leaf)dleaf_groups103,2415
static inline void set_dleaf_groups(struct dleaf *leaf, int n)set_dleaf_groups108,2511
static inline void inc_dleaf_groups(struct dleaf *leaf, int n)inc_dleaf_groups113,2611

kernel/filemap_hole.c,1284
struct hole_extent {hole_extent23,649
	struct list_head list;		/* link for ->hole_extents */list24,670
	struct list_head dirty_list;	/* link for ->dirty_holes */dirty_list25,725
	block_t start;			/* start block of hole */start26,784
	block_t count;			/* number of blocks of hole */count27,828
static struct kmem_cache *tux_hole_cachep;tux_hole_cachep30,881
static void tux3_hole_init_once(void *mem)tux3_hole_init_once32,925
int __init tux3_init_hole_cache(void)tux3_init_hole_cache44,1174
void tux3_destroy_hole_cache(void)tux3_destroy_hole_cache59,1535
static struct hole_extent *tux3_alloc_hole(void)tux3_alloc_hole68,1714
static void tux3_destroy_hole(struct hole_extent *hole)tux3_destroy_hole83,1992
int tux3_flush_hole(struct inode *inode, unsigned delta)tux3_flush_hole99,2332
static int tux3_add_hole(struct inode *inode, block_t start, block_t count)tux3_add_hole149,3604
int tux3_add_truncate_hole(struct inode *inode, loff_t newsize)tux3_add_truncate_hole212,5234
int tux3_clear_hole(struct inode *inode, unsigned delta)tux3_clear_hole225,5632
static int tux3_is_hole(struct inode *inode, block_t start, unsigned count)tux3_is_hole249,6198
static int tux3_map_hole(struct inode *inode, block_t start, unsigned count,tux3_map_hole275,6832

kernel/writeback.c,3401
#define trace trace15,189
#define NUM_DIRTY_BITS	NUM_DIRTY_BITS37,658
#define IATTR_DIRTY	IATTR_DIRTY39,712
#define XATTR_DIRTY	XATTR_DIRTY41,763
#define DEAD_DIRTY	DEAD_DIRTY43,814
#define IFLAGS_DIRTY_BITS	IFLAGS_DIRTY_BITS45,869
#define IFLAGS_IATTR_BITS	IFLAGS_IATTR_BITS46,929
#define IFLAGS_XATTR_BITS	IFLAGS_XATTR_BITS47,1000
#define IFLAGS_DEAD_BITS	IFLAGS_DEAD_BITS48,1071
#define IFLAGS_IATTR_SHIFT	IFLAGS_IATTR_SHIFT50,1173
#define IFLAGS_XATTR_SHIFT	IFLAGS_XATTR_SHIFT51,1218
#define IFLAGS_DEAD_SHIFT	IFLAGS_DEAD_SHIFT52,1286
#define TUX3_DIRTY_BTREE	TUX3_DIRTY_BTREE55,1428
#define TUX3_INODE_ORPHANED	TUX3_INODE_ORPHANED57,1537
#define TUX3_INODE_DEAD	TUX3_INODE_DEAD59,1645
#define TUX3_INODE_NO_FLUSH	TUX3_INODE_NO_FLUSH61,1745
#define NON_DIRTY_FLAGS	NON_DIRTY_FLAGS63,1784
void tux3_set_inode_no_flush(struct inode *inode)tux3_set_inode_no_flush74,2151
static int tux3_is_inode_no_flush(struct inode *inode)tux3_is_inode_no_flush84,2391
void tux3_set_inode_always_dirty(struct inode *inode)tux3_set_inode_always_dirty104,2990
static inline unsigned tux3_dirty_shift(unsigned delta)tux3_dirty_shift118,3239
static inline unsigned tux3_dirty_mask(int flags, unsigned delta)tux3_dirty_mask127,3445
static inline unsigned tux3_dirty_flags(struct inode *inode, unsigned delta)tux3_dirty_flags136,3659
void tux3_dirty_inode(struct inode *inode, int flags)tux3_dirty_inode151,4073
void tux3_mark_btree_dirty(struct btree *btree)tux3_mark_btree_dirty208,5504
static inline void tux3_inode_wb_lock(struct inode *inode)tux3_inode_wb_lock234,6240
static inline void tux3_inode_wb_unlock(struct inode *inode)tux3_inode_wb_unlock246,6514
static inline void tux3_inode_wb_list_del(struct inode *inode)tux3_inode_wb_list_del258,6792
static void tux3_clear_dirty_inode_nolock(struct inode *inode, unsigned delta,tux3_clear_dirty_inode_nolock270,7102
static void __tux3_clear_dirty_inode(struct inode *inode, unsigned delta)__tux3_clear_dirty_inode310,8225
void tux3_clear_dirty_inode(struct inode *inode)tux3_clear_dirty_inode327,8719
void __tux3_mark_inode_dirty(struct inode *inode, int flags)__tux3_mark_inode_dirty344,9197
void __tux3_mark_buffer_dirty(struct buffer_head *buffer, unsigned delta)__tux3_mark_buffer_dirty363,9690
void tux3_mark_buffer_dirty(struct buffer_head *buffer)tux3_mark_buffer_dirty402,10764
void tux3_mark_buffer_unify(struct buffer_head *buffer)tux3_mark_buffer_unify420,11320
void tux3_mark_inode_orphan(struct tux3_inode *tuxnode)tux3_mark_inode_orphan455,12229
int tux3_inode_is_orphan(struct tux3_inode *tuxnode)tux3_inode_is_orphan464,12431
static void tux3_state_read_and_clear(struct inode *inode,tux3_state_read_and_clear473,12640
static inline int tux3_flush_buffers(struct inode *inode,tux3_flush_buffers503,13408
int tux3_flush_inode(struct inode *inode, unsigned delta)tux3_flush_inode532,14153
int tux3_flush_inode_internal(struct inode *inode, unsigned delta)tux3_flush_inode_internal616,16306
static int inode_inum_cmp(void *priv, struct list_head *a, struct list_head *b)inode_inum_cmp642,16914
int tux3_flush_inodes(struct sb *sb, unsigned delta)tux3_flush_inodes664,17491
void tux3_clear_dirty_inodes(struct sb *sb, unsigned delta)tux3_clear_dirty_inodes701,18406
void tux3_check_destroy_inode_flags(struct inode *inode)tux3_check_destroy_inode_flags736,19409

kernel/utility.c,1424
int vecio(int rw, struct block_device *dev, loff_t offset, unsigned vecs, struct bio_vec *vec,vecio7,109
struct biosync { struct completion done; int err; };biosync30,727
struct biosync { struct completion done; int err; };done30,727
struct biosync { struct completion done; int err; };err30,727
static void biosync_endio(struct bio *bio, int err)biosync_endio32,781
int syncio(int rw, struct block_device *dev, loff_t offset, unsigned vecs, struct bio_vec *vec)syncio44,1037
int devio(int rw, struct block_device *dev, loff_t offset, void *data, unsigned len)devio56,1446
int blockio(int rw, struct sb *sb, struct buffer_head *buffer, block_t block)blockio68,1781
int blockio_vec(int rw, struct bufvec *bufvec, block_t block, unsigned count)blockio_vec90,2375
void hexdump(void *data, unsigned size)hexdump99,2604
void __tux3_msg(struct sb *sb, const char *level, const char *prefix,__tux3_msg112,2852
void __tux3_fs_error(struct sb *sb, const char *func, unsigned int line,__tux3_fs_error130,3244
void __tux3_dbg(const char *fmt, ...)__tux3_dbg150,3709
void set_bits(u8 *bitmap, unsigned start, unsigned count)set_bits166,4010
void clear_bits(u8 *bitmap, unsigned start, unsigned count)clear_bits187,4566
int all_set(u8 *bitmap, unsigned start, unsigned count)all_set208,5127
int all_clear(u8 *bitmap, unsigned start, unsigned count)all_clear237,6004
int bytebits(u8 c)bytebits266,6847

kernel/log.c,3490
#define trace trace10,119
unsigned log_size[] = {log_size67,2382
void log_next(struct sb *sb)log_next90,2886
void log_drop(struct sb *sb)log_drop102,3236
void log_finish(struct sb *sb)log_finish113,3447
void log_finish_cycle(struct sb *sb, int discard)log_finish_cycle128,3806
static void *log_begin(struct sb *sb, unsigned bytes)log_begin152,4315
static void log_end(struct sb *sb, void *pos)log_end173,4809
int tux3_logmap_io(int rw, struct bufvec *bufvec)tux3_logmap_io188,5105
static void log_intent(struct sb *sb, u8 intent)log_intent257,6735
static void log_u48(struct sb *sb, u8 intent, u64 v1)log_u48271,7060
static void log_u16_u48(struct sb *sb, u8 intent, u16 v1, u64 v2)log_u16_u48282,7329
static void log_u32_u48(struct sb *sb, u8 intent, u32 v1, u64 v2)log_u32_u48294,7638
static void log_u48_u48(struct sb *sb, u8 intent, u64 v1, u64 v2)log_u48_u48306,7947
static void log_u16_u48_u48(struct sb *sb, u8 intent, u16 v1, u64 v2, u64 v3)log_u16_u48_u48318,8256
static void log_u48_u48_u48(struct sb *sb, u8 intent, u64 v1, u64 v2, u64 v3)log_u48_u48_u48331,8605
void log_balloc(struct sb *sb, block_t block, unsigned count)log_balloc345,8986
void log_bfree(struct sb *sb, block_t block, unsigned count)log_bfree356,9251
void log_bfree_on_unify(struct sb *sb, block_t block, unsigned count)log_bfree_on_unify367,9545
void log_bfree_relog(struct sb *sb, block_t block, unsigned count)log_bfree_relog378,9882
void log_leaf_redirect(struct sb *sb, block_t oldblock, block_t newblock)log_leaf_redirect392,10212
void log_leaf_free(struct sb *sb, block_t leaf)log_leaf_free402,10529
void log_bnode_redirect(struct sb *sb, block_t oldblock, block_t newblock)log_bnode_redirect416,10859
void log_bnode_root(struct sb *sb, block_t root, unsigned count,log_bnode_root430,11236
void log_bnode_split(struct sb *sb, block_t src, unsigned pos, block_t dst)log_bnode_split452,11859
void log_bnode_add(struct sb *sb, block_t parent, block_t child, tuxkey_t key)log_bnode_add465,12203
void log_bnode_update(struct sb *sb, block_t parent, block_t child, tuxkey_t key)log_bnode_update478,12562
void log_bnode_merge(struct sb *sb, block_t src, block_t dst)log_bnode_merge493,13019
void log_bnode_del(struct sb *sb, block_t bnode, tuxkey_t key, unsigned count)log_bnode_del506,13349
void log_bnode_adjust(struct sb *sb, block_t bnode, tuxkey_t from, tuxkey_t to)log_bnode_adjust519,13707
void log_bnode_free(struct sb *sb, block_t bnode)log_bnode_free533,14093
void log_orphan_add(struct sb *sb, unsigned version, tuxkey_t inum)log_orphan_add546,14363
void log_orphan_del(struct sb *sb, unsigned version, tuxkey_t inum)log_orphan_del559,14660
void log_freeblocks(struct sb *sb, block_t freeblocks)log_freeblocks569,14917
void log_unify(struct sb *sb)log_unify579,15164
void log_delta(struct sb *sb)log_delta589,15384
static inline struct link *page_link(struct page *page)page_link605,15723
void stash_init(struct stash *stash)stash_init614,15917
int stash_value(struct stash *stash, u64 value)stash_value625,16162
static void empty_stash(struct stash *stash)empty_stash647,16722
int unstash(struct sb *sb, struct stash *stash, unstash_t actor)unstash673,17321
int stash_walk(struct sb *sb, struct stash *stash, unstash_t actor)stash_walk708,18071
int defer_bfree(struct stash *defree, block_t block, unsigned count)defer_bfree743,18774
void destroy_defer_bfree(struct stash *defree)destroy_defer_bfree770,19292

kernel/buffer_fork.c,2193
#define buffer_link(buffer_link23,711
#define buffer_link_entry(buffer_link_entry24,767
static void forked_buffer_add(struct sb *sb, struct buffer_head *buffer)forked_buffer_add30,971
static void forked_buffer_del(struct link *prev, struct buffer_head *buffer)forked_buffer_del44,1355
static void free_forked_page(struct page *page)free_forked_page56,1633
#define buffer_freeable(buffer_freeable85,2406
#define set_buffer_freeable(set_buffer_freeable86,2474
#define clear_buffer_freeable(clear_buffer_freeable87,2545
static inline int buffer_busy(struct buffer_head *buffer, int refcount)buffer_busy89,2621
static int is_freeable_forked(struct buffer_head *buffer, struct page *page)is_freeable_forked108,3148
void free_forked_buffers(struct sb *sb, struct inode *inode, int force)free_forked_buffers147,4227
static int tux3_replace_page_cache(struct page *oldpage, struct page *newpage)tux3_replace_page_cache229,6426
static void tux3_delete_from_page_cache(struct page *page)tux3_delete_from_page_cache270,7737
static void clone_buffers(struct page *oldpage, struct page *newpage)clone_buffers311,8913
#define USE_FOR_IO	USE_FOR_IO320,9237
static struct page *clone_page(struct page *oldpage, unsigned blocksize)clone_page346,9908
static void oldpage_try_remove_from_lru(struct page *page)oldpage_try_remove_from_lru393,11138
static void newpage_add_lru(struct page *page)newpage_add_lru399,11285
enum ret_needfork {ret_needfork411,11562
	RET_FORKED = 1,		/* Someone already forked */RET_FORKED412,11582
	RET_NEED_FORK,		/* Need to fork to dirty */RET_NEED_FORK413,11629
	RET_CAN_DIRTY,		/* Can dirty without fork */RET_CAN_DIRTY414,11674
	RET_ALREADY_DIRTY,	/* Buffer is already dirtied for delta */RET_ALREADY_DIRTY415,11720
need_fork(struct page *page, struct buffer_head *buffer, unsigned delta)need_fork419,11811
struct buffer_head *blockdirty(struct buffer_head *buffer, unsigned newdelta)blockdirty480,13396
struct page *pagefork_for_blockdirty(struct page *oldpage, unsigned newdelta)pagefork_for_blockdirty601,16676
int bufferfork_to_invalidate(struct address_space *mapping, struct page *page)bufferfork_to_invalidate703,19416

kernel/xattr.c,3743
#define trace trace16,355
typedef u32 atom_t;atom_t44,1438
#define HEAD_ALIGN	HEAD_ALIGN47,1475
#define HEAD_SIZE	HEAD_SIZE48,1510
#define MAX_ATOM_NAME_LEN	MAX_ATOM_NAME_LEN50,1615
#define MAX_ATABLE_SIZE_BITS	MAX_ATABLE_SIZE_BITS52,1660
#define ATOM_DICT_BITS	ATOM_DICT_BITS53,1692
#define ATOMREF_TABLE_BITS	ATOMREF_TABLE_BITS54,1719
#define ATOMREF_SIZE	ATOMREF_SIZE60,1852
#define ATOMREF_BLKBITS	ATOMREF_BLKBITS61,1876
#define UNATOM_SIZE	UNATOM_SIZE63,1904
#define UNATOM_BLKBITS	UNATOM_BLKBITS64,1927
#define UNATOM_FREE_MAGIC	UNATOM_FREE_MAGIC66,1986
#define UNATOM_FREE_MASK	UNATOM_FREE_MASK67,2052
void atable_init_base(struct sb *sb)atable_init_base70,2175
static inline atom_t entry_atom(tux_dirent *entry)entry_atom81,2464
static struct buffer_head *blockread_unatom(struct inode *atable, atom_t atom,blockread_unatom90,2655
static loff_t unatom_dict_read(struct inode *atable, atom_t atom)unatom_dict_read104,3062
static loff_t unatom_dict_write(struct inode *atable, atom_t atom, loff_t where)unatom_dict_write124,3488
static int is_free_unatom(loff_t where)is_free_unatom160,4344
static int unatom(struct inode *atable, atom_t atom, char *name, unsigned size)unatom170,4574
static int get_freeatom(struct inode *atable, atom_t *atom)get_freeatom216,5503
static int find_atom(struct inode *atable, const char *name, unsigned len,find_atom249,6347
static int make_atom(struct inode *atable, const char *name, unsigned len,make_atom274,6902
static int update_refcount(struct sb *sb, struct buffer_head *buffer,update_refcount312,7784
static int atomref(struct inode *atable, atom_t atom, int use)atomref344,8527
void dump_atoms(struct inode *atable)dump_atoms438,10890
void show_freeatoms(struct sb *sb)show_freeatoms480,12035
struct xcache_entry {xcache_entry506,12506
	u16 atom;		/* atom of xattr data */atom508,12550
	u16 size;		/* size of body[] */size509,12587
	char body[];body510,12620
struct xcache {xcache513,12638
	u16 size;		/* size of xattrs[] */size514,12654
	u16 maxsize;		/* allocated memory size */maxsize515,12689
	struct xcache_entry xattrs[];xattrs516,12732
void free_xcache(struct inode *inode)free_xcache520,12792
int new_xcache(struct inode *inode, unsigned size)new_xcache533,13074
static int expand_xcache(struct inode *inode, unsigned size)expand_xcache553,13450
#define MIN_ALLOC_SIZE	MIN_ALLOC_SIZE559,13614
static inline struct xcache_entry *xcache_next(struct xcache_entry *xattr)xcache_next592,14285
static inline struct xcache_entry *xcache_limit(struct xcache *xcache)xcache_limit601,14509
int xcache_dump(struct inode *inode)xcache_dump610,14733
static struct xcache_entry *xcache_lookup(struct xcache *xcache, unsigned atom)xcache_lookup647,15585
static inline int remove_old(struct xcache *xcache, struct xcache_entry *xattr)remove_old667,16096
static int xcache_update(struct inode *inode, unsigned atom, const void *data,xcache_update694,16825
int xcache_remove_all(struct inode *inode)xcache_remove_all744,18117
int get_xattr(struct inode *inode, const char *name, unsigned len, void *data,get_xattr775,18757
int set_xattr(struct inode *inode, const char *name, unsigned len,set_xattr807,19467
int del_xattr(struct inode *inode, const char *name, unsigned len)del_xattr835,20083
int list_xattr(struct inode *inode, char *text, size_t size)list_xattr873,20891
unsigned encode_xsize(struct inode *inode)encode_xsize937,22145
void *encode_xattrs(struct inode *inode, void *attrs, unsigned size)encode_xattrs960,22659
unsigned decode_xsize(struct inode *inode, void *attrs, unsigned size)decode_xsize990,23506
void *decode_xattr(struct inode *inode, void *attrs)decode_xattr1019,24273

kernel/link.h,1592
#define TUX3_LINK_HTUX3_LINK_H2,20
struct link { struct link *next; };link6,88
struct link { struct link *next; };next6,88
#define LINK_INIT_CIRCULAR(LINK_INIT_CIRCULAR8,125
#define link_entry(link_entry9,171
#define __link_entry(__link_entry11,310
static inline void init_link_circular(struct link *head)init_link_circular14,417
static inline int link_empty(const struct link *head)link_empty19,499
static inline void link_add(struct link *node, struct link *head)link_add24,586
static inline void link_del_next(struct link *node)link_del_next30,703
#define link_for_each_safe(link_for_each_safe35,792
struct flink_head { struct link *tail; };flink_head42,1055
struct flink_head { struct link *tail; };tail42,1055
#define FLINK_HEAD_INIT(FLINK_HEAD_INIT44,1098
#define flink_next_entry(flink_next_entry45,1138
#define __flink_next_entry(__flink_next_entry48,1298
static inline void init_flink_head(struct flink_head *head)init_flink_head53,1473
static inline int flink_empty(const struct flink_head *head)flink_empty58,1558
static inline int flink_is_last(const struct flink_head *head)flink_is_last63,1652
static inline struct link *flink_next(const struct flink_head *head)flink_next68,1752
static inline void flink_first_add(struct link *node, struct flink_head *head)flink_first_add73,1852
static inline void flink_add(struct link *node, struct flink_head *head)flink_add80,2011
static inline void flink_del_next(struct flink_head *head)flink_del_next86,2138
static inline void flink_last_del(struct flink_head *head)flink_last_del91,2230

kernel/commit_flusher.h,461
#define TUX3_COMMIT_FLUSHER_HTUX3_COMMIT_FLUSHER_H2,30
static inline void tux3_accout_set_writeback(struct page *page) { }tux3_accout_set_writeback13,418
static inline void tux3_accout_clear_writeback(struct page *page) { }tux3_accout_clear_writeback14,486
static inline void tux3_set_mapping_bdi(struct inode *inode) { }tux3_set_mapping_bdi15,556
static inline void tux3_start_periodical_flusher(struct sb *sb) { }tux3_start_periodical_flusher16,621

kernel/tux3.h,18405
#define TUX3_HTUX3_H2,15
#define fieldtype(fieldtype26,516
#define vecset(vecset27,585
#define veccopy(veccopy28,646
#define vecmove(vecmove29,708
typedef u64 inum_t;inum_t31,772
typedef u64 tuxkey_t;tuxkey_t32,792
static inline void *encode16(void *at, unsigned val)encode1634,815
static inline void *encode32(void *at, unsigned val)encode3240,934
static inline void *encode64(void *at, u64 val)encode6446,1053
static inline void *encode48(void *at, u64 val)encode4852,1167
static inline void *decode16(void *at, unsigned *val)decode1658,1278
static inline void *decode32(void *at, unsigned *val)decode3264,1389
static inline void *decode64(void *at, u64 *val)decode6470,1500
static inline void *decode48(void *at, u64 *val)decode4876,1606
#define TUX3_MAGIC	TUX3_MAGIC102,2380
#define TUX3_MAGIC_STR	TUX3_MAGIC_STR103,2447
#define TUX3_MAGIC_LOG	TUX3_MAGIC_LOG106,2531
#define TUX3_MAGIC_BNODE	TUX3_MAGIC_BNODE107,2562
#define TUX3_MAGIC_DLEAF	TUX3_MAGIC_DLEAF108,2594
#define TUX3_MAGIC_DLEAF2	TUX3_MAGIC_DLEAF2109,2626
#define TUX3_MAGIC_ILEAF	TUX3_MAGIC_ILEAF110,2659
#define TUX3_MAGIC_OLEAF	TUX3_MAGIC_OLEAF111,2691
#define MAX_INODES_BITS	MAX_INODES_BITS114,2781
#define MAX_INODES	MAX_INODES115,2809
#define MAX_BLOCKS_BITS	MAX_BLOCKS_BITS117,2921
#define MAX_BLOCKS	MAX_BLOCKS118,2949
#define MAX_EXTENT	MAX_EXTENT119,3001
#define SB_LOC	SB_LOC121,3031
#define SB_LEN	SB_LEN122,3058
#define MAX_TUXKEY	MAX_TUXKEY124,3118
#define TUXKEY_LIMIT	TUXKEY_LIMIT125,3164
#define TUX_BITMAP_INO	TUX_BITMAP_INO128,3232
#define TUX_VTABLE_INO	TUX_VTABLE_INO129,3258
#define TUX_ATABLE_INO	TUX_ATABLE_INO130,3284
#define TUX_ROOTDIR_INO	TUX_ROOTDIR_INO131,3310
#define TUX_VOLMAP_INO	TUX_VOLMAP_INO132,3337
#define TUX_LOGMAP_INO	TUX_LOGMAP_INO133,3403
#define TUX_INVALID_INO	TUX_INVALID_INO134,3466
#define TUX_NORMAL_INO	TUX_NORMAL_INO135,3526
struct disksuper {disksuper137,3589
	char magic[8];		/* Contains TUX3_LABEL magic string */magic139,3662
	__be64 birthdate;	/* Volume creation date */birthdate140,3718
	__be64 flags;		/* Need to assign some flags */flags141,3764
	__be16 blockbits;	/* Shift to get volume block size */blockbits142,3812
	__be16 unused[3];	/* Padding for alignment */unused143,3868
	__be64 volblocks;	/* Volume size */volblocks144,3915
	__be64 iroot;		/* Root of the itree */iroot147,4029
	__be64 oroot;		/* Root of the otree */oroot148,4069
	__be64 usedinodes;	/* Number of using inode numbers.  (Instead ofusedinodes149,4109
	__be64 nextblock;	/* Get rid of this when we have a real allocation policy */nextblock154,4308
	__be64 atomdictsize;	/*atomdictsize155,4387
	__be32 freeatom;	/* Beginning of persistent free atom list in atable */freeatom159,4524
	__be32 atomgen;		/* Next atom number if there are no free atoms */atomgen160,4597
	__be64 logchain;	/* Most recent delta commit block pointer */logchain161,4665
	__be32 logcount;	/* Count of log blocks in the current log chain */logcount162,4728
} __packed;__packed163,4797
struct root {root165,4810
	unsigned depth; /* btree levels not including leaf level */depth166,4824
	block_t block; /* disk location of btree root */block167,4885
struct btree {btree170,4939
	struct rw_semaphore lock;lock171,4954
	struct sb *sb;		/* Convenience to reduce parameter list size */sb172,4981
	struct btree_ops *ops;	/* Generic btree low level operations */ops173,5046
	struct root root;	/* Cached description of btree root */root174,5111
	u16 entries_per_leaf;	/* Used in btree leaf splitting */entries_per_leaf175,5169
static inline u64 pack_root(struct root *root)pack_root180,5307
static inline struct root unpack_root(u64 v)unpack_root185,5405
struct cursor {cursor192,5566
	struct btree *btree;btree193,5582
#define CURSOR_DEBUGCURSOR_DEBUG194,5604
#define FREE_BUFFER	FREE_BUFFER196,5645
#define FREE_NEXT	FREE_NEXT197,5686
	int maxlevel;maxlevel198,5725
	int level;level200,5747
	struct path_level {path_level201,5759
		struct buffer_head *buffer;buffer202,5780
		struct index_entry *next;next203,5810
	} path[];path204,5838
struct stash { struct flink_head head; u64 *pos, *top; };stash207,5853
struct stash { struct flink_head head; u64 *pos, *top; };head207,5853
struct stash { struct flink_head head; u64 *pos, *top; };pos207,5853
struct stash { struct flink_head head; u64 *pos, *top; };top207,5853
#define TUX3_FLUSHER_SYNC	TUX3_FLUSHER_SYNC210,5938
#define TUX3_FLUSHER_ASYNC_OWN	TUX3_FLUSHER_ASYNC_OWN212,6008
#define TUX3_FLUSHER_ASYNC_HACK	TUX3_FLUSHER_ASYNC_HACK214,6110
struct delta_ref {delta_ref217,6171
	atomic_t refcount;refcount218,6190
	unsigned delta;delta219,6210
	int unify_flag;	/* FIXME: is there better way? */unify_flag221,6246
struct sb_delta_dirty {sb_delta_dirty226,6346
	struct list_head dirty_inodes;	/* dirty inodes list */dirty_inodes227,6370
struct sb {sb231,6493
		struct disksuper super;super233,6514
		char thisbig[SB_LEN];thisbig234,6540
	struct rw_semaphore delta_lock;		/* delta transition exclusive */delta_lock238,6607
	struct delta_ref __rcu *current_delta;	/* current delta */current_delta240,6681
	struct delta_ref delta_refs[TUX3_MAX_DELTA];delta_refs241,6741
	unsigned next_delta;			/* delta commit cycle */next_delta242,6787
	unsigned unify;				/* log unify cycle */unify243,6836
#define TUX3_COMMIT_RUNNING_BIT	TUX3_COMMIT_RUNNING_BIT245,6879
#define TUX3_COMMIT_PENDING_BIT	TUX3_COMMIT_PENDING_BIT246,6914
	unsigned long backend_state;		/* delta state */backend_state247,6949
	struct delta_ref *pending_delta;	/* pending delta for commit */pending_delta249,7017
	unsigned marshal_delta;			/* marshaling delta */marshal_delta251,7089
	unsigned committed_delta;		/* committed delta */committed_delta252,7139
	wait_queue_head_t delta_event_wq;	/* wait queue for delta event */delta_event_wq253,7189
	struct task_struct *flush_task;		/* work to flush delta */flush_task255,7300
	struct backing_dev_info bdi;bdi258,7411
	struct btree itree;	/* Inode btree */itree261,7449
	struct btree otree;	/* Orphan btree */otree262,7488
	struct inode *volmap;	/* Volume metadata cache (like blockdev). */volmap263,7528
	struct inode *bitmap;	/* allocation bitmap special file */bitmap264,7596
	struct inode *rootdir;	/* root directory special file */rootdir265,7656
	struct inode *vtable;	/* version table special file */vtable266,7714
	struct inode *atable;	/* xattr atom special file */atable267,7770
	unsigned blocksize, blockbits, blockmask;blocksize269,7824
	unsigned blocksize, blockbits, blockmask;blockbits269,7824
	unsigned blocksize, blockbits, blockmask;blockmask269,7824
	u64 freeinodes;		/* Number of free inode numbers. This isfreeinodes270,7867
	block_t volblocks, freeblocks, nextblock;volblocks272,7976
	block_t volblocks, freeblocks, nextblock;freeblocks272,7976
	block_t volblocks, freeblocks, nextblock;nextblock272,7976
	inum_t nextinum;	/* FIXME: temporary hack to avoid to findnextinum273,8019
	unsigned entries_per_node; /* must be per-btree type, get rid of this */entries_per_node275,8123
	unsigned version;	/* Currently mounted volume version view */version276,8197
	unsigned atomref_base;	/* Index of atom refcount base */atomref_base278,8261
	unsigned unatom_base;	/* Index of unatom base */unatom_base279,8319
	loff_t atomdictsize;	/* Atom dictionary size */atomdictsize280,8369
	unsigned freeatom;	/* Start of free atom list in atom table */freeatom281,8418
	unsigned atomgen;	/* Next atom number to allocate if no free atoms */atomgen282,8482
	struct inode *logmap;	/* Log block cache */logmap287,8584
	unsigned lognext;	/* Index of next log block in log map */lognext288,8629
	struct buffer_head *logbuf; /* Cached log block */logbuf289,8689
	unsigned char *logpos, *logtop; /* Where to emit next log entry */logpos290,8741
	unsigned char *logpos, *logtop; /* Where to emit next log entry */logtop290,8741
	struct list_head orphan_add; /* defered orphan inode add list */orphan_add292,8810
	struct list_head orphan_del; /* defered orphan inode del list */orphan_del293,8876
	struct stash defree;	/* defer extent frees until after delta */defree295,8943
	struct stash deunify;	/* defer extent frees until after unify */deunify296,9008
	struct list_head unify_buffers; /* dirty metadata flushed at unify */unify_buffers298,9075
	struct iowait *iowait;		/* helper for waiting I/O */iowait300,9147
	struct list_head alloc_inodes;	/* deferred inum allocation inodes */alloc_inodes305,9240
	spinlock_t forked_buffers_lock;forked_buffers_lock307,9311
	struct link forked_buffers;	/* forked buffers list */forked_buffers308,9344
	spinlock_t dirty_inodes_lock;	/* lock of dirty_inodes for frontend */dirty_inodes_lock310,9400
	struct sb_delta_dirty s_ddc[TUX3_MAX_DELTA];s_ddc312,9506
	struct super_block *vfs_sb;	/* Generic kernel superblock */vfs_sb314,9570
	struct dev *dev;		/* userspace block device */dev316,9637
	loff_t s_maxbytes;		/* maximum file size */s_maxbytes317,9685
#define BLOCK_SEG_HOLE	BLOCK_SEG_HOLE322,9790
#define BLOCK_SEG_NEW	BLOCK_SEG_NEW323,9823
struct block_segment {block_segment325,9856
	block_t block;		/* Start of physical address */block326,9879
	unsigned count;		/* Number of blocks */count327,9928
	unsigned state;		/* State of this segment */state328,9969
#define BALLOC_PARTIAL	BALLOC_PARTIAL335,10086
struct logblock {logblock339,10136
	__be16 magic;		/* Magic number */magic340,10154
	__be16 bytes;		/* Total data bytes on this block */bytes341,10189
	u32 unused;		/* padding */unused342,10242
	__be64 logchain;	/* Block number to previous logblock */logchain343,10270
	unsigned char data[];	/* Log data */data344,10328
	LOG_BALLOC = 0x33,	/* Log of block allocation */LOG_BALLOC348,10377
	LOG_BFREE,		/* Log of freeing block after delta */LOG_BFREE349,10427
	LOG_BFREE_ON_UNIFY,	/* Log of freeing block after unify */LOG_BFREE_ON_UNIFY350,10479
	LOG_BFREE_RELOG,	/* LOG_BFREE, but re-log of free after unify */LOG_BFREE_RELOG351,10539
	LOG_LEAF_REDIRECT,	/* Log of leaf redirect */LOG_LEAF_REDIRECT352,10605
	LOG_LEAF_FREE,		/* Log of freeing leaf */LOG_LEAF_FREE353,10652
	LOG_BNODE_REDIRECT,	/* Log of bnode redirect */LOG_BNODE_REDIRECT354,10695
	LOG_BNODE_ROOT,		/* Log of new bnode root allocation */LOG_BNODE_ROOT355,10744
	LOG_BNODE_SPLIT,	/* Log of spliting bnode to new bnode */LOG_BNODE_SPLIT356,10801
	LOG_BNODE_ADD,		/* Log of adding bnode index */LOG_BNODE_ADD357,10860
	LOG_BNODE_UPDATE,	/* Log of bnode index ->block update */LOG_BNODE_UPDATE358,10909
	LOG_BNODE_MERGE,	/* Log of merging 2 bnodes */LOG_BNODE_MERGE359,10968
	LOG_BNODE_DEL,		/* Log of deleting bnode index */LOG_BNODE_DEL360,11016
	LOG_BNODE_ADJUST,	/* Log of bnode index ->key adjust */LOG_BNODE_ADJUST361,11067
	LOG_BNODE_FREE,		/* Log of freeing bnode */LOG_BNODE_FREE362,11124
	LOG_ORPHAN_ADD,		/* Log of adding orphan inode */LOG_ORPHAN_ADD363,11169
	LOG_ORPHAN_DEL,		/* Log of deleting orphan inode */LOG_ORPHAN_DEL364,11220
	LOG_FREEBLOCKS,		/* Log of freeblocks in bitmap on unify */LOG_FREEBLOCKS365,11273
	LOG_UNIFY,		/* Log of marking unify */LOG_UNIFY366,11334
	LOG_DELTA,		/* just for debugging */LOG_DELTA367,11374
	LOG_TYPESLOG_TYPES368,11412
#define TUX3_INVALID_PRESENT	TUX3_INVALID_PRESENT372,11501
struct tux3_iattr_data {tux3_iattr_data375,11566
	unsigned	present;present376,11591
	umode_t		i_mode;i_mode378,11611
	uid_t		i_uid;i_uid379,11629
	gid_t		i_gid;i_gid380,11644
	unsigned int	i_nlink;i_nlink381,11659
	dev_t		i_rdev;i_rdev382,11682
	loff_t		i_size;i_size383,11698
	struct timespec	i_mtime;i_mtime385,11743
	struct timespec	i_ctime;i_ctime386,11769
	u64		i_version;i_version387,11795
struct inode_delta_dirty {inode_delta_dirty391,11857
	struct list_head dirty_buffers;	/* list for dirty buffers */dirty_buffers392,11884
	struct list_head dirty_holes;	/* list for hole extents */dirty_holes393,11946
	struct list_head dirty_list;	/* link for dirty inode list */dirty_list394,12005
	struct tux3_iattr_data idata;idata399,12190
struct tux3_inode {tux3_inode403,12240
	struct btree btree;btree404,12260
	inum_t inum;			/* Inode number */inum405,12281
	struct xcache *xcache;		/* Extended attribute cache */xcache406,12316
	struct list_head alloc_list;	/* link for deferred inum allocation */alloc_list407,12372
	struct list_head orphan_list;	/* link for orphan inode list */orphan_list408,12442
	spinlock_t hole_extents_lock;	/* lock for hole_extents */hole_extents_lock411,12554
	struct list_head hole_extents;	/* hole extents list */hole_extents412,12613
	spinlock_t lock;		/* lock for inode metadata */lock414,12670
	unsigned flags;			/* flags for inode state */flags416,12757
	unsigned present;		/* Attributes decoded from orpresent417,12804
	struct inode_delta_dirty i_ddc[TUX3_MAX_DELTA];i_ddc419,12888
	int (*io)(int rw, struct bufvec *bufvec);io421,12955
	struct inode vfs_inode;vfs_inode424,13026
static inline struct tux3_inode *tux_inode(struct inode *inode)tux_inode427,13055
static inline struct inode *btree_inode(struct btree *btree)btree_inode432,13183
static inline struct sb *tux_sb(struct super_block *sb)tux_sb437,13333
static inline struct super_block *vfs_sb(struct sb *sb)vfs_sb442,13417
typedef struct address_space map_t;map_t447,13498
static inline map_t *mapping(struct inode *inode)mapping449,13535
static inline void *malloc(size_t size)malloc454,13616
static inline void free(void *ptr)free460,13710
static inline struct block_device *sb_dev(struct sb *sb)sb_dev465,13763
static inline struct sb *tux_sb(struct sb *sb)tux_sb470,13876
static inline struct sb *vfs_sb(struct sb *sb)vfs_sb475,13940
static inline map_t *mapping(struct inode *inode)mapping480,14004
static inline struct dev *sb_dev(struct sb *sb)sb_dev485,14079
static inline unsigned tux3_delta(unsigned delta)tux3_delta492,14216
static inline struct sb_delta_dirty *tux3_sb_ddc(struct sb *sb, unsigned delta)tux3_sb_ddc498,14355
static inline struct inode_delta_dirty *tux3_inode_ddc(struct inode *inode,tux3_inode_ddc504,14528
static inline struct tux3_inode *i_ddc_to_inode(struct inode_delta_dirty *i_ddc,i_ddc_to_inode510,14691
static inline struct list_head *tux3_dirty_buffers(struct inode *inode,tux3_dirty_buffers517,14923
struct tux_iattr {tux_iattr523,15079
	kuid_t	uid;uid524,15098
	kgid_t	gid;gid525,15111
	umode_t	mode;mode526,15124
static inline struct btree *itree_btree(struct sb *sb)itree_btree529,15143
static inline struct btree *otree_btree(struct sb *sb)otree_btree534,15223
#define TUX_LINK_MAX TUX_LINK_MAX539,15303
#define TUX_NAME_LEN TUX_NAME_LEN541,15370
	__be64 inum;inum545,15435
	__be16 rec_len;rec_len546,15449
	u8 name_len, type;name_len547,15466
	u8 name_len, type;type547,15466
	char name[];name548,15486
} tux_dirent;tux_dirent554,15625
struct btree_key_range {btree_key_range556,15640
	tuxkey_t start;start557,15665
	unsigned len;len558,15682
struct btree_ops {btree_ops561,15701
	void (*btree_init)(struct btree *btree);btree_init562,15720
	int (*leaf_init)(struct btree *btree, void *leaf);leaf_init563,15762
	tuxkey_t (*leaf_split)(struct btree *btree, tuxkey_t hint, void *from, void *into);leaf_split564,15814
	int (*leaf_chop)(struct btree *btree, tuxkey_t start, u64 len, void *leaf);leaf_chop566,15964
	int (*leaf_merge)(struct btree *btree, void *into, void *from);leaf_merge568,16093
	int (*leaf_write)(struct btree *btree, tuxkey_t key_bottom, tuxkey_t key_limit, void *leaf, struct btree_key_range *key, tuxkey_t *split_hint);leaf_write570,16228
	int (*leaf_read)(struct btree *btree, tuxkey_t key_bottom, tuxkey_t key_limit, void *leaf, struct btree_key_range *key);leaf_read571,16373
	int (*balloc)(struct sb *sb, unsigned blocks, struct block_segment *seg, int segs);balloc572,16495
	int (*bfree)(struct sb *sb, block_t block, unsigned blocks);bfree573,16580
	void *private_ops;private_ops575,16643
	int (*leaf_sniff)(struct btree *btree, void *leaf);leaf_sniff580,16691
	int (*leaf_can_free)(struct btree *btree, void *leaf);leaf_can_free582,16794
	void (*leaf_dump)(struct btree *btree, void *leaf);leaf_dump583,16850
struct replay {replay587,16936
	struct sb *sb;sb588,16952
	struct list_head log_orphan_add;   /* To remember LOG_ORPHAN_ADD */log_orphan_add591,16989
	struct list_head orphan_in_otree; /* Orphan inodes in sb->otree */orphan_in_otree592,17058
	void *unify_pos;	/* position of unify log in a log block */unify_pos595,17147
	block_t unify_index;	/* index of a log block including unify log */unify_index596,17208
	block_t blocknrs[];	/* block address of log blocks */blocknrs597,17277
static inline int has_root(struct btree *btree)has_root602,17408
static inline void *ptr_redirect(void *ptr, void *src, void *dst)ptr_redirect610,17666
static inline struct timespec gettime(void)gettime620,17834
static inline struct inode *buffer_inode(struct buffer_head *buffer)buffer_inode625,17914
static inline block_t bufindex(struct buffer_head *buffer)bufindex631,18061
#define tux3_msg(tux3_msg678,20006
#define tux3_err(tux3_err680,20095
#define tux3_warn(tux3_warn683,20229
typedef int (*btree_traverse_func_t)(struct btree *btree, tuxkey_t key_bottom,btree_traverse_func_t717,21830
static inline struct btree_ops *dtree_ops(void)dtree_ops783,24901
struct ileaf_enumrate_cb {ileaf_enumrate_cb804,25602
	int (*callback)(struct btree *btree, inum_t inum, void *attrs,callback805,25629
	void *data;data807,25724
typedef int (*unstash_t)(struct sb *sb, u64 val);unstash_t865,28467
#define tux3_dbg(tux3_dbg901,29902
#define tux3_fs_error(tux3_fs_error906,30117
static inline void tux3_mark_inode_dirty(struct inode *inode)tux3_mark_inode_dirty921,30752
static inline void tux3_mark_inode_dirty_sync(struct inode *inode)tux3_mark_inode_dirty_sync925,30860
#define ENOATTR ENOATTR949,31907
static inline struct buffer_head *vol_find_get_block(struct sb *sb, block_t block)vol_find_get_block968,32747
static inline struct buffer_head *vol_getblk(struct sb *sb, block_t block)vol_getblk973,32880
static inline struct buffer_head *vol_bread(struct sb *sb, block_t block)vol_bread978,33006

kernel/buffer_writeback.c,3165
static void iowait_inflight_inc(struct iowait *iowait)iowait_inflight_inc12,99
static void iowait_inflight_dec(struct iowait *iowait)iowait_inflight_dec21,292
void tux3_iowait_init(struct iowait *iowait)tux3_iowait_init31,525
void tux3_iowait_wait(struct iowait *iowait)tux3_iowait_wait45,827
#define buffers_entry(buffers_entry60,1149
#define MAX_BUFVEC_COUNT	MAX_BUFVEC_COUNT62,1228
static void bufvec_init(struct bufvec *bufvec, struct address_space *mapping,bufvec_init65,1287
static void bufvec_free(struct bufvec *bufvec)bufvec_free82,1747
static inline void bufvec_buffer_move_to_contig(struct bufvec *bufvec,bufvec_buffer_move_to_contig94,2073
static void bufvec_bio_add_buffer(struct bufvec *bufvec,bufvec_bio_add_buffer115,2631
static struct buffer_head *bufvec_bio_del_buffer(struct bio *bio)bufvec_bio_del_buffer132,2984
static struct address_space *bufvec_bio_mapping(struct bio *bio)bufvec_bio_mapping148,3306
static struct bio *bufvec_bio_alloc(struct sb *sb, unsigned int count,bufvec_bio_alloc160,3623
static void bufvec_submit_bio(int rw, struct bufvec *bufvec)bufvec_submit_bio188,4378
static int keep_page_dirty(struct bufvec *bufvec, struct page *page)keep_page_dirty216,5149
bufvec_prepare_and_lock_page(struct bufvec *bufvec, struct page *page)bufvec_prepare_and_lock_page244,5794
static void bufvec_prepare_and_unlock_page(struct page *page)bufvec_prepare_and_unlock_page310,7945
static void bufvec_page_end_io(struct page *page, int uptodate, int quiet)bufvec_page_end_io320,8166
static void bufvec_buffer_end_io(struct buffer_head *buffer, int uptodate,bufvec_buffer_end_io331,8445
static int bufvec_is_multiple_ranges(struct bufvec *bufvec)bufvec_is_multiple_ranges354,8985
static void bufvec_end_io_multiple(struct bio *bio, int err)bufvec_end_io_multiple380,9659
static void bufvec_bio_add_multiple(int rw, struct bufvec *bufvec)bufvec_bio_add_multiple442,11397
static void bufvec_end_io(struct bio *bio, int err)bufvec_end_io500,13184
static void bufvec_bio_add_page(int rw, struct bufvec *bufvec)bufvec_bio_add_page546,14370
static int bufvec_bio_is_contiguous(struct bufvec *bufvec, block_t physical)bufvec_bio_is_contiguous596,15959
static struct page *bufvec_next_buffer_page(struct bufvec *bufvec)bufvec_next_buffer_page611,16394
int bufvec_io(int rw, struct bufvec *bufvec, block_t physical, unsigned count)bufvec_io645,17420
static void bufvec_cancel_and_unlock_page(struct page *page,bufvec_cancel_and_unlock_page710,19228
static void bufvec_cancel_dirty_outside(struct bufvec *bufvec)bufvec_cancel_dirty_outside732,19798
int bufvec_contig_add(struct bufvec *bufvec, struct buffer_head *buffer)bufvec_contig_add780,21040
static int bufvec_contig_collect(struct bufvec *bufvec)bufvec_contig_collect813,21775
static int buffer_index_cmp(void *priv, struct list_head *a,buffer_index_cmp863,23132
int flush_list(struct address_space *mapping, struct tux3_iattr_data *idata,flush_list901,24004
int __tux3_volmap_io(int rw, struct bufvec *bufvec, block_t physical,__tux3_volmap_io940,24848
int tux3_volmap_io(int rw, struct bufvec *bufvec)tux3_volmap_io950,25097

kernel/btree.c,6801
#define trace trace15,367
struct root no_root = {no_root19,469
struct bnode {bnode24,523
	__be16 magic;magic25,538
	__be16 unused;unused26,553
	__be32 count;count27,569
	struct index_entry {index_entry28,584
		__be64 key;key29,606
		__be64 block;block30,620
	} entries[];entries31,636
unsigned calc_entries_per_node(unsigned blocksize)calc_entries_per_node43,1041
static inline unsigned bcount(struct bnode *node)bcount52,1271
static struct buffer_head *new_block(struct btree *btree)new_block61,1461
struct buffer_head *new_leaf(struct btree *btree)new_leaf78,1889
static inline void bnode_buffer_init(struct buffer_head *buffer)bnode_buffer_init94,2271
static inline int bnode_sniff(struct bnode *bnode)bnode_sniff105,2565
static struct buffer_head *new_node(struct btree *btree)new_node114,2777
static inline struct bnode *level_node(struct cursor *cursor, int level)level_node137,3481
struct buffer_head *cursor_leafbuf(struct cursor *cursor)cursor_leafbuf146,3705
static void cursor_root_add(struct cursor *cursor, struct buffer_head *buffer,cursor_root_add156,3966
static void level_replace_blockput(struct cursor *cursor, int level,level_replace_blockput175,4523
static void cursor_push(struct cursor *cursor, struct buffer_head *buffer,cursor_push194,5054
static struct buffer_head *cursor_pop(struct cursor *cursor)cursor_pop211,5557
static inline void cursor_pop_blockput(struct cursor *cursor)cursor_pop_blockput231,6015
static inline int level_finished(struct cursor *cursor, int level)level_finished241,6244
void release_cursor(struct cursor *cursor)release_cursor252,6565
void show_cursor(struct cursor *cursor, int depth)show_cursor263,6786
static void cursor_check(struct cursor *cursor)cursor_check278,7156
static inline int alloc_cursor_size(int count)alloc_cursor_size313,8075
struct cursor *alloc_cursor(struct btree *btree, int extra)alloc_cursor322,8295
void free_cursor(struct cursor *cursor)free_cursor345,8864
static struct index_entry *bnode_lookup(struct bnode *node, tuxkey_t key)bnode_lookup358,9124
static int cursor_level_finished(struct cursor *cursor)cursor_level_finished374,9524
tuxkey_t cursor_next_key(struct cursor *cursor)cursor_next_key390,10049
static tuxkey_t cursor_level_next_key(struct cursor *cursor)cursor_level_next_key405,10420
tuxkey_t cursor_this_key(struct cursor *cursor)cursor_this_key422,10847
static tuxkey_t cursor_level_this_key(struct cursor *cursor)cursor_level_this_key432,11124
static int cursor_read_root(struct cursor *cursor)cursor_read_root447,11474
static int cursor_advance_up(struct cursor *cursor)cursor_advance_up471,12087
static int cursor_advance_down(struct cursor *cursor)cursor_advance_down488,12488
static int cursor_advance(struct cursor *cursor)cursor_advance526,13429
static void cursor_bnode_lookup(struct cursor *cursor, tuxkey_t key)cursor_bnode_lookup548,13839
int btree_probe(struct cursor *cursor, tuxkey_t key)btree_probe558,14121
int btree_traverse(struct cursor *cursor, tuxkey_t key, u64 len,btree_traverse594,14806
void show_tree_range(struct btree *btree, tuxkey_t start, unsigned count)show_tree_range636,15686
void show_tree(struct btree *btree)show_tree668,16454
static void level_redirect_blockput(struct cursor *cursor, int level, struct buffer_head *clone)level_redirect_blockput677,16628
static int leaf_need_redirect(struct sb *sb, struct buffer_head *buffer)leaf_need_redirect694,17196
static int bnode_need_redirect(struct sb *sb, struct buffer_head *buffer)bnode_need_redirect706,17551
int cursor_redirect(struct cursor *cursor)cursor_redirect726,18226
static void bnode_remove_index(struct bnode *node, struct index_entry *p,bnode_remove_index795,20110
static int bnode_merge_nodes(struct sb *sb, struct bnode *into,bnode_merge_nodes808,20473
static void adjust_parent_sep(struct cursor *cursor, int level, __be64 newsep)adjust_parent_sep826,20932
struct chopped_index_info {chopped_index_info854,21724
	tuxkey_t start;start855,21752
	int count;count856,21769
static void remove_index(struct cursor *cursor, struct chopped_index_info *cii)remove_index859,21785
static int try_leaf_merge(struct btree *btree, struct buffer_head *intobuf,try_leaf_merge899,23046
static int try_bnode_merge(struct sb *sb, struct buffer_head *intobuf,try_bnode_merge926,23804
int btree_chop(struct btree *btree, tuxkey_t start, u64 len)btree_chop978,25717
static void bnode_init_root(struct bnode *root, unsigned count, block_t left,bnode_init_root1160,29941
static void bnode_add_index(struct bnode *node, struct index_entry *p,bnode_add_index1175,30349
static void bnode_split(struct bnode *src, unsigned pos, struct bnode *dst)bnode_split1189,30746
static int insert_leaf(struct cursor *cursor, tuxkey_t childkey, struct buffer_head *leafbuf, int keep)insert_leaf1207,31246
int btree_insert_leaf(struct cursor *cursor, tuxkey_t key, struct buffer_head *leafbuf)btree_insert_leaf1309,34267
static int btree_leaf_split(struct cursor *cursor, tuxkey_t key, tuxkey_t hint)btree_leaf_split1327,34708
int btree_write(struct cursor *cursor, struct btree_key_range *key)btree_write1354,35494
int btree_read(struct cursor *cursor, struct btree_key_range *key)btree_read1397,36522
void init_btree(struct btree *btree, struct sb *sb, struct root root, struct btree_ops *ops)init_btree1417,37116
int alloc_empty_btree(struct btree *btree)alloc_empty_btree1430,37424
int free_empty_btree(struct btree *btree)free_empty_btree1473,38541
int replay_bnode_redirect(struct replay *rp, block_t oldblock, block_t newblock)replay_bnode_redirect1536,40177
int replay_bnode_root(struct replay *rp, block_t root, unsigned count,replay_bnode_root1568,40881
int replay_bnode_split(struct replay *rp, block_t src, unsigned pos,replay_bnode_split1595,41492
static int replay_bnode_change(struct sb *sb, block_t bnodeblock,replay_bnode_change1635,42322
static void add_func(struct bnode *bnode, u64 child, u64 key)add_func1658,42845
int replay_bnode_add(struct replay *rp, block_t parent, block_t child,replay_bnode_add1668,43116
static void update_func(struct bnode *bnode, u64 child, u64 key)update_func1678,43381
int replay_bnode_update(struct replay *rp, block_t parent, block_t child,replay_bnode_update1689,43684
int replay_bnode_merge(struct replay *rp, block_t src, block_t dst)replay_bnode_merge1699,43951
static void del_func(struct bnode *bnode, u64 key, u64 count)del_func1734,44656
int replay_bnode_del(struct replay *rp, block_t bnode, tuxkey_t key,replay_bnode_del1745,44962
static void adjust_func(struct bnode *bnode, u64 from, u64 to)adjust_func1755,45226
int replay_bnode_adjust(struct replay *rp, block_t bnode, tuxkey_t from,replay_bnode_adjust1766,45524

kernel/namei.c,1422
static struct dentry *tux3_lookup(struct inode *dir, struct dentry *dentry,tux3_lookup10,141
static int __tux_add_dirent(struct inode *dir, struct dentry *dentry,__tux_add_dirent40,877
static int tux_add_dirent(struct inode *dir, struct dentry *dentry,tux_add_dirent51,1174
static int __tux3_mknod(struct inode *dir, struct dentry *dentry,__tux3_mknod64,1479
static int tux3_mknod(struct inode *dir, struct dentry *dentry, umode_t mode,tux3_mknod102,2307
static int tux3_create(struct inode *dir, struct dentry *dentry, umode_t mode,tux3_create118,2661
static int tux3_mkdir(struct inode *dir, struct dentry *dentry, umode_t mode)tux3_mkdir128,2908
static int tux3_link(struct dentry *old_dentry, struct inode *dir,tux3_link138,3169
static int __tux3_symlink(struct inode *dir, struct dentry *dentry,__tux3_symlink167,3774
static int tux3_symlink(struct inode *dir, struct dentry *dentry,tux3_symlink206,4599
static int tux_del_dirent(struct inode *dir, struct dentry *dentry)tux_del_dirent223,4990
static int tux3_unlink(struct inode *dir, struct dentry *dentry)tux3_unlink239,5364
static int tux3_rmdir(struct inode *dir, struct dentry *dentry)tux3_rmdir261,5867
static int tux3_rename(struct inode *old_dir, struct dentry *old_dentry,tux3_rename289,6499
const struct file_operations tux_dir_fops = {tux_dir_fops404,9556
const struct inode_operations tux_dir_iops = {tux_dir_iops411,9719

kernel/ileaf.c,2642
#define trace trace16,342
struct ileaf {ileaf19,373
	__be16 magic;		/* Magic number */magic20,388
	__be16 count;		/* Counts of used offset info entries */count21,423
	u32 pad;pad22,480
	__be64 ibase;		/* Base inode number */ibase23,490
	char table[];		/* ileaf data: inode attrs ... offset info */table24,530
static inline __be16 *ileaf_dict(struct btree *btree, struct ileaf *ileaf)ileaf_dict36,905
static inline unsigned __atdict(__be16 *dict, unsigned at)__atdict45,1132
static inline unsigned atdict(__be16 *dict, unsigned at)atdict55,1345
static inline void add_idict(__be16 *dict, int n)add_idict64,1545
static inline unsigned icount(struct ileaf *leaf)icount73,1725
static inline tuxkey_t ibase(struct ileaf *leaf)ibase82,1915
static void ileaf_btree_init(struct btree *btree)ileaf_btree_init91,2104
static int ileaf_init(struct btree *btree, void *leaf)ileaf_init100,2320
static int ileaf_need(struct btree *btree, struct ileaf *ileaf)ileaf_need114,2667
static int ileaf_free(struct btree *btree, struct ileaf *ileaf)ileaf_free125,2965
static int ileaf_sniff(struct btree *btree, void *leaf)ileaf_sniff135,3217
static int ileaf_can_free(struct btree *btree, void *leaf)ileaf_can_free145,3497
static void ileaf_dump(struct btree *btree, void *vleaf)ileaf_dump155,3719
void *ileaf_lookup(struct btree *btree, inum_t inum, struct ileaf *leaf, unsigned *result)ileaf_lookup196,4781
static int isinorder(struct btree *btree, struct ileaf *leaf)isinorder217,5361
int ileaf_check(struct btree *btree, struct ileaf *leaf)ileaf_check232,5738
static void ileaf_trim(struct btree *btree, struct ileaf *leaf)ileaf_trim253,6178
#define SPLIT_AT_INUMSPLIT_AT_INUM269,6575
static tuxkey_t ileaf_split(struct btree *btree, tuxkey_t hint,ileaf_split271,6598
static int ileaf_merge(struct btree *btree, void *vinto, void *vfrom)ileaf_merge327,8428
static int ileaf_chop(struct btree *btree, tuxkey_t start, u64 len, void *leaf)ileaf_chop384,9772
static void *ileaf_resize(struct btree *btree, tuxkey_t inum, void *vleaf,ileaf_resize424,10611
static tuxkey_t ileaf_split_hint(struct btree *btree, struct ileaf *ileaf,ileaf_split_hint490,12172
static int ileaf_write(struct btree *btree, tuxkey_t key_bottom,ileaf_write513,12670
static int ileaf_read(struct btree *btree, tuxkey_t key_bottom,ileaf_read548,13526
struct btree_ops itree_ops = {itree_ops569,14110
struct btree_ops otree_ops = {otree_ops585,14477
int ileaf_find_free(struct btree *btree, tuxkey_t key_bottom,ileaf_find_free609,14954
int ileaf_enumerate(struct btree *btree, tuxkey_t key_bottom,ileaf_enumerate649,15720

kernel/tux3_fork.h,97
#define TUX3_FORK_HTUX3_FORK_H2,20
#define TUX3_DEFINE_STATE_FNS(TUX3_DEFINE_STATE_FNS14,169

kernel/dirty-buffer.h,449
#define ATOMIC_COMMIT_HATOMIC_COMMIT_H2,24
static inline void mark_buffer_dirty_atomic(struct buffer_head *buffer)mark_buffer_dirty_atomic14,279
static inline void mark_buffer_dirty_non(struct buffer_head *buffer)mark_buffer_dirty_non20,434
static inline void mark_buffer_unify_atomic(struct buffer_head *buffer)mark_buffer_unify_atomic26,602
static inline void mark_buffer_unify_non(struct buffer_head *buffer)mark_buffer_unify_non32,779

kernel/replay.c,1220
#define trace trace9,81
#define X(X13,146
#undef XX34,564
static const char *log_name[] = {log_name12,112
static struct replay *alloc_replay(struct sb *sb, unsigned logcount)alloc_replay37,577
static void free_replay(struct replay *rp)free_replay60,1072
static int replay_check_log(struct replay *rp, struct buffer_head *logbuf)replay_check_log71,1317
static void replay_unpin_logblocks(struct sb *sb, unsigned i, unsigned logcount)replay_unpin_logblocks113,2359
static struct replay *replay_prepare(struct sb *sb)replay_prepare132,2787
static void replay_done(struct replay *rp)replay_done188,4036
typedef int (*replay_log_t)(struct replay *, struct buffer_head *);replay_log_t204,4411
static int replay_log_stage1(struct replay *rp, struct buffer_head *logbuf)replay_log_stage1206,4480
static int replay_log_stage2(struct replay *rp, struct buffer_head *logbuf)replay_log_stage2361,8344
static int replay_logblocks(struct replay *rp, replay_log_t replay_log_func)replay_logblocks538,12767
struct replay *replay_stage1(struct sb *sb)replay_stage1563,13359
int replay_stage2(struct replay *rp)replay_stage2581,13756
int replay_stage3(struct replay *rp, int apply)replay_stage3611,14272

kernel/buffer_writebacklib.c,215
static int tux3_clear_page_dirty_for_io(struct page *page)tux3_clear_page_dirty_for_io24,860
static void __tux3_test_set_page_writeback(struct page *page, int old_writeback)__tux3_test_set_page_writeback84,2769

kernel/commit.c,3229
#define trace trace14,198
#define ALLOW_FRONTEND_MODIFYALLOW_FRONTEND_MODIFY27,562
static void init_sb(struct sb *sb)init_sb30,628
static void setup_roots(struct sb *sb, struct disksuper *super)setup_roots62,1460
static loff_t calc_maxbytes(loff_t blocksize)calc_maxbytes74,1861
static void __setup_sb(struct sb *sb, struct disksuper *super)__setup_sb84,2122
void setup_sb(struct sb *sb, struct disksuper *super)setup_sb133,3927
int load_sb(struct sb *sb)load_sb144,4185
int save_sb(struct sb *sb)save_sb167,4636
static int relog_frontend_defer_as_bfree(struct sb *sb, u64 val)relog_frontend_defer_as_bfree192,5427
static int relog_as_bfree(struct sb *sb, u64 val)relog_as_bfree202,5664
static void new_cycle_log(struct sb *sb)new_cycle_log213,5976
static int unify_log(struct sb *sb)unify_log240,6779
static int stage_delta(struct sb *sb, unsigned delta)stage_delta333,9506
static int write_btree(struct sb *sb, unsigned delta)write_btree359,10061
static int write_log(struct sb *sb)write_log374,10490
int apply_defered_bfree(struct sb *sb, u64 val)apply_defered_bfree388,10799
static int commit_delta(struct sb *sb)commit_delta397,11005
static void post_commit(struct sb *sb, unsigned delta)post_commit412,11367
static int need_unify(struct sb *sb)need_unify427,11726
enum unify_flags { NO_UNIFY, ALLOW_UNIFY, FORCE_UNIFY, };unify_flags437,11925
enum unify_flags { NO_UNIFY, ALLOW_UNIFY, FORCE_UNIFY, };NO_UNIFY437,11925
enum unify_flags { NO_UNIFY, ALLOW_UNIFY, FORCE_UNIFY, };ALLOW_UNIFY437,11925
enum unify_flags { NO_UNIFY, ALLOW_UNIFY, FORCE_UNIFY, };FORCE_UNIFY437,11925
void tux3_start_backend(struct sb *sb)tux3_start_backend440,12004
void tux3_end_backend(void)tux3_end_backend450,12218
int tux3_under_backend(struct sb *sb)tux3_under_backend461,12450
static int do_commit(struct sb *sb, enum unify_flags unify_flag)do_commit470,12631
static int flush_delta(struct sb *sb)flush_delta545,14476
static struct delta_ref *delta_get(struct sb *sb)delta_get577,15211
static void delta_put(struct sb *sb, struct delta_ref *delta_ref)delta_put601,15851
static void __delta_transition(struct sb *sb, struct delta_ref *delta_ref)__delta_transition618,16321
static void delta_transition(struct sb *sb)delta_transition647,17083
#define delta_after_eq(delta_after_eq688,18141
int force_unify(struct sb *sb)force_unify696,18329
int force_delta(struct sb *sb)force_delta705,18511
unsigned tux3_get_current_delta(void)tux3_get_current_delta714,18690
unsigned tux3_inode_delta(struct inode *inode)tux3_inode_delta726,18989
void change_begin_atomic(struct sb *sb)change_begin_atomic762,19868
void change_end_atomic(struct sb *sb)change_end_atomic773,20171
void change_begin_atomic_nested(struct sb *sb, void **ptr)change_begin_atomic_nested791,20664
void change_end_atomic_nested(struct sb *sb, void *ptr)change_end_atomic_nested802,20917
static int need_delta(struct sb *sb)need_delta812,21133
void change_begin(struct sb *sb)change_begin830,21593
int change_end(struct sb *sb)change_end842,21832
void change_begin_if_needed(struct sb *sb)change_begin_if_needed882,22566
void change_end_if_needed(struct sb *sb)change_end_if_needed892,22771

kernel/dir.c,2025
#define TUX_DIR_ALIGN	TUX_DIR_ALIGN29,773
#define TUX_DIR_HEAD	TUX_DIR_HEAD30,811
#define TUX_REC_LEN(TUX_REC_LEN31,862
#define TUX_MAX_REC_LEN	TUX_MAX_REC_LEN32,940
static inline unsigned tux_rec_len_from_disk(__be16 dlen)tux_rec_len_from_disk34,982
static inline __be16 tux_rec_len_to_disk(unsigned len)tux_rec_len_to_disk47,1242
static inline int is_deleted(tux_dirent *entry)is_deleted59,1518
static inline int tux_match(tux_dirent *entry, const char *const name,tux_match68,1729
static inline tux_dirent *next_entry(tux_dirent *entry)next_entry82,2045
	TUX_UNKNOWN,TUX_UNKNOWN92,2277
	TUX_REG,TUX_REG93,2291
	TUX_DIR,TUX_DIR94,2301
	TUX_CHR,TUX_CHR95,2311
	TUX_BLK,TUX_BLK96,2321
	TUX_FIFO,TUX_FIFO97,2331
	TUX_SOCK,TUX_SOCK98,2342
	TUX_LNK,TUX_LNK99,2353
	TUX_TYPESTUX_TYPES100,2363
#define STAT_SHIFT STAT_SHIFT103,2378
static unsigned char tux_type_by_mode[S_IFMT >> STAT_SHIFT] = {tux_type_by_mode105,2401
#define tux_zero_len_error(tux_zero_len_error115,2724
static void tux_update_entry(struct buffer_head *buffer, tux_dirent *entry,tux_update_entry120,2902
void tux_update_dirent(struct inode *dir, struct buffer_head *buffer,tux_update_dirent137,3407
loff_t tux_create_entry(struct inode *dir, const char *name, unsigned len,tux_create_entry153,3842
int tux_create_dirent(struct inode *dir, const struct qstr *qstr, inum_t inum,tux_create_dirent237,6186
tux_dirent *tux_find_entry(struct inode *dir, const char *name, unsigned len,tux_find_entry259,6649
tux_dirent *tux_find_dirent(struct inode *dir, const struct qstr *qstr,tux_find_dirent299,7670
static unsigned char filetype[TUX_TYPES] = {filetype310,7980
int tux_readdir(struct file *file, void *state, filldir_t filldir)tux_readdir321,8209
int tux_delete_entry(struct inode *dir, struct buffer_head *buffer,tux_delete_entry380,9929
int tux_delete_dirent(struct inode *dir, struct buffer_head *buffer,tux_delete_dirent428,11098
int tux_dir_is_empty(struct inode *dir)tux_dir_is_empty447,11510

libklib/kdev_t.h,530
#define LIBKLIB_KDEV_T_HLIBKLIB_KDEV_T_H2,25
#define MINORBITS	MINORBITS4,51
#define MINORMASK	MINORMASK5,72
#define MAJOR(MAJOR7,115
#define MINOR(MINOR8,172
#define MKDEV(MKDEV9,228
static inline u32 new_encode_dev(dev_t dev)new_encode_dev11,279
static inline dev_t new_decode_dev(u32 dev)new_decode_dev18,453
static inline int huge_valid_dev(dev_t dev)huge_valid_dev25,629
static inline u64 huge_encode_dev(dev_t dev)huge_encode_dev30,689
static inline dev_t huge_decode_dev(u64 dev)huge_decode_dev35,768

libklib/byteorder.h,53
#define LIBKLIB_BYTEORDER_HLIBKLIB_BYTEORDER_H2,28

libklib/list.h,5470
#define LIBKLIB_LIST_HLIBKLIB_LIST_H3,64
#define container_of(container_of5,88
#define LIST_POISON1 LIST_POISON19,245
#define LIST_POISON2 LIST_POISON210,289
struct list_head { struct list_head *next, *prev; };list_head12,334
struct list_head { struct list_head *next, *prev; };next12,334
struct list_head { struct list_head *next, *prev; };prev12,334
#define LIST_HEAD_INIT(LIST_HEAD_INIT24,728
#define LIST_HEAD(LIST_HEAD26,779
static inline void INIT_LIST_HEAD(struct list_head *list)INIT_LIST_HEAD29,852
static inline void __list_add(struct list_head *new,__list_add41,1121
static inline void list_add(struct list_head *new, struct list_head *head)list_add59,1518
static inline void list_add_tail(struct list_head *new, struct list_head *head)list_add_tail73,1841
static inline void __list_del(struct list_head * prev, struct list_head * next)__list_del85,2146
static inline void __list_del_entry(struct list_head *entry)__list_del_entry97,2469
static inline void list_del(struct list_head *entry)list_del102,2574
static inline void list_replace(struct list_head *old,list_replace116,2906
static inline void list_replace_init(struct list_head *old,list_replace_init125,3089
static inline void list_del_init(struct list_head *entry)list_del_init136,3349
static inline void list_move(struct list_head *list, struct list_head *head)list_move147,3607
static inline void list_move_tail(struct list_head *list,list_move_tail158,3886
static inline int list_is_last(const struct list_head *list,list_is_last170,4169
static inline int list_empty(const struct list_head *head)list_empty180,4379
static inline int list_empty_careful(const struct list_head *head)list_empty_careful198,4960
static inline void list_rotate_left(struct list_head *head)list_rotate_left208,5207
static inline int list_is_singular(const struct list_head *head)list_is_singular222,5480
static inline void __list_cut_position(struct list_head *list,__list_cut_position227,5607
static inline void list_cut_position(struct list_head *list,list_cut_position253,6389
static inline void __list_splice(const struct list_head *list,__list_splice267,6714
static inline void list_splice(const struct list_head *list,list_splice286,7150
static inline void list_splice_tail(struct list_head *list,list_splice_tail298,7459
static inline void list_splice_init(struct list_head *list,list_splice_init312,7818
static inline void list_splice_tail_init(struct list_head *list,list_splice_tail_init329,8247
#define list_entry(list_entry344,8648
#define list_first_entry(list_first_entry355,8999
#define list_for_each(list_for_each363,9222
#define __list_for_each(__list_for_each374,9563
#define list_for_each_prev(list_for_each_prev382,9811
#define list_for_each_safe(list_for_each_safe391,10149
#define list_for_each_prev_safe(list_for_each_prev_safe401,10531
#define list_for_each_entry(list_for_each_entry412,10879
#define list_for_each_entry_reverse(list_for_each_entry_reverse423,11313
#define list_prepare_entry(list_prepare_entry436,11847
#define list_for_each_entry_continue(list_for_each_entry_continue448,12264
#define list_for_each_entry_continue_reverse(list_for_each_entry_continue_reverse462,12814
#define list_for_each_entry_from(list_for_each_entry_from475,13348
#define list_for_each_entry_safe(list_for_each_entry_safe486,13798
#define list_for_each_entry_safe_continue(list_for_each_entry_safe_continue502,14475
#define list_for_each_entry_safe_from(list_for_each_entry_safe_from518,15164
#define list_for_each_entry_safe_reverse(list_for_each_entry_safe_reverse533,15771
#define list_safe_reset_next(list_safe_reset_next551,16678
struct hlist_head {hlist_head561,16986
	struct hlist_node *first;first562,17006
struct hlist_node {hlist_node565,17037
	struct hlist_node *next, **pprev;next566,17057
	struct hlist_node *next, **pprev;pprev566,17057
#define HLIST_HEAD_INIT HLIST_HEAD_INIT569,17096
#define HLIST_HEAD(HLIST_HEAD570,17138
#define INIT_HLIST_HEAD(INIT_HLIST_HEAD571,17207
static inline void INIT_HLIST_NODE(struct hlist_node *h)INIT_HLIST_NODE572,17258
static inline int hlist_unhashed(const struct hlist_node *h)hlist_unhashed578,17355
static inline int hlist_empty(const struct hlist_head *h)hlist_empty583,17440
static inline void __hlist_del(struct hlist_node *n)__hlist_del588,17522
static inline void hlist_del(struct hlist_node *n)hlist_del597,17705
static inline void hlist_del_init(struct hlist_node *n)hlist_del_init604,17829
static inline void hlist_add_head(struct hlist_node *n, struct hlist_head *h)hlist_add_head612,17960
static inline void hlist_add_before(struct hlist_node *n,hlist_add_before623,18203
static inline void hlist_add_after(struct hlist_node *n,hlist_add_after632,18381
static inline void hlist_add_fake(struct hlist_node *n)hlist_add_fake644,18665
static inline void hlist_move_list(struct hlist_head *old,hlist_move_list653,18863
#define hlist_entry(hlist_entry662,19056
#define hlist_for_each(hlist_for_each664,19126
#define hlist_for_each_safe(hlist_for_each_safe667,19213
#define hlist_entry_safe(hlist_entry_safe671,19334
#define hlist_for_each_entry(hlist_for_each_entry682,19682
#define hlist_for_each_entry_continue(hlist_for_each_entry_continue692,20097
#define hlist_for_each_entry_from(hlist_for_each_entry_from702,20514
#define hlist_for_each_entry_safe(hlist_for_each_entry_safe713,20968

libklib/slab.h,1445
#define LIBKLIB_SLAB_HLIBKLIB_SLAB_H2,23
#define SLAB_DEBUG_FREE	SLAB_DEBUG_FREE10,189
#define SLAB_RED_ZONE	SLAB_RED_ZONE11,275
#define SLAB_POISON	SLAB_POISON12,349
#define SLAB_HWCACHE_ALIGN	SLAB_HWCACHE_ALIGN13,411
#define SLAB_CACHE_DMA	SLAB_CACHE_DMA14,483
#define SLAB_STORE_USER	SLAB_STORE_USER15,545
#define SLAB_PANIC	SLAB_PANIC16,633
#define SLAB_DESTROY_BY_RCU	SLAB_DESTROY_BY_RCU45,1591
#define SLAB_MEM_SPREAD	SLAB_MEM_SPREAD46,1665
#define SLAB_TRACE	SLAB_TRACE47,1740
# define SLAB_DEBUG_OBJECTS	SLAB_DEBUG_OBJECTS51,1873
# define SLAB_DEBUG_OBJECTS	SLAB_DEBUG_OBJECTS53,1920
#define SLAB_NOLEAKTRACE	SLAB_NOLEAKTRACE56,1969
# define SLAB_NOTRACK	SLAB_NOTRACK60,2107
# define SLAB_NOTRACK	SLAB_NOTRACK62,2149
# define SLAB_FAILSLAB	SLAB_FAILSLAB65,2215
# define SLAB_FAILSLAB	SLAB_FAILSLAB67,2285
#define SLAB_RECLAIM_ACCOUNT	SLAB_RECLAIM_ACCOUNT71,2409
#define SLAB_TEMPORARY	SLAB_TEMPORARY72,2482
struct kmem_cache {kmem_cache74,2558
	unsigned int object_size;	/* The original size of the object */object_size75,2578
	unsigned int align;		/* Alignment as calculated */align76,2643
	unsigned long flags;		/* Active flags on the slab */flags77,2695
	const char *name;		/* Slab name for sysfs */name78,2749
	void (*ctor)(void *);		/* Called on object slot creation */ctor79,2795
static inline void *kmem_cache_zalloc(struct kmem_cache *k, gfp_t flags)kmem_cache_zalloc93,3150

libklib/log2.h,539
#define LIBKLIB_LOG2_HLIBKLIB_LOG2_H2,23
int __ilog2_u32(u32 n)__ilog2_u3221,531
int __ilog2_u64(u64 n)__ilog2_u6429,654
bool is_power_of_2(unsigned long n)is_power_of_241,855
unsigned long __roundup_pow_of_two(unsigned long n)__roundup_pow_of_two50,1015
unsigned long __rounddown_pow_of_two(unsigned long n)__rounddown_pow_of_two59,1183
#define ilog2(ilog274,1618
#define roundup_pow_of_two(roundup_pow_of_two157,4011
#define rounddown_pow_of_two(rounddown_pow_of_two174,4465
#define order_base_2(order_base_2195,4866

libklib/byteorder/little_endian.h,2832
#define LIBKLIB_BYTEORDER_LITTLE_ENDIAN_HLIBKLIB_BYTEORDER_LITTLE_ENDIAN_H2,42
#define __constant_cpu_to_le64(__constant_cpu_to_le6413,421
#define __constant_le64_to_cpu(__constant_le64_to_cpu14,484
#define __constant_cpu_to_le32(__constant_cpu_to_le3215,547
#define __constant_le32_to_cpu(__constant_le32_to_cpu16,610
#define __constant_cpu_to_le16(__constant_cpu_to_le1617,673
#define __constant_le16_to_cpu(__constant_le16_to_cpu18,736
#define __constant_cpu_to_be64(__constant_cpu_to_be6419,799
#define __constant_be64_to_cpu(__constant_be64_to_cpu20,875
#define __constant_cpu_to_be32(__constant_cpu_to_be3221,956
#define __constant_be32_to_cpu(__constant_be32_to_cpu22,1032
#define __constant_cpu_to_be16(__constant_cpu_to_be1623,1113
#define __constant_be16_to_cpu(__constant_be16_to_cpu24,1189
#define __cpu_to_le64(__cpu_to_le6425,1270
#define __le64_to_cpu(__le64_to_cpu26,1324
#define __cpu_to_le32(__cpu_to_le3227,1378
#define __le32_to_cpu(__le32_to_cpu28,1432
#define __cpu_to_le16(__cpu_to_le1629,1486
#define __le16_to_cpu(__le16_to_cpu30,1540
#define __cpu_to_be64(__cpu_to_be6431,1594
#define __be64_to_cpu(__be64_to_cpu32,1651
#define __cpu_to_be32(__cpu_to_be3233,1713
#define __be32_to_cpu(__be32_to_cpu34,1770
#define __cpu_to_be16(__cpu_to_be1635,1832
#define __be16_to_cpu(__be16_to_cpu36,1889
static inline __le64 __cpu_to_le64p(const __u64 *p)__cpu_to_le64p38,1952
static inline __u64 __le64_to_cpup(const __le64 *p)__le64_to_cpup42,2036
static inline __le32 __cpu_to_le32p(const __u32 *p)__cpu_to_le32p46,2119
static inline __u32 __le32_to_cpup(const __le32 *p)__le32_to_cpup50,2203
static inline __le16 __cpu_to_le16p(const __u16 *p)__cpu_to_le16p54,2286
static inline __u16 __le16_to_cpup(const __le16 *p)__le16_to_cpup58,2370
static inline __be64 __cpu_to_be64p(const __u64 *p)__cpu_to_be64p62,2453
static inline __u64 __be64_to_cpup(const __be64 *p)__be64_to_cpup66,2547
static inline __be32 __cpu_to_be32p(const __u32 *p)__cpu_to_be32p70,2634
static inline __u32 __be32_to_cpup(const __be32 *p)__be32_to_cpup74,2728
static inline __be16 __cpu_to_be16p(const __u16 *p)__cpu_to_be16p78,2815
static inline __u16 __be16_to_cpup(const __be16 *p)__be16_to_cpup82,2909
#define __cpu_to_le64s(__cpu_to_le64s86,2996
#define __le64_to_cpus(__le64_to_cpus87,3050
#define __cpu_to_le32s(__cpu_to_le32s88,3104
#define __le32_to_cpus(__le32_to_cpus89,3158
#define __cpu_to_le16s(__cpu_to_le16s90,3212
#define __le16_to_cpus(__le16_to_cpus91,3266
#define __cpu_to_be64s(__cpu_to_be64s92,3320
#define __be64_to_cpus(__be64_to_cpus93,3361
#define __cpu_to_be32s(__cpu_to_be32s94,3402
#define __be32_to_cpus(__be32_to_cpus95,3443
#define __cpu_to_be16s(__cpu_to_be16s96,3484
#define __be16_to_cpus(__be16_to_cpus97,3525

libklib/byteorder/generic.h,2070
#define LIBKLIB_BYTEORDER_GENERIC_HLIBKLIB_BYTEORDER_GENERIC_H2,36
#define cpu_to_le64 cpu_to_le6485,3189
#define le64_to_cpu le64_to_cpu86,3223
#define cpu_to_le32 cpu_to_le3287,3257
#define le32_to_cpu le32_to_cpu88,3291
#define cpu_to_le16 cpu_to_le1689,3325
#define le16_to_cpu le16_to_cpu90,3359
#define cpu_to_be64 cpu_to_be6491,3393
#define be64_to_cpu be64_to_cpu92,3427
#define cpu_to_be32 cpu_to_be3293,3461
#define be32_to_cpu be32_to_cpu94,3495
#define cpu_to_be16 cpu_to_be1695,3529
#define be16_to_cpu be16_to_cpu96,3563
#define cpu_to_le64p cpu_to_le64p97,3597
#define le64_to_cpup le64_to_cpup98,3633
#define cpu_to_le32p cpu_to_le32p99,3669
#define le32_to_cpup le32_to_cpup100,3705
#define cpu_to_le16p cpu_to_le16p101,3741
#define le16_to_cpup le16_to_cpup102,3777
#define cpu_to_be64p cpu_to_be64p103,3813
#define be64_to_cpup be64_to_cpup104,3849
#define cpu_to_be32p cpu_to_be32p105,3885
#define be32_to_cpup be32_to_cpup106,3921
#define cpu_to_be16p cpu_to_be16p107,3957
#define be16_to_cpup be16_to_cpup108,3993
#define cpu_to_le64s cpu_to_le64s109,4029
#define le64_to_cpus le64_to_cpus110,4065
#define cpu_to_le32s cpu_to_le32s111,4101
#define le32_to_cpus le32_to_cpus112,4137
#define cpu_to_le16s cpu_to_le16s113,4173
#define le16_to_cpus le16_to_cpus114,4209
#define cpu_to_be64s cpu_to_be64s115,4245
#define be64_to_cpus be64_to_cpus116,4281
#define cpu_to_be32s cpu_to_be32s117,4317
#define be32_to_cpus be32_to_cpus118,4353
#define cpu_to_be16s cpu_to_be16s119,4389
#define be16_to_cpus be16_to_cpus120,4425
static inline void le16_add_cpu(__le16 *var, u16 val)le16_add_cpu144,4964
static inline void le32_add_cpu(__le32 *var, u32 val)le32_add_cpu149,5069
static inline void le64_add_cpu(__le64 *var, u64 val)le64_add_cpu154,5174
static inline void be16_add_cpu(__be16 *var, u16 val)be16_add_cpu159,5279
static inline void be32_add_cpu(__be32 *var, u32 val)be32_add_cpu164,5384
static inline void be64_add_cpu(__be64 *var, u64 val)be64_add_cpu169,5489

libklib/byteorder/big_endian.h,2826
#define LIBKLIB_BYTEORDER_BIG_ENDIAN_HLIBKLIB_BYTEORDER_BIG_ENDIAN_H2,39
#define __constant_cpu_to_le64(__constant_cpu_to_le6413,367
#define __constant_le64_to_cpu(__constant_le64_to_cpu14,443
#define __constant_cpu_to_le32(__constant_cpu_to_le3215,524
#define __constant_le32_to_cpu(__constant_le32_to_cpu16,600
#define __constant_cpu_to_le16(__constant_cpu_to_le1617,681
#define __constant_le16_to_cpu(__constant_le16_to_cpu18,757
#define __constant_cpu_to_be64(__constant_cpu_to_be6419,838
#define __constant_be64_to_cpu(__constant_be64_to_cpu20,901
#define __constant_cpu_to_be32(__constant_cpu_to_be3221,964
#define __constant_be32_to_cpu(__constant_be32_to_cpu22,1027
#define __constant_cpu_to_be16(__constant_cpu_to_be1623,1090
#define __constant_be16_to_cpu(__constant_be16_to_cpu24,1153
#define __cpu_to_le64(__cpu_to_le6425,1216
#define __le64_to_cpu(__le64_to_cpu26,1273
#define __cpu_to_le32(__cpu_to_le3227,1335
#define __le32_to_cpu(__le32_to_cpu28,1392
#define __cpu_to_le16(__cpu_to_le1629,1454
#define __le16_to_cpu(__le16_to_cpu30,1511
#define __cpu_to_be64(__cpu_to_be6431,1573
#define __be64_to_cpu(__be64_to_cpu32,1627
#define __cpu_to_be32(__cpu_to_be3233,1681
#define __be32_to_cpu(__be32_to_cpu34,1735
#define __cpu_to_be16(__cpu_to_be1635,1789
#define __be16_to_cpu(__be16_to_cpu36,1843
static inline __le64 __cpu_to_le64p(const __u64 *p)__cpu_to_le64p38,1898
static inline __u64 __le64_to_cpup(const __le64 *p)__le64_to_cpup42,1992
static inline __le32 __cpu_to_le32p(const __u32 *p)__cpu_to_le32p46,2079
static inline __u32 __le32_to_cpup(const __le32 *p)__le32_to_cpup50,2173
static inline __le16 __cpu_to_le16p(const __u16 *p)__cpu_to_le16p54,2260
static inline __u16 __le16_to_cpup(const __le16 *p)__le16_to_cpup58,2354
static inline __be64 __cpu_to_be64p(const __u64 *p)__cpu_to_be64p62,2441
static inline __u64 __be64_to_cpup(const __be64 *p)__be64_to_cpup66,2525
static inline __be32 __cpu_to_be32p(const __u32 *p)__cpu_to_be32p70,2608
static inline __u32 __be32_to_cpup(const __be32 *p)__be32_to_cpup74,2692
static inline __be16 __cpu_to_be16p(const __u16 *p)__cpu_to_be16p78,2775
static inline __u16 __be16_to_cpup(const __be16 *p)__be16_to_cpup82,2859
#define __cpu_to_le64s(__cpu_to_le64s86,2942
#define __le64_to_cpus(__le64_to_cpus87,2983
#define __cpu_to_le32s(__cpu_to_le32s88,3024
#define __le32_to_cpus(__le32_to_cpus89,3065
#define __cpu_to_le16s(__cpu_to_le16s90,3106
#define __le16_to_cpus(__le16_to_cpus91,3147
#define __cpu_to_be64s(__cpu_to_be64s92,3188
#define __be64_to_cpus(__be64_to_cpus93,3242
#define __cpu_to_be32s(__cpu_to_be32s94,3296
#define __be32_to_cpus(__be32_to_cpus95,3350
#define __cpu_to_be16s(__cpu_to_be16s96,3404
#define __be16_to_cpus(__be16_to_cpus97,3458

libklib/bitops/le.h,1083
#define LIBKLIB_BITOPS_LE_HLIBKLIB_BITOPS_LE_H2,28
#define BITOP_LE_SWIZZLE	BITOP_LE_SWIZZLE8,115
static inline unsigned long find_next_zero_bit_le(const void *addr,find_next_zero_bit_le10,143
static inline unsigned long find_next_bit_le(const void *addr,find_next_bit_le16,308
static inline unsigned long find_first_zero_bit_le(const void *addr,find_first_zero_bit_le22,463
#define BITOP_LE_SWIZZLE	BITOP_LE_SWIZZLE30,636
#define find_first_zero_bit_le(find_first_zero_bit_le38,898
static inline int test_bit_le(int nr, const void *addr)test_bit_le45,1028
static inline void __set_bit_le(int nr, void *addr)__set_bit_le50,1136
static inline void __clear_bit_le(int nr, void *addr)__clear_bit_le55,1234
static inline int test_and_set_bit_le(int nr, void *addr)test_and_set_bit_le60,1336
static inline int test_and_clear_bit_le(int nr, void *addr)test_and_clear_bit_le65,1454
static inline int __test_and_set_bit_le(int nr, void *addr)__test_and_set_bit_le70,1576
static inline int __test_and_clear_bit_le(int nr, void *addr)__test_and_clear_bit_le75,1698

libklib/bitops/__fls.h,133
#define LIBKLIB_BITOPS__FLS_HLIBKLIB_BITOPS__FLS_H2,30
static __always_inline unsigned long __fls(unsigned long word)__fls10,237

libklib/bitops/fls64.h,169
#define LIBKLIB_BITOPS_FLS64_HLIBKLIB_BITOPS_FLS64_H2,31
static __always_inline int fls64(__u64 x)fls6416,464
static __always_inline int fls64(__u64 x)fls6424,602

libklib/bitops/find.h,158
#define LIBKLIB_BITOPS_FIND_HLIBKLIB_BITOPS_FIND_H2,30
#define find_first_bit(find_first_bit9,275
#define find_first_zero_bit(find_first_zero_bit10,343

libklib/bitops/fls.h,104
#define LIBKLIB_BITOPS_FLS_HLIBKLIB_BITOPS_FLS_H2,29
static __always_inline int fls(int x)fls12,237

libklib/bitops/__ffs.h,133
#define LIBKLIB_BITOPS__FFS_HLIBKLIB_BITOPS__FFS_H2,30
static __always_inline unsigned long __ffs(unsigned long word)__ffs10,205

libklib/bitops/non-atomic.h,707
#define LIBKLIB_BITOPS_NON_ATOMIC_HLIBKLIB_BITOPS_NON_ATOMIC_H2,36
static inline void __set_bit(int nr, volatile unsigned long *addr)__set_bit13,376
static inline void __clear_bit(int nr, volatile unsigned long *addr)__clear_bit21,559
static inline void __change_bit(int nr, volatile unsigned long *addr)__change_bit38,1059
static inline int __test_and_set_bit(int nr, volatile unsigned long *addr)__test_and_set_bit55,1559
static inline int __test_and_clear_bit(int nr, volatile unsigned long *addr)__test_and_clear_bit74,2127
static inline int __test_and_change_bit(int nr,__test_and_change_bit85,2428
static inline int test_bit(int nr, const volatile unsigned long *addr)test_bit101,2808

libklib/bitops/atomic.h,726
#define LIBKLIB_BITOPS_ATOMIC_HLIBKLIB_BITOPS_ATOMIC_H2,32
#define _atomic_spin_lock(_atomic_spin_lock6,143
#define _atomic_spin_unlock(_atomic_spin_unlock7,172
static inline void set_bit(int nr, volatile unsigned long *addr)set_bit35,1154
static inline void clear_bit(int nr, volatile unsigned long *addr)clear_bit55,1777
static inline void change_bit(int nr, volatile unsigned long *addr)change_bit75,2351
static inline int test_and_set_bit(int nr, volatile unsigned long *addr)test_and_set_bit94,2847
static inline int test_and_clear_bit(int nr, volatile unsigned long *addr)test_and_clear_bit117,3427
static inline int test_and_change_bit(int nr, volatile unsigned long *addr)test_and_change_bit139,3948

libklib/bitops/ffz.h,79
#define LIBKLIB_BITOPS_FFZ_HLIBKLIB_BITOPS_FFZ_H2,29
#define ffz(ffz10,205

libklib/types.h,1133
#define LIBKLIB_TYPES_HLIBKLIB_TYPES_H2,24
typedef unsigned short		umode_t;umode_t6,80
typedef signed char		__s8;__s88,114
typedef unsigned char		__u8;__u89,141
typedef signed short		__s16;__s1610,170
typedef unsigned short		__u16;__u1611,199
typedef signed int		__s32;__s3212,230
typedef unsigned int		__u32;__u3213,257
typedef signed long long	__s64;__s6414,286
typedef unsigned long long	__u64;__u6415,318
typedef signed char		s8;s817,353
typedef unsigned char		u8;u818,378
typedef signed short		s16;s1619,405
typedef unsigned short		u16;u1620,432
typedef signed int		s32;s3221,461
typedef unsigned int		u32;u3222,486
typedef signed long long	s64;s6423,513
typedef unsigned long long	u64;u6424,543
#define __bitwise __bitwise27,600
#define __bitwise__bitwise29,636
typedef __u16 __bitwise __le16;__le1632,662
typedef __u16 __bitwise __be16;__be1633,694
typedef __u32 __bitwise __le32;__le3234,726
typedef __u32 __bitwise __be32;__be3235,758
typedef __u64 __bitwise __le64;__le6436,790
typedef __u64 __bitwise __be64;__be6437,822
typedef unsigned __bitwise__ gfp_t;gfp_t39,855

libklib/rcupdate.h,1350
#define LIBKLIB_RCUPDATE_HLIBKLIB_RCUPDATE_H2,27
#define rcu_lockdep_assert(rcu_lockdep_assert4,55
#define rcu_dereference_sparse(rcu_dereference_sparse16,511
#define rcu_dereference_sparse(rcu_dereference_sparse19,625
#define __rcu_access_pointer(__rcu_access_pointer22,705
#define __rcu_dereference_check(__rcu_dereference_check28,913
#define __rcu_dereference_protected(__rcu_dereference_protected37,1245
#define __rcu_access_index(__rcu_access_index45,1477
#define __rcu_dereference_index_check(__rcu_dereference_index_check51,1627
#define __rcu_assign_pointer(__rcu_assign_pointer60,1876
#define rcu_access_pointer(rcu_access_pointer86,2977
#define rcu_dereference_check(rcu_dereference_check121,4510
#define rcu_dereference_bh_check(rcu_dereference_bh_check131,4876
#define rcu_dereference_sched_check(rcu_dereference_sched_check141,5257
#define rcu_dereference_raw(rcu_dereference_raw145,5380
#define rcu_access_index(rcu_access_index159,6057
#define rcu_dereference_index_check(rcu_dereference_index_check179,7024
#define rcu_dereference_protected(rcu_dereference_protected199,7920
#define rcu_dereference(rcu_dereference209,8201
#define rcu_dereference_bh(rcu_dereference_bh217,8449
#define rcu_dereference_sched(rcu_dereference_sched225,8706
#define rcu_assign_pointer(rcu_assign_pointer250,9835

libklib/lockdebug.h,1790
#define LIBKLIB_LOCKDEBUG_HLIBKLIB_LOCKDEBUG_H2,28
#define SPINLOCK_MAGIC	SPINLOCK_MAGIC6,86
	unsigned int magic;magic9,156
	int lock;lock10,177
} spinlock_t;spinlock_t12,195
#define __SPIN_LOCK_UNLOCKED __SPIN_LOCK_UNLOCKED15,228
#define __SPIN_LOCK_UNLOCKED __SPIN_LOCK_UNLOCKED18,318
#define DEFINE_SPINLOCK(DEFINE_SPINLOCK21,373
#define spin_lock_init(spin_lock_init22,436
static inline void spin_lock(spinlock_t *lock)spin_lock24,515
static inline void spin_unlock(spinlock_t *lock)spin_unlock32,672
static inline int atomic_dec_and_lock(atomic_t *v, spinlock_t *lock)atomic_dec_and_lock49,1090
struct rw_semaphore {rw_semaphore58,1254
	unsigned int magic;magic60,1294
	int count;count61,1315
#define __RWSEM_INITIALIZER __RWSEM_INITIALIZER66,1356
#define __RWSEM_INITIALIZER __RWSEM_INITIALIZER69,1455
#define DECLARE_RWSEM(DECLARE_RWSEM72,1518
#define init_rwsem(init_rwsem73,1593
static inline void down_read(struct rw_semaphore *lock)down_read75,1665
#define down_read_nested(down_read_nested83,1833
static inline void down_write(struct rw_semaphore *lock)down_write84,1885
#define down_write_nested(down_write_nested92,2054
static inline void up_read(struct rw_semaphore *lock)up_read93,2108
static inline void up_write(struct rw_semaphore *lock)up_write101,2274
struct mutex {mutex110,2443
	struct rw_semaphore sem;sem112,2476
#define __MUTEX_INITIALIZER __MUTEX_INITIALIZER117,2531
#define __MUTEX_INITIALIZER __MUTEX_INITIALIZER120,2614
#define DEFINE_MUTEX(DEFINE_MUTEX123,2670
#define mutex_init(mutex_init124,2747
static inline void mutex_lock(struct mutex *lock)mutex_lock126,2823
#define mutex_lock_nested(mutex_lock_nested132,2927
static inline void mutex_unlock(struct mutex *lock)mutex_unlock133,2981

libklib/mm.h,832
#define LIBKLIB_MM_HLIBKLIB_MM_H2,21
#define GFP_KERNEL	GFP_KERNEL10,89
#define GFP_NOFS	GFP_NOFS11,131
#define __GFP_ZERO	__GFP_ZERO12,171
struct page {page14,216
	void *address;address15,230
#define PAGE_SIZE	PAGE_SIZE19,274
#define PAGE_CACHE_SIZE	PAGE_CACHE_SIZE20,301
static inline void *page_address(struct page *page)page_address22,336
static inline struct page *alloc_pages(gfp_t gfp_mask, unsigned order)alloc_pages27,416
#define alloc_page(alloc_page43,732
static inline void __free_pages(struct page *page, unsigned order)__free_pages45,787
#define __free_page(__free_page50,898
static inline void truncate_inode_pages_range(map_t *map, loff_t lstart, loff_t lend)truncate_inode_pages_range56,969
static inline void truncate_inode_pages(map_t *map, loff_t lstart)truncate_inode_pages61,1104

libklib/list_sort.c,272
#define MAX_LIST_LENGTH_BITS MAX_LIST_LENGTH_BITS6,70
static struct list_head *merge(void *priv,merge13,288
static void merge_and_restore_back_links(void *priv,merge_and_restore_back_links46,1149
void list_sort(void *priv, struct list_head *head,list_sort104,2663

libklib/uidgid.h,2334
#define LIBKLIB_UIDGID_HLIBKLIB_UIDGID_H2,25
#define DEFAULT_OVERFLOWUID	DEFAULT_OVERFLOWUID17,527
#define DEFAULT_OVERFLOWGID	DEFAULT_OVERFLOWGID18,561
struct user_namespace {user_namespace20,596
static inline struct user_namespace *current_user_ns(void)current_user_ns25,668
	uid_t val;val31,772
} kuid_t;kuid_t32,784
	gid_t val;val35,812
} kgid_t;kgid_t36,824
#define KUIDT_INIT(KUIDT_INIT38,835
#define KGIDT_INIT(KGIDT_INIT39,879
static inline uid_t __kuid_val(kuid_t uid)__kuid_val41,924
static inline gid_t __kgid_val(kgid_t gid)__kgid_val46,989
#define GLOBAL_ROOT_UID GLOBAL_ROOT_UID51,1054
#define GLOBAL_ROOT_GID GLOBAL_ROOT_GID52,1092
#define INVALID_UID INVALID_UID54,1131
#define INVALID_GID INVALID_GID55,1166
static inline bool uid_eq(kuid_t left, kuid_t right)uid_eq57,1202
static inline bool gid_eq(kgid_t left, kgid_t right)gid_eq62,1307
static inline bool uid_gt(kuid_t left, kuid_t right)uid_gt67,1412
static inline bool gid_gt(kgid_t left, kgid_t right)gid_gt72,1516
static inline bool uid_gte(kuid_t left, kuid_t right)uid_gte77,1620
static inline bool gid_gte(kgid_t left, kgid_t right)gid_gte82,1726
static inline bool uid_lt(kuid_t left, kuid_t right)uid_lt87,1832
static inline bool gid_lt(kgid_t left, kgid_t right)gid_lt92,1936
static inline bool uid_lte(kuid_t left, kuid_t right)uid_lte97,2040
static inline bool gid_lte(kgid_t left, kgid_t right)gid_lte102,2146
static inline bool uid_valid(kuid_t uid)uid_valid107,2252
static inline bool gid_valid(kgid_t gid)gid_valid112,2333
static inline kuid_t make_kuid(struct user_namespace *from, uid_t uid)make_kuid117,2414
static inline kgid_t make_kgid(struct user_namespace *from, gid_t gid)make_kgid122,2515
static inline uid_t from_kuid(struct user_namespace *to, kuid_t kuid)from_kuid127,2616
static inline gid_t from_kgid(struct user_namespace *to, kgid_t kgid)from_kgid132,2717
static inline uid_t from_kuid_munged(struct user_namespace *to, kuid_t kuid)from_kuid_munged137,2818
static inline gid_t from_kgid_munged(struct user_namespace *to, kgid_t kgid)from_kgid_munged145,2999
static inline bool kuid_has_mapping(struct user_namespace *ns, kuid_t uid)kuid_has_mapping153,3180
static inline bool kgid_has_mapping(struct user_namespace *ns, kgid_t gid)kgid_has_mapping158,3274

libklib/fs.c,604
void inc_nlink(struct inode *inode)inc_nlink5,48
void drop_nlink(struct inode *inode)drop_nlink14,209
void clear_nlink(struct inode *inode)clear_nlink24,400
void set_nlink(struct inode *inode, unsigned int nlink)set_nlink33,565
void d_instantiate(struct dentry *dentry, struct inode *inode)d_instantiate45,794
struct dentry *d_splice_alias(struct inode *inode, struct dentry *dentry)d_splice_alias54,989
void truncate_pagecache(struct inode *inode, loff_t oldsize, loff_t newsize)truncate_pagecache62,1159
void truncate_setsize(struct inode *inode, loff_t newsize)truncate_setsize71,1390

libklib/wait.h,1615
#define LIBKLIB_WAIT_HLIBKLIB_WAIT_H2,23
struct __wait_queue {__wait_queue10,115
typedef struct __wait_queue wait_queue_t;wait_queue_t12,140
struct __wait_queue_head {__wait_queue_head14,183
typedef struct __wait_queue_head wait_queue_head_t;wait_queue_head_t16,213
#define __WAITQUEUE_INITIALIZER(__WAITQUEUE_INITIALIZER18,266
#define DECLARE_WAITQUEUE(DECLARE_WAITQUEUE20,313
#define __WAIT_QUEUE_HEAD_INITIALIZER(__WAIT_QUEUE_HEAD_INITIALIZER23,413
#define DECLARE_WAIT_QUEUE_HEAD(DECLARE_WAIT_QUEUE_HEAD25,461
#define init_waitqueue_head(init_waitqueue_head28,564
#define DECLARE_WAIT_QUEUE_HEAD_ONSTACK(DECLARE_WAIT_QUEUE_HEAD_ONSTACK33,665
#define __wake_up(__wake_up35,742
#define wake_up(wake_up40,847
#define wake_up_nr(wake_up_nr41,903
#define wake_up_all(wake_up_all42,966
#define wake_up_locked(wake_up_locked43,1026
#define wake_up_all_locked(wake_up_all_locked44,1091
#define wake_up_interruptible(wake_up_interruptible46,1161
#define wake_up_interruptible_nr(wake_up_interruptible_nr47,1236
#define wake_up_interruptible_all(wake_up_interruptible_all48,1319
#define wake_up_interruptible_sync(wake_up_interruptible_sync49,1398
#define __wait_event(__wait_event51,1480
#define wait_event(wait_event60,1664
#define wait_event_timeout(wait_event_timeout67,1811
#define wait_event_interruptible(wait_event_interruptible75,1993
#define wait_event_interruptible_timeout(wait_event_interruptible_timeout83,2166
#define wait_event_interruptible_exclusive(wait_event_interruptible_exclusive91,2359
#define wait_event_killable(wait_event_killable99,2540

libklib/uidgid.c,54
struct user_namespace init_user_ns;init_user_ns4,24

libklib/swab.h,2035
#define LIBKLIB_SWAB_HLIBKLIB_SWAB_H2,23
#define ___constant_swab16(___constant_swab1613,284
#define ___constant_swab32(___constant_swab3217,414
#define ___constant_swab64(___constant_swab6423,653
#define ___constant_swahw32(___constant_swahw3233,1153
#define ___constant_swahb32(___constant_swahb3237,1294
static inline __attribute_const__ __u16 __fswab16(__u16 val)__fswab1647,1621
static inline __attribute_const__ __u32 __fswab32(__u32 val)__fswab3252,1710
static inline __attribute_const__ __u64 __fswab64(__u64 val)__fswab6457,1799
static inline __attribute_const__ __u32 __fswahw32(__u32 val)__fswahw3262,1888
static inline __attribute_const__ __u32 __fswahb32(__u32 val)__fswahb3271,2053
#define __swab16(__swab1684,2299
#define __swab32(__swab3293,2489
#define __swab64(__swab64102,2679
#define __swahw32(__swahw32113,2913
#define __swahb32(__swahb32124,3162
static inline __u16 __swab16p(const __u16 *p)__swab16p133,3396
static inline __u32 __swab32p(const __u32 *p)__swab32p146,3654
static inline __u64 __swab64p(const __u64 *p)__swab64p159,3912
static inline __u32 __swahw32p(const __u32 *p)__swahw32p174,4222
static inline __u32 __swahb32p(const __u32 *p)__swahb32p189,4558
static inline void __swab16s(__u16 *p)__swab16s202,4804
static inline void __swab32s(__u32 *p)__swab32s214,5029
static inline void __swab64s(__u64 *p)__swab64s227,5255
static inline void __swahw32s(__u32 *p)__swahw32s242,5532
static inline void __swahb32s(__u32 *p)__swahb32s257,5840
#define swab16 swab16266,5963
#define swab32 swab32267,5987
#define swab64 swab64268,6011
#define swahw32 swahw32269,6035
#define swahb32 swahb32270,6061
#define swab16p swab16p271,6087
#define swab32p swab32p272,6113
#define swab64p swab64p273,6139
#define swahw32p swahw32p274,6165
#define swahb32p swahb32p275,6193
#define swab16s swab16s276,6221
#define swab32s swab32s277,6247
#define swab64s swab64s278,6273
#define swahw32s swahw32s279,6299
#define swahb32s swahb32s280,6327

libklib/list_sort.h,53
#define LIBKLIB_LIST_SORT_HLIBKLIB_LIST_SORT_H2,28

libklib/fs.h,2503
#define LIBKLIB_FS_HLIBKLIB_FS_H2,21
struct nameidata {nameidata9,128
struct inode {inode13,171
	struct sb		*i_sb;i_sb14,186
	struct mutex		i_mutex;i_mutex16,206
	unsigned long		i_state;i_state17,230
	atomic_t		i_count;i_count18,255
	umode_t			i_mode;i_mode20,276
	kuid_t			i_uid;i_uid21,295
	kgid_t			i_gid;i_gid22,312
	unsigned int		i_nlink;i_nlink23,329
	dev_t			i_rdev;i_rdev24,353
	loff_t			i_size;i_size25,370
	struct timespec		i_atime;i_atime26,388
	struct timespec		i_mtime;i_mtime27,415
	struct timespec		i_ctime;i_ctime28,442
	spinlock_t		i_lock;i_lock29,469
	u64			i_version;i_version30,490
	map_t			*map;map32,509
	struct hlist_node	i_hash;i_hash33,524
static inline uid_t i_uid_read(const struct inode *inode)i_uid_read42,763
static inline gid_t i_gid_read(const struct inode *inode)i_gid_read47,874
static inline void i_uid_write(struct inode *inode, uid_t uid)i_uid_write52,985
static inline void i_gid_write(struct inode *inode, gid_t gid)i_gid_write57,1100
struct qstr {qstr66,1239
	unsigned int len;len68,1279
	const unsigned char *name;name69,1298
struct dentry {dentry72,1330
	struct qstr d_name;d_name73,1346
	struct inode *d_inode;d_inode74,1367
#define REQ_WRITE	REQ_WRITE84,1555
#define REQ_SYNC	REQ_SYNC85,1575
#define REQ_META	REQ_META86,1594
#define REQ_PRIO	REQ_PRIO87,1613
#define REQ_NOIDLE	REQ_NOIDLE88,1632
#define REQ_RAHEAD	REQ_RAHEAD90,1654
#define REQ_FUA	REQ_FUA92,1676
#define REQ_FLUSH	REQ_FLUSH93,1695
#define RW_MASK	RW_MASK95,1716
#define RWA_MASK	RWA_MASK96,1743
#define READ	READ98,1772
#define WRITE	WRITE99,1788
#define READA	READA100,1811
#define READ_SYNC	READ_SYNC102,1836
#define WRITE_SYNC	WRITE_SYNC103,1872
#define WRITE_ODIRECT	WRITE_ODIRECT104,1923
#define WRITE_FLUSH	WRITE_FLUSH105,1964
#define WRITE_FUA	WRITE_FUA106,2028
#define WRITE_FLUSH_FUA	WRITE_FLUSH_FUA107,2088
#define DT_UNKNOWN	DT_UNKNOWN115,2271
#define DT_FIFO	DT_FIFO116,2292
#define DT_CHR	DT_CHR117,2311
#define DT_DIR	DT_DIR118,2329
#define DT_BLK	DT_BLK119,2347
#define DT_REG	DT_REG120,2365
#define DT_LNK	DT_LNK121,2383
#define DT_SOCK	DT_SOCK122,2402
#define DT_WHT	DT_WHT123,2422
typedef int (*filldir_t)(void *, const char *, int, loff_t, u64, unsigned);filldir_t125,2442
static inline void inode_inc_link_count(struct inode *inode)inode_inc_link_count133,2735
static inline void inode_dec_link_count(struct inode *inode)inode_dec_link_count139,2846

libklib/find_next_bit.c,578
#define BITOP_WORD(BITOP_WORD3,30
unsigned long find_next_bit(const unsigned long *addr, unsigned long size,find_next_bit5,77
unsigned long find_next_zero_bit(const unsigned long *addr, unsigned long size,find_next_zero_bit48,1041
static inline unsigned long ext2_swabp(const unsigned long * x)ext2_swabp92,2038
static inline unsigned long ext2_swab(const unsigned long y)ext2_swab107,2397
unsigned long find_next_zero_bit_le(const void *addr, unsignedfind_next_zero_bit_le122,2747
unsigned long find_next_bit_le(const void *addr, unsignedfind_next_bit_le169,3813

libklib/err.h,561
#define LIBKLIB_ERR_HLIBKLIB_ERR_H2,22
#define MAX_ERRNO MAX_ERRNO8,130
#define IS_ERR_VALUE(IS_ERR_VALUE9,159
static inline void * __must_check ERR_PTR(long error)ERR_PTR11,219
static inline long __must_check PTR_ERR(const void *ptr)PTR_ERR16,301
static inline long __must_check IS_ERR(const void *ptr)IS_ERR21,382
static inline long __must_check IS_ERR_OR_NULL(const void *ptr)IS_ERR_OR_NULL26,485
static inline void * __must_check ERR_CAST(const void *ptr)ERR_CAST31,604
static inline int __must_check PTR_RET(const void *ptr)PTR_RET36,690

libklib/barrier.h,493
#define LIBKLIB_BARRIER_HLIBKLIB_BARRIER_H2,26
#define mb(mb12,224
#define rmb(rmb13,248
#define wmb(wmb14,268
#define smp_mb(smp_mb17,312
#define smp_rmb(smp_rmb18,334
#define smp_wmb(smp_wmb19,358
#define smp_mb(smp_mb21,388
#define smp_rmb(smp_rmb22,415
#define smp_wmb(smp_wmb23,443
#define set_mb(set_mb26,479
#define set_wmb(set_wmb27,544
#define read_barrier_depends(read_barrier_depends29,610
#define smp_read_barrier_depends(smp_read_barrier_depends30,658

libklib/bitops.h,332
#define LIBKLIB_BITOPS_HLIBKLIB_BITOPS_H2,25
#define BITS_PER_LONG	BITS_PER_LONG6,72
#define BIT(BIT8,127
#define BIT_MASK(BIT_MASK9,159
#define BIT_WORD(BIT_WORD10,213
#define BITS_PER_BYTE	BITS_PER_BYTE11,258
#define BITS_TO_LONGS(BITS_TO_LONGS12,283
static inline unsigned fls_long(unsigned long l)fls_long25,663

libklib/atomic.h,2451
#define LIBKLIB_ATOMIC_HLIBKLIB_ATOMIC_H2,25
	int counter;counter5,68
} atomic_t;atomic_t6,82
#define ATOMIC_INIT(ATOMIC_INIT8,95
static inline int atomic_read(const atomic_t *v)atomic_read16,245
static inline void atomic_set(atomic_t *v, int i)atomic_set28,484
static inline int atomic_add_return(int i, atomic_t *v)atomic_add_return40,721
static inline int atomic_sub_return(int i, atomic_t *v)atomic_sub_return58,1043
#define atomic_dec_return(atomic_dec_return69,1183
#define atomic_inc_return(atomic_inc_return70,1239
static inline int atomic_add_negative(int i, atomic_t *v)atomic_add_negative81,1550
static inline void atomic_add(int i, atomic_t *v)atomic_add93,1797
static inline void atomic_sub(int i, atomic_t *v)atomic_sub105,2044
static inline void atomic_inc(atomic_t *v)atomic_inc116,2244
static inline void atomic_dec(atomic_t *v)atomic_dec127,2434
static inline int atomic_sub_and_test(int i, atomic_t *v)atomic_sub_and_test141,2762
static inline int atomic_inc_and_test(atomic_t *v)atomic_inc_and_test154,3059
static inline int atomic_dec_and_test(atomic_t *v)atomic_dec_and_test167,3343
static inline int atomic_cmpxchg(atomic_t *v, int old, int new)atomic_cmpxchg173,3463
static inline int atomic_xchg(atomic_t *v, int new)atomic_xchg181,3608
static inline int __atomic_add_unless(atomic_t *v, int a, int u)__atomic_add_unless188,3722
static inline void atomic_clear_mask(unsigned long mask, atomic_t *v)atomic_clear_mask204,4107
static inline void atomic_set_mask(unsigned int mask, atomic_t *v)atomic_set_mask217,4405
#define smp_mb__before_atomic_dec(smp_mb__before_atomic_dec223,4558
#define smp_mb__after_atomic_dec(smp_mb__after_atomic_dec224,4604
#define smp_mb__before_atomic_inc(smp_mb__before_atomic_inc225,4649
#define smp_mb__after_atomic_inc(smp_mb__after_atomic_inc226,4695
static inline int atomic_add_unless(atomic_t *v, int a, int u)atomic_add_unless237,5042
#define atomic_inc_not_zero(atomic_inc_not_zero249,5378
static inline int atomic_inc_not_zero_hint(atomic_t *v, int hint)atomic_inc_not_zero_hint263,5893
static inline int atomic_inc_unless_negative(atomic_t *p)atomic_inc_unless_negative281,6212
static inline int atomic_dec_unless_positive(atomic_t *p)atomic_dec_unless_positive292,6404
static inline int atomic_dec_if_positive(atomic_t *v)atomic_dec_if_positive310,6812
static inline void atomic_or(int i, atomic_t *v)atomic_or326,7070

libklib/init.h,206
#define LIBKLIB_INIT_HLIBKLIB_INIT_H2,23
#define __init__init4,47
#define __initdata__initdata5,62
#define __initconst__initconst6,81
#define __exitdata__exitdata7,101
#define __exit__exit8,120

libklib/slab.c,339
struct kmem_cache *kmem_cache_create(const char *name, size_t size,kmem_cache_create8,118
void kmem_cache_destroy(struct kmem_cache *cachep)kmem_cache_destroy29,595
void kmem_cache_free(struct kmem_cache *cachep, void *objp)kmem_cache_free38,767
void *kmem_cache_alloc(struct kmem_cache *cachep, gfp_t flags)kmem_cache_alloc47,946

libklib/libklib.h,971
#define LIBKLIB_HLIBKLIB_H2,18
#define BUILD_BUG_ON(BUILD_BUG_ON29,643
#define BUILD_BUG_ON_ZERO(BUILD_BUG_ON_ZERO30,675
#define BUILD_BUG_ON_NULL(BUILD_BUG_ON_NULL31,708
#define BUILD_BUG_ON_ZERO(BUILD_BUG_ON_ZERO37,1010
#define BUILD_BUG_ON_NULL(BUILD_BUG_ON_NULL38,1072
#define BUILD_BUG_ON(BUILD_BUG_ON41,1164
#define BUILD_BUG_ON(BUILD_BUG_ON44,1278
#define ALIGN(ALIGN52,1468
#define __ALIGN_MASK(__ALIGN_MASK53,1525
#define ARRAY_SIZE(ARRAY_SIZE55,1583
#define __round_mask(__round_mask63,1885
#define round_up(round_up64,1937
#define round_down(round_down65,1995
#define FIELD_SIZEOF(FIELD_SIZEOF67,2049
#define DIV_ROUND_UP(DIV_ROUND_UP68,2097
#define min(min75,2269
#define max(max81,2418
#define min_t(min_t93,2702
#define max_t(max_t98,2822
#define S_IRWXUGO	S_IRWXUGO103,2942
#define S_IALLUGO	S_IALLUGO104,2986
#define S_IRUGO	S_IRUGO105,3040
#define S_IWUGO	S_IWUGO106,3083
#define S_IXUGO	S_IXUGO107,3126

libklib/hash.h,568
#define LIBKLIB_HASH_HLIBKLIB_HASH_H2,23
#define GOLDEN_RATIO_PRIME_32 GOLDEN_RATIO_PRIME_325,97
#define GOLDEN_RATIO_PRIME_64 GOLDEN_RATIO_PRIME_647,191
#define GOLDEN_RATIO_PRIME GOLDEN_RATIO_PRIME10,267
#define hash_long(hash_long11,316
#define hash_long(hash_long13,390
#define GOLDEN_RATIO_PRIME GOLDEN_RATIO_PRIME14,438
static inline u64 hash_64(u64 val, unsigned int bits)hash_6419,530
static inline u32 hash_32(u32 val, unsigned int bits)hash_3242,903
static inline unsigned long hash_ptr(const void *ptr, unsigned int bits)hash_ptr51,1149

libklib/typecheck.h,130
#define LIBKLIB_TYPECHECK_HLIBKLIB_TYPECHECK_H2,28
#define typecheck(typecheck8,195
#define typecheck_fn(typecheck_fn19,454

libklib/compiler.h,1024
#define LIBKLIB_COMPILER_HLIBKLIB_COMPILER_H2,27
#define __force	__force5,74
#define __bitwise__	__bitwise__6,114
#define __kernel	__kernel7,159
#define __rcu	__rcu8,210
#define __force__force10,274
#define __bitwise____bitwise__11,290
#define __kernel__kernel12,310
#define __rcu__rcu13,327
#define __packed	__packed17,365
#define __weak	__weak18,406
#define __attribute_const__	__attribute_const__21,473
#define barrier(barrier26,604
#define __must_be_array(__must_be_array29,680
#define __must_be_array(__must_be_array32,783
#define __must_check	__must_check40,952
#define __must_check	__must_check44,1050
#define __printf(__printf49,1149
#define uninitialized_var(uninitialized_var55,1305
#define uninitialized_var(uninitialized_var57,1362
#define __must_check__must_check61,1438
#define likely(likely64,1467
#define unlikely(unlikely65,1512
# define __same_type(__same_type69,1642
#define __must_be_array(__must_be_array73,1752
#define ACCESS_ONCE(ACCESS_ONCE88,2418

buffer_writeback.c,1389
void tux3_iowait_init(struct iowait *iowait)tux3_iowait_init9,71
void tux3_iowait_wait(struct iowait *iowait)tux3_iowait_wait18,224
#define buffers_entry(buffers_entry31,418
#define MAX_BUFVEC_COUNT	MAX_BUFVEC_COUNT33,486
void bufvec_init(struct bufvec *bufvec, map_t *map,bufvec_init36,545
void bufvec_free(struct bufvec *bufvec)bufvec_free63,1202
static inline void bufvec_buffer_move_to_contig(struct bufvec *bufvec,bufvec_buffer_move_to_contig75,1529
static void bufvec_io_done(struct bufvec *bufvec, int err)bufvec_io_done86,1814
static struct buffer_head *bufvec_next_buffer(struct bufvec *bufvec)bufvec_next_buffer102,2213
int bufvec_io(int rw, struct bufvec *bufvec, block_t physical, unsigned count)bufvec_io127,2804
void bufvec_complete_without_io(struct bufvec *bufvec, unsigned count)bufvec_complete_without_io171,3816
int bufvec_contig_add(struct bufvec *bufvec, struct buffer_head *buffer)bufvec_contig_add201,4483
static void cancel_buffer_dirty(struct bufvec *bufvec,cancel_buffer_dirty227,5060
static void bufvec_cancel_dirty_outside(struct bufvec *bufvec)bufvec_cancel_dirty_outside241,5457
static int bufvec_contig_collect(struct bufvec *bufvec)bufvec_contig_collect267,6104
static int buffer_index_cmp(void *priv, struct list_head *a,buffer_index_cmp316,7431
int flush_list(map_t *map, struct tux3_iattr_data *idata,flush_list336,7920

namei.c,1154
static int tuxlookup(struct inode *dir, struct dentry *dentry)tuxlookup16,428
struct inode *tuxopen(struct inode *dir, const char *name, unsigned len)tuxopen35,797
static int tux_check_exist(struct inode *dir, struct qstr *qstr)tux_check_exist54,1168
struct inode *__tuxmknod(struct inode *dir, const char *name, unsigned len,__tuxmknod74,1568
struct inode *tuxcreate(struct inode *dir, const char *name, unsigned len,tuxcreate94,1999
struct inode *__tuxlink(struct inode *src_inode, struct inode *dir,__tuxlink122,2559
int tuxlink(struct inode *dir, const char *srcname, unsigned srclen,tuxlink145,3054
int tuxreadlink(struct inode *dir, const char *name, unsigned len,tuxreadlink191,3963
struct inode *__tuxsymlink(struct inode *dir, const char *name, unsigned len,__tuxsymlink213,4397
int tuxsymlink(struct inode *dir, const char *name, unsigned len,tuxsymlink233,4881
int tuxunlink(struct inode *dir, const char *name, unsigned len)tuxunlink265,5477
int tuxrmdir(struct inode *dir, const char *name, unsigned len)tuxrmdir294,6053
int tuxrename(struct inode *old_dir, const char *old_name, unsigned old_len,tuxrename325,6683

diskio.c,672
static ssize_t iov_length(struct iovec *iov, int iovcnt)iov_length10,186
int iovabs(int fd, struct iovec *iov, int iovcnt, int out, off_t offset)iovabs24,447
int ioabs(int fd, void *data, size_t count, int out, off_t offset)ioabs105,1950
static int iorel(int fd, void *data, size_t count, int out)iorel179,3313
int diskread(int fd, void *data, size_t count, off_t offset)diskread204,3768
int diskwrite(int fd, void *data, size_t count, off_t offset)diskwrite213,3978
int streamread(int fd, void *data, size_t count)streamread222,4189
int streamwrite(int fd, void *data, size_t count)streamwrite231,4379
int fdsize64(int fd, loff_t *size)fdsize64240,4570

tux3fuse.c,4918
#define FUSE_USE_VERSION FUSE_USE_VERSION45,1645
#undef tracetrace49,1724
#define trace trace50,1737
struct tux3fuse {tux3fuse52,1761
	struct sb *sb;sb53,1779
	char *volname;volname54,1795
static void tux3fuse_init(void *userdata, struct fuse_conn_info *conn)tux3fuse_init57,1815
static void tux3fuse_destroy(void *userdata)tux3fuse_destroy114,2871
static struct sb *tux3fuse_get_sb(fuse_req_t req)tux3fuse_get_sb132,3236
static struct inode *tux3fuse_iget(struct sb *sb, fuse_ino_t ino)tux3fuse_iget142,3467
static void tux3fuse_fill_stat(struct stat *stat, struct inode *inode)tux3fuse_fill_stat154,3719
static void tux3fuse_fill_ep(struct fuse_entry_param *ep, struct inode *inode)tux3fuse_fill_ep181,4466
static void tux3fuse_lookup(fuse_req_t req, fuse_ino_t parent, const char *name)tux3fuse_lookup196,4828
static void tux3fuse_forget(fuse_req_t req, fuse_ino_t ino,tux3fuse_forget226,5461
static void tux3fuse_getattr(fuse_req_t req, fuse_ino_t ino,tux3fuse_getattr236,5680
static void tux3fuse_setattr(fuse_req_t req, fuse_ino_t ino, struct stat *attr,tux3fuse_setattr260,6182
static void tux3fuse_readlink(fuse_req_t req, fuse_ino_t ino)tux3fuse_readlink305,7241
static struct inode *__tux3fuse_mknod(fuse_req_t req, fuse_ino_t parent,__tux3fuse_mknod339,7877
static void tux3fuse_mknod(fuse_req_t req, fuse_ino_t parent, const char *name,tux3fuse_mknod364,8518
static void tux3fuse_mkdir(fuse_req_t req, fuse_ino_t parent, const char *name,tux3fuse_mkdir390,9169
static void tux3fuse_link(fuse_req_t req, fuse_ino_t ino,tux3fuse_link416,9793
static void tux3fuse_symlink(fuse_req_t req, const char *link,tux3fuse_symlink460,10684
static void tux3fuse_unlink(fuse_req_t req, fuse_ino_t parent, const char *name)tux3fuse_unlink500,11580
static void tux3fuse_rmdir(fuse_req_t req, fuse_ino_t parent, const char *name)tux3fuse_rmdir524,12094
static void tux3fuse_rename(fuse_req_t req,tux3fuse_rename548,12606
static void tux3fuse_create(fuse_req_t req, fuse_ino_t parent, const char *name,tux3fuse_create583,13370
static void tux3fuse_open(fuse_req_t req, fuse_ino_t ino,tux3fuse_open609,14046
static void tux3fuse_flush(fuse_req_t req, fuse_ino_t ino,tux3fuse_flush630,14504
static void tux3fuse_release(fuse_req_t req, fuse_ino_t ino,tux3fuse_release640,14727
static void tux3fuse_read(fuse_req_t req, fuse_ino_t ino, size_t size,tux3fuse_read654,15101
static void tux3fuse_write(fuse_req_t req, fuse_ino_t ino, const char *buf,tux3fuse_write701,16089
static void tux3fuse_opendir(fuse_req_t req, fuse_ino_t ino,tux3fuse_opendir725,16755
static void tux3fuse_releasedir(fuse_req_t req, fuse_ino_t ino,tux3fuse_releasedir736,17009
struct fillstate { char *dirent; int done; u64 ino; unsigned type; };fillstate747,17265
struct fillstate { char *dirent; int done; u64 ino; unsigned type; };dirent747,17265
struct fillstate { char *dirent; int done; u64 ino; unsigned type; };done747,17265
struct fillstate { char *dirent; int done; u64 ino; unsigned type; };ino747,17265
struct fillstate { char *dirent; int done; u64 ino; unsigned type; };type747,17265
static int tux3fuse_filler(void *info, const char *name, int namelen,tux3fuse_filler749,17336
static void tux3fuse_readdir(fuse_req_t req, fuse_ino_t ino, size_t size,tux3fuse_readdir769,17893
static void tux3fuse_statfs(fuse_req_t req, fuse_ino_t ino)tux3fuse_statfs811,18921
static void tux3fuse_access(fuse_req_t req, fuse_ino_t ino, int mask)tux3fuse_access835,19484
static void tux3fuse_fsyncdir(fuse_req_t req, fuse_ino_t ino,tux3fuse_fsyncdir845,19720
static void tux3fuse_fsync(fuse_req_t req, fuse_ino_t ino, int datasync,tux3fuse_fsync858,20063
static int xattr_prefix_check(const char *name)xattr_prefix_check876,20599
static void tux3fuse_setxattr(fuse_req_t req, fuse_ino_t ino, const char *name,tux3fuse_setxattr895,21071
static void tux3fuse_getxattr(fuse_req_t req, fuse_ino_t ino, const char *name,tux3fuse_getxattr925,21732
static void tux3fuse_listxattr(fuse_req_t req, fuse_ino_t ino, size_t size)tux3fuse_listxattr970,22616
static void tux3fuse_removexattr(fuse_req_t req, fuse_ino_t ino,tux3fuse_removexattr1013,23392
static void tux3fuse_getlk(fuse_req_t req, fuse_ino_t ino,tux3fuse_getlk1046,24043
static void tux3fuse_setlk(fuse_req_t req, fuse_ino_t ino,tux3fuse_setlk1058,24365
static void tux3fuse_bmap(fuse_req_t req, fuse_ino_t ino, size_t blocksize,tux3fuse_bmap1073,24798
static void tux3fuse_ioctl(fuse_req_t req, fuse_ino_t ino, int cmd, void *arg,tux3fuse_ioctl1085,25103
static struct fuse_lowlevel_ops tux3_ops = {tux3_ops1111,25738
	FUSE_OPT_KEY_TUX3_HELP,FUSE_OPT_KEY_TUX3_HELP1154,26880
static struct fuse_opt tux3fuse_options[] = {tux3fuse_options1157,26909
static int tux3fuse_parse_options(void *data, const char *arg,tux3fuse_parse_options1163,27067
int main(int argc, char *argv[])main1202,28099

dir.c,103
#define trace trace44,963
void tux_dump_entries(struct buffer_head *buffer)tux_dump_entries49,1020
